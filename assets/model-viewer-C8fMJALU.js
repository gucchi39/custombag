import{ACESFilmicToneMapping as Vh,AgXToneMapping as Kh,ReinhardToneMapping as zh,CineonToneMapping as Jh,LinearToneMapping as Yh,NoToneMapping as Gc,NeutralToneMapping as Js,Loader as dn,FileLoader as ht,SRGBColorSpace as Be,LinearSRGBColorSpace as ie,BufferGeometry as un,BufferAttribute as $i,InterleavedBuffer as Nc,Color as he,ColorManagement as Ys,InterleavedBufferAttribute as Uc,TrianglesDrawMode as Wh,TriangleFanDrawMode as Ka,TriangleStripDrawMode as Oc,LoaderUtils as Vi,MeshPhysicalMaterial as Ve,Vector2 as De,SpotLight as Xh,PointLight as Pc,DirectionalLight as Hc,Matrix4 as pt,Vector3 as k,InstancedMesh as Zh,Quaternion as ss,InstancedBufferAttribute as ed,Object3D as hi,TextureLoader as qc,ImageBitmapLoader as td,LinearMipmapLinearFilter as pi,NearestMipmapLinearFilter as fr,LinearMipmapNearestFilter as mr,NearestMipmapNearestFilter as gn,LinearFilter as se,NearestFilter as ft,RepeatWrapping as _t,MirroredRepeatWrapping as br,ClampToEdgeWrapping as Fe,PointsMaterial as id,Material as Gs,LineBasicMaterial as sd,MeshStandardMaterial as Ws,DoubleSide as dt,MeshBasicMaterial as Pe,PropertyBinding as nd,SkinnedMesh as ad,Mesh as ue,LineSegments as rd,Line as za,LineLoop as od,Points as Ad,Group as Ns,PerspectiveCamera as Xs,MathUtils as cd,OrthographicCamera as pn,Skeleton as ld,AnimationClip as hd,Bone as dd,InterpolateDiscrete as ud,InterpolateLinear as jc,Texture as He,VectorKeyframeTrack as kr,NumberKeyframeTrack as Lr,QuaternionKeyframeTrack as Gr,FrontSide as Ir,Interpolant as gd,Box3 as Dt,Sphere as Er,CompressedCubeTexture as pd,CompressedArrayTexture as fd,CompressedTexture as $c,NoColorSpace as Ja,RGBA_PVRTC_2BPPV1_Format as Nr,RGBA_PVRTC_4BPPV1_Format as Ya,RGBA_BPTC_Format as Wa,RED_GREEN_RGTC2_Format as md,SIGNED_RED_GREEN_RGTC2_Format as bd,RED_RGTC1_Format as Id,SIGNED_RED_RGTC1_Format as Ed,RGBA_S3TC_DXT3_Format as Ur,RGB_S3TC_DXT1_Format as Or,RGBA_S3TC_DXT1_Format as Xa,RGBA_ASTC_6x6_Format as vn,RGBA_ASTC_4x4_Format as Us,RGB_ETC2_Format as Vc,RGBA_ETC2_EAC_Format as Kc,RGBFormat as Za,RedFormat as Gi,RGFormat as Ni,RGBAFormat as Re,UnsignedByteType as q,HalfFloatType as de,UnsignedInt101111Type as zc,UnsignedInt5999Type as Jc,FloatType as ke,DataTexture as Yc,Data3DTexture as Cd,RGB_PVRTC_4BPPV1_Format as Bd,RGB_ETC1_Format as yd,RGBA_S3TC_DXT5_Format as wd,RGB_BPTC_UNSIGNED_Format as Qd,EventDispatcher as fn,LightProbe as vd,WebGLCubeRenderTarget as Wc,Float32BufferAttribute as Sd,PlaneGeometry as ns,BoxGeometry as mn,Spherical as Os,Matrix3 as Cr,Euler as Xc,Scene as as,WebGLRenderTarget as Wi,UVMapping as Zs,WebGLRenderer as Zc,ShaderMaterial as Xi,IntType as xd,ShortType as Rd,ByteType as Dd,UnsignedIntType as Td,LoadingManager as Md,LinearMipMapLinearFilter as Pr,NoBlending as el,DataTextureLoader as Fd,DataUtils as cs,BackSide as Br,EquirectangularReflectionMapping as _d,CubeCamera as Hr,VideoTexture as kd,CanvasTexture as Ld,SphereGeometry as Gd,Triangle as tl,MeshDepthMaterial as Nd,Raycaster as Ud,AnimationMixer as Od,LoopPingPong as er,LoopRepeat as Ki,LoopOnce as en}from"./three.module-Cy9hH2KF.js";import{GLTFExporter as Pd}from"./GLTFExporter-CFf11SUq.js";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ps=globalThis,yr=Ps.ShadowRoot&&(Ps.ShadyCSS===void 0||Ps.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,il=Symbol(),qr=new WeakMap;let Hd=class{constructor(e,t,s){if(this._$cssResult$=!0,s!==il)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(yr&&e===void 0){const s=t!==void 0&&t.length===1;s&&(e=qr.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&qr.set(t,e))}return e}toString(){return this.cssText}};const qd=r=>new Hd(typeof r=="string"?r:r+"",void 0,il),jd=(r,e)=>{if(yr)r.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const s=document.createElement("style"),i=Ps.litNonce;i!==void 0&&s.setAttribute("nonce",i),s.textContent=t.cssText,r.appendChild(s)}},jr=yr?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return qd(t)})(r):r;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:$d,defineProperty:Vd,getOwnPropertyDescriptor:Kd,getOwnPropertyNames:zd,getOwnPropertySymbols:Jd,getPrototypeOf:Yd}=Object,ut=globalThis,$r=ut.trustedTypes,Wd=$r?$r.emptyScript:"",Sn=ut.reactiveElementPolyfillSupport,zi=(r,e)=>r,tn={toAttribute(r,e){switch(e){case Boolean:r=r?Wd:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},wr=(r,e)=>!$d(r,e),Vr={attribute:!0,type:String,converter:tn,reflect:!1,useDefault:!1,hasChanged:wr};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),ut.litPropertyMetadata??(ut.litPropertyMetadata=new WeakMap);let Tt=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=Vr){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const s=Symbol(),i=this.getPropertyDescriptor(e,s,t);i!==void 0&&Vd(this.prototype,e,i)}}static getPropertyDescriptor(e,t,s){const{get:i,set:n}=Kd(this.prototype,e)??{get(){return this[t]},set(a){this[t]=a}};return{get:i,set(a){const o=i==null?void 0:i.call(this);n==null||n.call(this,a),this.requestUpdate(e,o,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Vr}static _$Ei(){if(this.hasOwnProperty(zi("elementProperties")))return;const e=Yd(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(zi("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(zi("properties"))){const t=this.properties,s=[...zd(t),...Jd(t)];for(const i of s)this.createProperty(i,t[i])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[s,i]of t)this.elementProperties.set(s,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);i!==void 0&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const i of s)t.unshift(jr(i))}else e!==void 0&&t.push(jr(e));return t}static _$Eu(e,t){const s=t.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const s of t.keys())this.hasOwnProperty(s)&&(e.set(s,this[s]),delete this[s]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return jd(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostConnected)==null?void 0:s.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var s;return(s=t.hostDisconnected)==null?void 0:s.call(t)})}attributeChangedCallback(e,t,s){this._$AK(e,s)}_$ET(e,t){var n;const s=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,s);if(i!==void 0&&s.reflect===!0){const a=(((n=s.converter)==null?void 0:n.toAttribute)!==void 0?s.converter:tn).toAttribute(t,s.type);this._$Em=e,a==null?this.removeAttribute(i):this.setAttribute(i,a),this._$Em=null}}_$AK(e,t){var n,a;const s=this.constructor,i=s._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const o=s.getPropertyOptions(i),A=typeof o.converter=="function"?{fromAttribute:o.converter}:((n=o.converter)==null?void 0:n.fromAttribute)!==void 0?o.converter:tn;this._$Em=i;const c=A.fromAttribute(t,o.type);this[i]=c??((a=this._$Ej)==null?void 0:a.get(i))??c,this._$Em=null}}requestUpdate(e,t,s){var i;if(e!==void 0){const n=this.constructor,a=this[e];if(s??(s=n.getPropertyOptions(e)),!((s.hasChanged??wr)(a,t)||s.useDefault&&s.reflect&&a===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(n._$Eu(e,s))))return;this.C(e,t,s)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:s,reflect:i,wrapped:n},a){s&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,a??t??this[e]),n!==!0||a!==void 0)||(this._$AL.has(e)||(this.hasUpdated||s||(t=void 0),this._$AL.set(e,t)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var s;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,a]of this._$Ep)this[n]=a;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[n,a]of i){const{wrapped:o}=a,A=this[n];o!==!0||this._$AL.has(n)||A===void 0||this.C(n,void 0,a,A)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),(s=this._$EO)==null||s.forEach(i=>{var n;return(n=i.hostUpdate)==null?void 0:n.call(i)}),this.update(t)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(t)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(s=>{var i;return(i=s.hostUpdated)==null?void 0:i.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(t=>this._$ET(t,this[t]))),this._$EM()}updated(e){}firstUpdated(e){}};Tt.elementStyles=[],Tt.shadowRootOptions={mode:"open"},Tt[zi("elementProperties")]=new Map,Tt[zi("finalized")]=new Map,Sn==null||Sn({ReactiveElement:Tt}),(ut.reactiveElementVersions??(ut.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Xd={attribute:!0,type:String,converter:tn,reflect:!1,hasChanged:wr},Zd=(r=Xd,e,t)=>{const{kind:s,metadata:i}=t;let n=globalThis.litPropertyMetadata.get(i);if(n===void 0&&globalThis.litPropertyMetadata.set(i,n=new Map),s==="setter"&&((r=Object.create(r)).wrapped=!0),n.set(t.name,r),s==="accessor"){const{name:a}=t;return{set(o){const A=e.get.call(this);e.set.call(this,o),this.requestUpdate(a,A,r)},init(o){return o!==void 0&&this.C(a,void 0,r,o),o}}}if(s==="setter"){const{name:a}=t;return function(o){const A=this[a];e.call(this,o),this.requestUpdate(a,A,r)}}throw Error("Unsupported decorator location: "+s)};function F(r){return(e,t)=>typeof t=="object"?Zd(r,e,t):((s,i,n)=>{const a=i.hasOwnProperty(n);return i.constructor.createProperty(n,s),a?Object.getOwnPropertyDescriptor(i,n):void 0})(r,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ji=globalThis,sn=Ji.trustedTypes,Kr=sn?sn.createPolicy("lit-html",{createHTML:r=>r}):void 0,sl="$lit$",ot=`lit$${Math.random().toFixed(9).slice(2)}$`,nl="?"+ot,eu=`<${nl}>`,kt=document,Zi=()=>kt.createComment(""),es=r=>r===null||typeof r!="object"&&typeof r!="function",Qr=Array.isArray,tu=r=>Qr(r)||typeof(r==null?void 0:r[Symbol.iterator])=="function",xn=`[ 	
\f\r]`,mi=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,zr=/-->/g,Jr=/>/g,bt=RegExp(`>|${xn}(?:([^\\s"'>=/]+)(${xn}*=${xn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Yr=/'/g,Wr=/"/g,al=/^(?:script|style|textarea|title)$/i,iu=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),bn=iu(1),di=Symbol.for("lit-noChange"),ae=Symbol.for("lit-nothing"),Xr=new WeakMap,Mt=kt.createTreeWalker(kt,129);function rl(r,e){if(!Qr(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return Kr!==void 0?Kr.createHTML(e):e}const su=(r,e)=>{const t=r.length-1,s=[];let i,n=e===2?"<svg>":e===3?"<math>":"",a=mi;for(let o=0;o<t;o++){const A=r[o];let c,h,l=-1,d=0;for(;d<A.length&&(a.lastIndex=d,h=a.exec(A),h!==null);)d=a.lastIndex,a===mi?h[1]==="!--"?a=zr:h[1]!==void 0?a=Jr:h[2]!==void 0?(al.test(h[2])&&(i=RegExp("</"+h[2],"g")),a=bt):h[3]!==void 0&&(a=bt):a===bt?h[0]===">"?(a=i??mi,l=-1):h[1]===void 0?l=-2:(l=a.lastIndex-h[2].length,c=h[1],a=h[3]===void 0?bt:h[3]==='"'?Wr:Yr):a===Wr||a===Yr?a=bt:a===zr||a===Jr?a=mi:(a=bt,i=void 0);const u=a===bt&&r[o+1].startsWith("/>")?" ":"";n+=a===mi?A+eu:l>=0?(s.push(c),A.slice(0,l)+sl+A.slice(l)+ot+u):A+ot+(l===-2?o:u)}return[rl(r,n+(r[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),s]};class ts{constructor({strings:e,_$litType$:t},s){let i;this.parts=[];let n=0,a=0;const o=e.length-1,A=this.parts,[c,h]=su(e,t);if(this.el=ts.createElement(c,s),Mt.currentNode=this.el.content,t===2||t===3){const l=this.el.content.firstChild;l.replaceWith(...l.childNodes)}for(;(i=Mt.nextNode())!==null&&A.length<o;){if(i.nodeType===1){if(i.hasAttributes())for(const l of i.getAttributeNames())if(l.endsWith(sl)){const d=h[a++],u=i.getAttribute(l).split(ot),g=/([.?@])?(.*)/.exec(d);A.push({type:1,index:n,name:g[2],strings:u,ctor:g[1]==="."?au:g[1]==="?"?ru:g[1]==="@"?ou:In}),i.removeAttribute(l)}else l.startsWith(ot)&&(A.push({type:6,index:n}),i.removeAttribute(l));if(al.test(i.tagName)){const l=i.textContent.split(ot),d=l.length-1;if(d>0){i.textContent=sn?sn.emptyScript:"";for(let u=0;u<d;u++)i.append(l[u],Zi()),Mt.nextNode(),A.push({type:2,index:++n});i.append(l[d],Zi())}}}else if(i.nodeType===8)if(i.data===nl)A.push({type:2,index:n});else{let l=-1;for(;(l=i.data.indexOf(ot,l+1))!==-1;)A.push({type:7,index:n}),l+=ot.length-1}n++}}static createElement(e,t){const s=kt.createElement("template");return s.innerHTML=e,s}}function ui(r,e,t=r,s){var a,o;if(e===di)return e;let i=s!==void 0?(a=t._$Co)==null?void 0:a[s]:t._$Cl;const n=es(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==n&&((o=i==null?void 0:i._$AO)==null||o.call(i,!1),n===void 0?i=void 0:(i=new n(r),i._$AT(r,t,s)),s!==void 0?(t._$Co??(t._$Co=[]))[s]=i:t._$Cl=i),i!==void 0&&(e=ui(r,i._$AS(r,e.values),i,s)),e}class nu{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:s}=this._$AD,i=((e==null?void 0:e.creationScope)??kt).importNode(t,!0);Mt.currentNode=i;let n=Mt.nextNode(),a=0,o=0,A=s[0];for(;A!==void 0;){if(a===A.index){let c;A.type===2?c=new rs(n,n.nextSibling,this,e):A.type===1?c=new A.ctor(n,A.name,A.strings,this,e):A.type===6&&(c=new Au(n,this,e)),this._$AV.push(c),A=s[++o]}a!==(A==null?void 0:A.index)&&(n=Mt.nextNode(),a++)}return Mt.currentNode=kt,i}p(e){let t=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,t),t+=s.strings.length-2):s._$AI(e[t])),t++}}class rs{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,s,i){this.type=2,this._$AH=ae,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=s,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=ui(this,e,t),es(e)?e===ae||e==null||e===""?(this._$AH!==ae&&this._$AR(),this._$AH=ae):e!==this._$AH&&e!==di&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):tu(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ae&&es(this._$AH)?this._$AA.nextSibling.data=e:this.T(kt.createTextNode(e)),this._$AH=e}$(e){var n;const{values:t,_$litType$:s}=e,i=typeof s=="number"?this._$AC(e):(s.el===void 0&&(s.el=ts.createElement(rl(s.h,s.h[0]),this.options)),s);if(((n=this._$AH)==null?void 0:n._$AD)===i)this._$AH.p(t);else{const a=new nu(i,this),o=a.u(this.options);a.p(t),this.T(o),this._$AH=a}}_$AC(e){let t=Xr.get(e.strings);return t===void 0&&Xr.set(e.strings,t=new ts(e)),t}k(e){Qr(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let s,i=0;for(const n of e)i===t.length?t.push(s=new rs(this.O(Zi()),this.O(Zi()),this,this.options)):s=t[i],s._$AI(n),i++;i<t.length&&(this._$AR(s&&s._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,t);e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}}class In{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,s,i,n){this.type=1,this._$AH=ae,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=ae}_$AI(e,t=this,s,i){const n=this.strings;let a=!1;if(n===void 0)e=ui(this,e,t,0),a=!es(e)||e!==this._$AH&&e!==di,a&&(this._$AH=e);else{const o=e;let A,c;for(e=n[0],A=0;A<n.length-1;A++)c=ui(this,o[s+A],t,A),c===di&&(c=this._$AH[A]),a||(a=!es(c)||c!==this._$AH[A]),c===ae?e=ae:e!==ae&&(e+=(c??"")+n[A+1]),this._$AH[A]=c}a&&!i&&this.j(e)}j(e){e===ae?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class au extends In{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ae?void 0:e}}let ru=class extends In{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ae)}};class ou extends In{constructor(e,t,s,i,n){super(e,t,s,i,n),this.type=5}_$AI(e,t=this){if((e=ui(this,e,t,0)??ae)===di)return;const s=this._$AH,i=e===ae&&s!==ae||e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive,n=e!==ae&&(s===ae||i);i&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}class Au{constructor(e,t,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){ui(this,e)}}const Rn=Ji.litHtmlPolyfillSupport;Rn==null||Rn(ts,rs),(Ji.litHtmlVersions??(Ji.litHtmlVersions=[])).push("3.3.1");const ol=(r,e,t)=>{const s=(t==null?void 0:t.renderBefore)??e;let i=s._$litPart$;if(i===void 0){const n=(t==null?void 0:t.renderBefore)??null;s._$litPart$=i=new rs(e.insertBefore(Zi(),n),n,void 0,t??{})}return i._$AI(r),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ft=globalThis;let Hs=class extends Tt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t;const e=super.createRenderRoot();return(t=this.renderOptions).renderBefore??(t.renderBefore=e.firstChild),e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ol(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return di}};var Lc;Hs._$litElement$=!0,Hs.finalized=!0,(Lc=Ft.litElementHydrateSupport)==null||Lc.call(Ft,{LitElement:Hs});const Dn=Ft.litElementPolyfillSupport;Dn==null||Dn({LitElement:Hs});(Ft.litElementVersions??(Ft.litElementVersions=[])).push("4.2.1");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,cl=Al&&self.XRSession.prototype.requestHitTestSource!=null,Tn=self.ResizeObserver!=null,Mn=self.IntersectionObserver!=null,ll=cl;(()=>{const r=navigator.userAgent||navigator.vendor||self.opera;let e=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(e=!0),e})();const cu=/android/i.test(navigator.userAgent),lu=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,hu=/firefox/i.test(navigator.userAgent),du=/OculusBrowser/.test(navigator.userAgent),uu=cu&&!hu&&!du,gu=!!(window.webkit&&window.webkit.messageHandlers),Zr=(()=>{if(lu){if(gu)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const r=document.createElement("a");return!!(r.relList&&r.relList.supports&&r.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=r=>r&&r!=="null"?pu(r):null,eo=()=>{if(ll)return;const r=[];throw Al||r.push("WebXR Device API"),cl||r.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${r.join(", ")}`)},pu=r=>new URL(r,window.location.toString()).toString(),fu=(r,e)=>{let t=null;const s=(...i)=>{t==null&&(r(...i),t=self.setTimeout(()=>t=null,e))};return s.flush=()=>{t!=null&&(self.clearTimeout(t),t=null)},s},to=(r,e)=>{let t=null;return(...s)=>{t!=null&&self.clearTimeout(t),t=self.setTimeout(()=>{t=null,r(...s)},e)}},Oe=(r,e,t)=>Math.max(e,Math.min(t,r)),io=(()=>{const r="model-viewer-debug-mode",e=new RegExp(`[?&]${r}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(e)})(),mu=(r=0)=>new Promise(e=>setTimeout(e,r)),bu=(r,e,t=null)=>new Promise(s=>{function i(n){(!t||t(n))&&(s(n),r.removeEventListener(e,i))}r.addEventListener(e,i)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const Iu=.5,Eu=0,Cu=1,Bu=1,Ui=Symbol("currentEnvironmentMap"),Oi=Symbol("currentBackground"),nn=Symbol("updateEnvironment"),ls=Symbol("cancelEnvironmentUpdate"),yu=r=>{var e,t,s;class i extends r{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=Eu,this.shadowSoftness=Cu,this.exposure=Bu,this.toneMapping="auto",this.skyboxHeight="0",this[e]=null,this[t]=null,this[s]=null}updated(a){super.updated(a),a.has("shadowIntensity")&&(this[w].setShadowIntensity(this.shadowIntensity*Iu),this[oe]()),a.has("shadowSoftness")&&(this[w].setShadowSoftness(this.shadowSoftness),this[oe]()),a.has("exposure")&&(this[w].exposure=this.exposure,this[oe]()),a.has("toneMapping")&&(this[w].toneMapping=this.toneMapping==="aces"?Vh:this.toneMapping==="agx"?Kh:this.toneMapping==="reinhard"?zh:this.toneMapping==="cineon"?Jh:this.toneMapping==="linear"?Yh:this.toneMapping==="none"?Gc:Js,this[oe]()),(a.has("environmentImage")||a.has("skyboxImage"))&&this[gi]()&&this[nn](),a.has("skyboxHeight")&&(this[w].setGroundedSkybox(),this[oe]())}hasBakedShadow(){return this[w].bakedShadows.size>0}async[(e=Ui,t=Oi,s=ls,nn)](){const{skyboxImage:a,environmentImage:o}=this;this[ls]!=null&&(this[ls](),this[ls]=null);const{textureUtils:A}=this[z];if(A==null)return;const c=this[Lt].beginActivity("environment-update");try{const{environmentMap:h,skybox:l}=await A.generateEnvironmentMapAndSkybox(hl(a),o,d=>c(Oe(d,0,1)),this.withCredentials);this[Ui]!==h&&(this[Ui]=h,this.dispatchEvent(new CustomEvent("environment-change"))),l!=null?this[Oi]=l.name===h.name?h:l:this[Oi]=null,this[w].setEnvironmentAndSkybox(this[Ui],this[Oi])}catch(h){if(h instanceof Error)throw this[w].setEnvironmentAndSkybox(null,null),h}finally{c(1)}}}return It([F({type:String,attribute:"environment-image"})],i.prototype,"environmentImage",void 0),It([F({type:String,attribute:"skybox-image"})],i.prototype,"skyboxImage",void 0),It([F({type:Number,attribute:"shadow-intensity"})],i.prototype,"shadowIntensity",void 0),It([F({type:Number,attribute:"shadow-softness"})],i.prototype,"shadowSoftness",void 0),It([F({type:Number})],i.prototype,"exposure",void 0),It([F({type:String,attribute:"tone-mapping"})],i.prototype,"toneMapping",void 0),It([F({type:String,attribute:"skybox-height"})],i.prototype,"skyboxHeight",void 0),i};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=bn`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=bn`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=bn`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=bn`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
  outline-offset: -1px;
  outline-width: 1px;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          role="button"
          href="javascript:void(0);"
          aria-label="View in your space">
        ${vu}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${Qu}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${wu}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,xu=r=>{ol(Su,r)};var so=function(){var r="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q:Odkr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq;w8Wqdbk;esezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9Uc;WFbGgocjdaocjd6EhDaicefhocbhqdnindndndnaeaq9nmbaDaeaq9RaqaDfae6Egkcsfglcl4cifcd4hxalc9WGgmTmecbhPawcjdfhsaohzinaraz9Rax6mvarazaxfgo9RcK6mvczhlcbhHinalgic9WfgOawcj;cbffhldndndndndnazaOco4fRbbaHcoG4ciGPlbedibkal9cb83ibalcwf9cb83ibxikalaoRblaoRbbgOco4gAaAciSgAE86bbawcj;cbfaifglcGfaoclfaAfgARbbaOcl4ciGgCaCciSgCE86bbalcVfaAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc7faAaCfgARbbaOciGgOaOciSgOE86bbalctfaAaOfgARbbaoRbegOco4gCaCciSgCE86bbalc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc93faAaCfgARbbaOciGgOaOciSgOE86bbalc94faAaOfgARbbaoRbdgOco4gCaCciSgCE86bbalc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbalc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbalc97faAaCfgARbbaOciGgOaOciSgOE86bbalc98faAaOfgORbbaoRbigoco4gAaAciSgAE86bbalc99faOaAfgORbbaocl4ciGgAaAciSgAE86bbalc9:faOaAfgORbbaocd4ciGgAaAciSgAE86bbalcufaOaAfglRbbaociGgoaociSgoE86bbalaofhoxdkalaoRbwaoRbbgOcl4gAaAcsSgAE86bbawcj;cbfaifglcGfaocwfaAfgARbbaOcsGgOaOcsSgOE86bbalcVfaAaOfgORbbaoRbegAcl4gCaCcsSgCE86bbalc7faOaCfgORbbaAcsGgAaAcsSgAE86bbalctfaOaAfgORbbaoRbdgAcl4gCaCcsSgCE86bbalc91faOaCfgORbbaAcsGgAaAcsSgAE86bbalc4faOaAfgORbbaoRbigAcl4gCaCcsSgCE86bbalc93faOaCfgORbbaAcsGgAaAcsSgAE86bbalc94faOaAfgORbbaoRblgAcl4gCaCcsSgCE86bbalc95faOaCfgORbbaAcsGgAaAcsSgAE86bbalc96faOaAfgORbbaoRbvgAcl4gCaCcsSgCE86bbalc97faOaCfgORbbaAcsGgAaAcsSgAE86bbalc98faOaAfgORbbaoRbogAcl4gCaCcsSgCE86bbalc99faOaCfgORbbaAcsGgAaAcsSgAE86bbalc9:faOaAfgORbbaoRbrgocl4gAaAcsSgAE86bbalcufaOaAfglRbbaocsGgoaocsSgoE86bbalaofhoxekalao8Pbb83bbalcwfaocwf8Pbb83bbaoczfhokdnaiam9pmbaHcdfhHaiczfhlarao9RcL0mekkaiam6mvaoTmvdnakTmbawaPfRbbhHawcj;cbfhlashiakhOinaialRbbgzce4cbazceG9R7aHfgH86bbaiadfhialcefhlaOcufgOmbkkascefhsaohzaPcefgPad9hmbxikkcbc99arao9Radcaadca0ESEhoxlkaoaxad2fhCdnakmbadhlinaoTmlarao9Rax6mlaoaxfhoalcufglmbkaChoxekcbhmawcjdfhAinarao9Rax6miawamfRbbhHawcj;cbfhlaAhiakhOinaialRbbgzce4cbazceG9R7aHfgH86bbaiadfhialcefhlaOcufgOmbkaAcefhAaoaxfhoamcefgmad9hmbkaChokabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqaombkc9:hoxekc9:hokavcj;ebf8Kjjjjbaok;cseHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgwce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhDaicefgqarfhidnaeTmbcmcsawceSEhkcbhxcbhmcbhPcbhwcbhlindnaiaD9nmbc9:hoxikdndnaqRbbgoc;Ve0mbavc;abfalaocu7gscl4fcsGcitfgzydlhrazydbhzdnaocsGgHak9pmbavawasfcsGcdtfydbaxaHEhoaHThsdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkaxasfhxcdhHavawcdtfaoBdbawasfhwcehsalhOxdkdndnaHcsSmbaHc987aHamffcefhoxekaicefhoai8SbbgHcFeGhsdndnaHcu9mmbaohixekaicvfhiascFbGhscrhHdninao8SbbgOcFbGaHtasVhsaOcu9kmeaocefhoaHcrfgHc8J9hmbxdkkaocefhikasce4cbasceG9R7amfhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhHavawcdtfaoBdbcehsawcefhwalhOaohmxekdnaocpe0mbaxcefgHavawaDaocsGfRbbgocl49RcsGcdtfydbaocz6gzEhravawao9RcsGcdtfydbaHazfgAaocsGgHEhoaHThCdndnadcd9hmbabaPcetfgHax87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHaxBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfaxBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgOaxBdlaOarBdbavawazfgwcsGcdtfaoBdbalcefcsGhOawaCfhwaxhzaAaCfhxxekaxcbaiRbbgOEgzaoc;:eSgHfhraOcsGhCaOcl4hAdndnaOcs0mbarcefhoxekarhoavawaA9RcsGcdtfydbhrkdndnaCmbaocefhxxekaohxavawaO9RcsGcdtfydbhokdndnaHTmbaicefhHxekaicdfhHai8SbegscFeGhzdnascu9kmbaicofhXazcFbGhzcrhidninaH8SbbgscFbGaitazVhzascu9kmeaHcefhHaicrfgic8J9hmbkaXhHxekaHcefhHkazce4cbazceG9R7amfgmhzkdndnaAcsSmbaHhsxekaHcefhsaH8SbbgicFeGhrdnaicu9kmbaHcvfhXarcFbGhrcrhidninas8SbbgHcFbGaitarVhraHcu9kmeascefhsaicrfgic8J9hmbkaXhsxekascefhskarce4cbarceG9R7amfgmhrkdndnaCcsSmbashixekascefhias8SbbgocFeGhHdnaocu9kmbascvfhXaHcFbGhHcrhodninai8SbbgscFbGaotaHVhHascu9kmeaicefhiaocrfgoc8J9hmbkaXhixekaicefhikaHce4cbaHceG9R7amfgmhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfazBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgXazBdlaXarBdbavawaOcz6aAcsSVfgwcsGcdtfaoBdbawaCTaCcsSVfhwalcefcsGhOkaqcefhqavc;abfaOcitfgOarBdlaOaoBdbavc;abfalasfcsGcitfgraoBdlarazBdbawcsGhwalaHfcsGhlaPcifgPae6mbkkcbc99aiaDSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;oiliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabaiavcefciGfcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavciGfgkcd7cetfaD87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:OhDxekcjjjj94hDkabaiavcufciGfcetfaD87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohvxekcjjjj94hvkabakcetfav87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2gdTmbinababydbgecwtcw91:Yaece91cjjj98Gcjjj;8if::NUdbabclfhbadcufgdmbkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaeczfheaiczfhiadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklzNbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q:6dkr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq:p9sqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk:N8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhlaicefhodnaeTmbadTmbalc;WFbGglcjdalcjd6EhwcbhDinawaeaD9RaDawfae6Egqcsfglc9WGgkci2hxakcethmalcl4cifcd4hPabaDad2fhsakc;ab6hzcbhHincbhOaohAdndninaraA9RaP6meavcj;cbfaOak2fhCaAaPfhocbhidnazmbarao9Rc;Gb6mbcbhlinaCalfhidndndndndnaAalco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklbaoczfhokdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklzaoczfhokdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaiaopbbbpklaaoczfhokdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaiaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WaoclfaYpQbfaXc:q:yjjbfRbbfhoxdkaiaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WaocwfaYpQbfaXc:q:yjjbfRbbfhoxekaiaopbbbpkl8Waoczfhokalc;abfhialcjefak0meaihlarao9Rc;Fb0mbkkdnaiak9pmbaici4hlinarao9RcK6miaCaifhXdndndndndnaAaico4fRbbalcoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpkbbxikaXaopbblaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkbbaoclfaYpQbfaKc:q:yjjbfRbbfhoxdkaXaopbbwaopbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkbbaocwfaYpQbfaKc:q:yjjbfRbbfhoxekaXaopbbbpkbbaoczfhokalcdfhlaiczfgiak6mbkkaoTmeaohAaOcefgOclSmdxbkkc9:hoxlkdnakTmbavcjdfaHfhiavaHfpbdbhYcbhXinaiavcj;cbfaXfglpblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLalakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEalamfpblbg3cep9Ta3aQp9op9Hp9rg3alaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfglaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaladfglaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaladfglaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaladfglaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaladfhiaXczfgXak6mbkkaHclfgHad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfgDae6mbkkcbc99arao9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk::seHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgwce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhDaicefgqarfhidnaeTmbcmcsawceSEhkcbhxcbhmcbhPcbhwcbhlindnaiaD9nmbc9:hoxikdndnaqRbbgoc;Ve0mbavc;abfalaocu7gscl4fcsGcitfgzydlhrazydbhzdnaocsGgHak9pmbavawasfcsGcdtfydbaxaHEhoaHThsdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkaxasfhxcdhHavawcdtfaoBdbawasfhwcehsalhOxdkdndnaHcsSmbaHc987aHamffcefhoxekaicefhoai8SbbgHcFeGhsdndnaHcu9mmbaohixekaicvfhiascFbGhscrhHdninao8SbbgOcFbGaHtasVhsaOcu9kmeaocefhoaHcrfgHc8J9hmbxdkkaocefhikasce4cbasceG9R7amfhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhHavawcdtfaoBdbcehsawcefhwalhOaohmxekdnaocpe0mbaxcefgHavawaDaocsGfRbbgocl49RcsGcdtfydbaocz6gzEhravawao9RcsGcdtfydbaHazfgAaocsGgHEhoaHThCdndnadcd9hmbabaPcetfgHax87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHaxBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfaxBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgOaxBdlaOarBdbavawazfgwcsGcdtfaoBdbalcefcsGhOawaCfhwaxhzaAaCfhxxekaxcbaiRbbgOEgzaoc;:eSgHfhraOcsGhCaOcl4hAdndnaOcs0mbarcefhoxekarhoavawaA9RcsGcdtfydbhrkdndnaCmbaocefhxxekaohxavawaO9RcsGcdtfydbhokdndnaHTmbaicefhHxekaicdfhHai8SbegscFeGhzdnascu9kmbaicofhXazcFbGhzcrhidninaH8SbbgscFbGaitazVhzascu9kmeaHcefhHaicrfgic8J9hmbkaXhHxekaHcefhHkazce4cbazceG9R7amfgmhzkdndnaAcsSmbaHhsxekaHcefhsaH8SbbgicFeGhrdnaicu9kmbaHcvfhXarcFbGhrcrhidninas8SbbgHcFbGaitarVhraHcu9kmeascefhsaicrfgic8J9hmbkaXhsxekascefhskarce4cbarceG9R7amfgmhrkdndnaCcsSmbashixekascefhias8SbbgocFeGhHdnaocu9kmbascvfhXaHcFbGhHcrhodninai8SbbgscFbGaotaHVhHascu9kmeaicefhiaocrfgoc8J9hmbkaXhixekaicefhikaHce4cbaHceG9R7amfgmhokdndnadcd9hmbabaPcetfgHaz87ebaHclfao87ebaHcdfar87ebxekabaPcdtfgHazBdbaHcwfaoBdbaHclfarBdbkcdhsavawcdtfazBdbavawcefgwcsGcdtfarBdbcihHavc;abfalcitfgXazBdlaXarBdbavawaOcz6aAcsSVfgwcsGcdtfaoBdbawaCTaCcsSVfhwalcefcsGhOkaqcefhqavc;abfaOcitfgOarBdlaOaoBdbavc;abfalasfcsGcitfgraoBdlarazBdbawcsGhwalaHfcsGhlaPcifgPae6mbkkcbc99aiaDSEhokavc;aef8Kjjjjbaok:flevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaic8Etc8F91aicd47avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:wPliuo97eue978Jjjjjbca9Rhiaec98Ghldndnadcl9hmbdnalTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalaeSmeaipxbbbbbbbbbbbbbbbbgqpklbaiabalcdtfgdaeciGglcdtgv;8qbbdnalTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDaqp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkadaiav;8qbbskdnalTmbcbhvabhdinadczfgxaxpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;Meawaqawamp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oaoarpmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgval6mbkkalaeSmbaiaeciGgvcitgdfcbcaad9R;8kbaiabalcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmbediwDqkzHOAKY8AEgwczp:Reczp:Sep;6egraDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eawczp:Sep;6egwp;Gearp;Gep;Kep;Legopxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegrpxb;:FSb;:FSb;:FSb;:FSararp;Meaoaop;Meawaqawamp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFFbbFFbbFFbbFFbbp9oaoawp;Meaqp;Keczp:Rep9qgoarawp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogrpmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oaoarpmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaDakp;Mearp;Keamp9oaqakp;Mearp;Keczp:Rep9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalaeSmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaDakp;Mearp;Keamp9oaqakp;Mearp;Keczp:Rep9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbheabhdinadadpbbbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepkbbadczfhdaeclfgeav6mbkkdnavalSmbaialciGgecdtgdVcbc;abad9R;8kbaiabavcdtfgvad;8qbbdnaeTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjFbbjFbbjFbbjFp9opxbbjZbbjZbbjZbbjZp:Uep;Mepklbkavaiad;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz:Dbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),s=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var i=WebAssembly.validate(t)?o(e):o(r),n,a=WebAssembly.instantiate(i,{}).then(function(b){n=b.instance,n.exports.__wasm_call_ctors()});function o(b){for(var E=new Uint8Array(b.length),I=0;I<b.length;++I){var C=b.charCodeAt(I);E[I]=C>96?C-97:C>64?C-39:C+4}for(var m=0,I=0;I<b.length;++I)E[m++]=E[I]<60?s[E[I]]:(E[I]-60)*64+E[++I];return E.buffer.slice(0,m)}function A(b,E,I,C,m,y,v){var B=b.exports.sbrk,Q=C+3&-4,S=B(Q*m),D=B(y.length),M=new Uint8Array(b.exports.memory.buffer);M.set(y,D);var L=E(S,C,m,D,y.length);if(L==0&&v&&v(S,Q,m),I.set(M.subarray(S,S+C*m)),B(S-B(0)),L!=0)throw new Error("Malformed buffer data: "+L)}var c={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=[],d=0;function u(b){var E={object:new Worker(b),pending:0,requests:{}};return E.object.onmessage=function(I){var C=I.data;E.pending-=C.count,E.requests[C.id][C.action](C.value),delete E.requests[C.id]},E}function g(b){for(var E="self.ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(i)+"]), {}).then(function(result) { result.instance.exports.__wasm_call_ctors(); return result.instance; });self.onmessage = "+f.name+";"+A.toString()+f.toString(),I=new Blob([E],{type:"text/javascript"}),C=URL.createObjectURL(I),m=l.length;m<b;++m)l[m]=u(C);for(var m=b;m<l.length;++m)l[m].object.postMessage({});l.length=b,URL.revokeObjectURL(C)}function p(b,E,I,C,m){for(var y=l[0],v=1;v<l.length;++v)l[v].pending<y.pending&&(y=l[v]);return new Promise(function(B,Q){var S=new Uint8Array(I),D=++d;y.pending+=b,y.requests[D]={resolve:B,reject:Q},y.object.postMessage({id:D,count:b,size:E,source:S,mode:C,filter:m},[S.buffer])})}function f(b){var E=b.data;if(!E.id)return self.close();self.ready.then(function(I){try{var C=new Uint8Array(E.count*E.size);A(I,I.exports[E.mode],C,E.count,E.size,E.source,I.exports[E.filter]),self.postMessage({id:E.id,count:E.count,action:"resolve",value:C},[C.buffer])}catch(m){self.postMessage({id:E.id,count:E.count,action:"reject",value:m})}})}return{ready:a,supported:!0,useWorkers:function(b){g(b)},decodeVertexBuffer:function(b,E,I,C,m){A(n,n.exports.meshopt_decodeVertexBuffer,b,E,I,C,n.exports[c[m]])},decodeIndexBuffer:function(b,E,I,C){A(n,n.exports.meshopt_decodeIndexBuffer,b,E,I,C)},decodeIndexSequence:function(b,E,I,C){A(n,n.exports.meshopt_decodeIndexSequence,b,E,I,C)},decodeGltfBuffer:function(b,E,I,C,m,y){A(n,n.exports[h[m]],b,E,I,C,n.exports[c[y]])},decodeGltfBufferAsync:function(b,E,I,C,m){return l.length>0?p(b,E,I,h[C],c[m]):a.then(function(){var y=new Uint8Array(b*E);return A(n,n.exports[h[C]],y,b,E,I,n.exports[c[m]]),y})}}}();const Fn=new WeakMap;class Ru extends dn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,s,i){const n=new ht(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,a=>{this.parse(a,t,i)},s,i)}parse(e,t,s=()=>{}){this.decodeDracoFile(e,t,null,null,Be,s).catch(s)}decodeDracoFile(e,t,s,i,n=ie,a=()=>{}){const o={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!s,vertexColorSpace:n};return this.decodeGeometry(e,o).then(t).catch(a)}decodeGeometry(e,t){const s=JSON.stringify(t);if(Fn.has(e)){const A=Fn.get(e);if(A.key===s)return A.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const n=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(n,a).then(A=>(i=A,new Promise((c,h)=>{i._callbacks[n]={resolve:c,reject:h},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(A=>this._createGeometry(A.geometry));return o.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),Fn.set(e,{key:s,promise:o}),o}_createGeometry(e){const t=new un;e.index&&t.setIndex(new $i(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const{name:i,array:n,itemSize:a,stride:o,vertexColorSpace:A}=e.attributes[s];let c;if(a===o)c=new $i(n,a);else{const h=new Nc(n,o);c=new Uc(h,a,0)}i==="color"&&(this._assignVertexColorSpace(c,A),c.normalized=!(n instanceof Float32Array)),t.setAttribute(i,c)}return t}_assignVertexColorSpace(e,t){if(t!==Be)return;const s=new he;for(let i=0,n=e.count;i<n;i++)s.fromBufferAttribute(e,i),Ys.colorSpaceToWorking(s,Be),e.setXYZ(i,s.r,s.g,s.b)}_loadLibrary(e,t){const s=new ht(this.manager);return s.setPath(this.decoderPath),s.setResponseType(t),s.setWithCredentials(this.withCredentials),new Promise((i,n)=>{s.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(s=>{const i=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const n=Du.toString(),a=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){const a=n.data;switch(a.type){case"decode":i._callbacks[a.id].resolve(a);break;case"error":i._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=t,s._taskLoad+=t,s})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function Du(){let r,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":r=o.decoderConfig,e=new Promise(function(h){r.onModuleLoaded=function(l){h({draco:l})},DracoDecoderModule(r)});break;case"decode":const A=o.buffer,c=o.taskConfig;e.then(h=>{const l=h.draco,d=new l.Decoder;try{const u=t(l,d,new Int8Array(A),c),g=u.attributes.map(p=>p.array.buffer);u.index&&g.push(u.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:u},g)}catch(u){console.error(u),self.postMessage({type:"error",id:o.id,error:u.message})}finally{l.destroy(d)}});break}};function t(a,o,A,c){const h=c.attributeIDs,l=c.attributeTypes;let d,u;const g=o.GetEncodedGeometryType(A);if(g===a.TRIANGULAR_MESH)d=new a.Mesh,u=o.DecodeArrayToMesh(A,A.byteLength,d);else if(g===a.POINT_CLOUD)d=new a.PointCloud,u=o.DecodeArrayToPointCloud(A,A.byteLength,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const p={index:null,attributes:[]};for(const f in h){const b=self[l[f]];let E,I;if(c.useUniqueIDs)I=h[f],E=o.GetAttributeByUniqueId(d,I);else{if(I=o.GetAttributeId(d,a[h[f]]),I===-1)continue;E=o.GetAttribute(d,I)}const C=i(a,o,d,f,b,E);f==="color"&&(C.vertexColorSpace=c.vertexColorSpace),p.attributes.push(C)}return g===a.TRIANGULAR_MESH&&(p.index=s(a,o,d)),a.destroy(d),p}function s(a,o,A){const h=A.num_faces()*3,l=h*4,d=a._malloc(l);o.GetTrianglesUInt32Array(A,l,d);const u=new Uint32Array(a.HEAPF32.buffer,d,h).slice();return a._free(d),{array:u,itemSize:1}}function i(a,o,A,c,h,l){const d=A.num_points(),u=l.num_components(),g=n(a,h),p=u*h.BYTES_PER_ELEMENT,f=Math.ceil(p/4)*4,b=f/h.BYTES_PER_ELEMENT,E=d*p,I=d*f,C=a._malloc(E);o.GetAttributeDataArrayForAllPoints(A,l,g,E,C);const m=new h(a.HEAPF32.buffer,C,E/h.BYTES_PER_ELEMENT);let y;if(p===f)y=m.slice();else{y=new h(I/h.BYTES_PER_ELEMENT);let v=0;for(let B=0,Q=m.length;B<Q;B++){for(let S=0;S<u;S++)y[v+S]=m[B*u+S];v+=b}}return a._free(C),{name:c,count:d,itemSize:u,array:y,stride:b}}function n(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}function no(r,e){if(e===Wh)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===Ka||e===Oc){let t=r.getIndex();if(t===null){const a=[],o=r.getAttribute("position");if(o!==void 0){for(let A=0;A<o.count;A++)a.push(A);r.setIndex(a),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const s=t.count-2,i=[];if(e===Ka)for(let a=1;a<=s;a++)i.push(t.getX(0)),i.push(t.getX(a)),i.push(t.getX(a+1));else for(let a=0;a<s;a++)a%2===0?(i.push(t.getX(a)),i.push(t.getX(a+1)),i.push(t.getX(a+2))):(i.push(t.getX(a+2)),i.push(t.getX(a+1)),i.push(t.getX(a)));i.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const n=r.clone();return n.setIndex(i),n.clearGroups(),n}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}class Tu extends dn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Lu(t)}),this.register(function(t){return new Gu(t)}),this.register(function(t){return new Vu(t)}),this.register(function(t){return new Ku(t)}),this.register(function(t){return new zu(t)}),this.register(function(t){return new Uu(t)}),this.register(function(t){return new Ou(t)}),this.register(function(t){return new Pu(t)}),this.register(function(t){return new Hu(t)}),this.register(function(t){return new ku(t)}),this.register(function(t){return new qu(t)}),this.register(function(t){return new Nu(t)}),this.register(function(t){return new $u(t)}),this.register(function(t){return new ju(t)}),this.register(function(t){return new Fu(t)}),this.register(function(t){return new Ju(t)}),this.register(function(t){return new Yu(t)})}load(e,t,s,i){const n=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const c=Vi.extractUrlBase(e);a=Vi.resolveURL(c,this.path)}else a=Vi.extractUrlBase(e);this.manager.itemStart(e);const o=function(c){i?i(c):console.error(c),n.manager.itemError(e),n.manager.itemEnd(e)},A=new ht(this.manager);A.setPath(this.path),A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(e,function(c){try{n.parse(c,a,function(h){t(h),n.manager.itemEnd(e)},o)}catch(h){o(h)}},s,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,i){let n;const a={},o={},A=new TextDecoder;if(typeof e=="string")n=JSON.parse(e);else if(e instanceof ArrayBuffer)if(A.decode(new Uint8Array(e,0,4))===dl){try{a[P.KHR_BINARY_GLTF]=new Wu(e)}catch(l){i&&i(l);return}n=JSON.parse(a[P.KHR_BINARY_GLTF].content)}else n=JSON.parse(A.decode(e));else n=e;if(n.asset===void 0||n.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new lg(n,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const l=this.pluginCallbacks[h](c);l.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[l.name]=l,a[l.name]=!0}if(n.extensionsUsed)for(let h=0;h<n.extensionsUsed.length;++h){const l=n.extensionsUsed[h],d=n.extensionsRequired||[];switch(l){case P.KHR_MATERIALS_UNLIT:a[l]=new _u;break;case P.KHR_DRACO_MESH_COMPRESSION:a[l]=new Xu(n,this.dracoLoader);break;case P.KHR_TEXTURE_TRANSFORM:a[l]=new Zu;break;case P.KHR_MESH_QUANTIZATION:a[l]=new eg;break;default:d.indexOf(l)>=0&&o[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(s,i)}parseAsync(e,t){const s=this;return new Promise(function(i,n){s.parse(e,t,i,n)})}}function Mu(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const P={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Fu{constructor(e){this.parser=e,this.name=P.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let s=0,i=t.length;s<i;s++){const n=t[s];n.extensions&&n.extensions[this.name]&&n.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let i=t.cache.get(s);if(i)return i;const n=t.json,A=((n.extensions&&n.extensions[this.name]||{}).lights||[])[e];let c;const h=new he(16777215);A.color!==void 0&&h.setRGB(A.color[0],A.color[1],A.color[2],ie);const l=A.range!==void 0?A.range:0;switch(A.type){case"directional":c=new Hc(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Pc(h),c.distance=l;break;case"spot":c=new Xh(h),c.distance=l,A.spot=A.spot||{},A.spot.innerConeAngle=A.spot.innerConeAngle!==void 0?A.spot.innerConeAngle:0,A.spot.outerConeAngle=A.spot.outerConeAngle!==void 0?A.spot.outerConeAngle:Math.PI/4,c.angle=A.spot.outerConeAngle,c.penumbra=1-A.spot.innerConeAngle/A.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+A.type)}return c.position.set(0,0,0),Ge(c,A),A.intensity!==void 0&&(c.intensity=A.intensity),c.name=t.createUniqueName(A.name||"light_"+e),i=Promise.resolve(c),t.cache.add(s,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,s=this.parser,n=s.json.nodes[e],o=(n.extensions&&n.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(A){return s._getNodeRef(t.cache,o,A)})}}class _u{constructor(){this.name=P.KHR_MATERIALS_UNLIT}getMaterialType(){return Pe}extendParams(e,t,s){const i=[];e.color=new he(1,1,1),e.opacity=1;const n=t.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){const a=n.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],ie),e.opacity=a[3]}n.baseColorTexture!==void 0&&i.push(s.assignTexture(e,"map",n.baseColorTexture,Be))}return Promise.all(i)}}class ku{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}}class Lu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&n.push(s.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&n.push(s.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(n.push(s.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(o,o)}return Promise.all(n)}}class Gu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_DISPERSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.dispersion=n.dispersion!==void 0?n.dispersion:0,Promise.resolve()}}class Nu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&n.push(s.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&n.push(s.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(n)}}class Uu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[];t.sheenColor=new he(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];if(a.sheenColorFactor!==void 0){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],ie)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&n.push(s.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Be)),a.sheenRoughnessTexture!==void 0&&n.push(s.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(n)}}class Ou{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&n.push(s.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(n)}}class Pu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&n.push(s.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new he().setRGB(o[0],o[1],o[2],ie),Promise.all(n)}}class Hu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}}class qu{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&n.push(s.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new he().setRGB(o[0],o[1],o[2],ie),a.specularColorTexture!==void 0&&n.push(s.assignTexture(t,"specularColorMap",a.specularColorTexture,Be)),Promise.all(n)}}class ju{constructor(e){this.parser=e,this.name=P.EXT_MATERIALS_BUMP}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&n.push(s.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(n)}}class $u{constructor(e){this.parser=e,this.name=P.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Ve}extendMaterialParams(e,t){const s=this.parser,i=s.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=[],a=i.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&n.push(s.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(n)}}class Vu{constructor(e){this.parser=e,this.name=P.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,s=t.json,i=s.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const n=i.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,n.source,a)}}class Ku{constructor(e){this.parser=e,this.name=P.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,s=this.parser,i=s.json,n=i.textures[e];if(!n.extensions||!n.extensions[t])return null;const a=n.extensions[t],o=i.images[a.source];let A=s.textureLoader;if(o.uri){const c=s.options.manager.getHandler(o.uri);c!==null&&(A=c)}return s.loadTextureImage(e,a.source,A)}}class zu{constructor(e){this.parser=e,this.name=P.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,s=this.parser,i=s.json,n=i.textures[e];if(!n.extensions||!n.extensions[t])return null;const a=n.extensions[t],o=i.images[a.source];let A=s.textureLoader;if(o.uri){const c=s.options.manager.getHandler(o.uri);c!==null&&(A=c)}return s.loadTextureImage(e,a.source,A)}}class Ju{constructor(e){this.name=P.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,s=t.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const i=s.extensions[this.name],n=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return n.then(function(o){const A=i.byteOffset||0,c=i.byteLength||0,h=i.count,l=i.byteStride,d=new Uint8Array(o,A,c);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(h,l,d,i.mode,i.filter).then(function(u){return u.buffer}):a.ready.then(function(){const u=new ArrayBuffer(h*l);return a.decodeGltfBuffer(new Uint8Array(u),h,l,d,i.mode,i.filter),u})})}else return null}}class Yu{constructor(e){this.name=P.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const i=t.meshes[s.mesh];for(const c of i.primitives)if(c.mode!==Se.TRIANGLES&&c.mode!==Se.TRIANGLE_STRIP&&c.mode!==Se.TRIANGLE_FAN&&c.mode!==void 0)return null;const a=s.extensions[this.name].attributes,o=[],A={};for(const c in a)o.push(this.parser.getDependency("accessor",a[c]).then(h=>(A[c]=h,A[c])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(c=>{const h=c.pop(),l=h.isGroup?h.children:[h],d=c[0].count,u=[];for(const g of l){const p=new pt,f=new k,b=new ss,E=new k(1,1,1),I=new Zh(g.geometry,g.material,d);for(let C=0;C<d;C++)A.TRANSLATION&&f.fromBufferAttribute(A.TRANSLATION,C),A.ROTATION&&b.fromBufferAttribute(A.ROTATION,C),A.SCALE&&E.fromBufferAttribute(A.SCALE,C),I.setMatrixAt(C,p.compose(f,b,E));for(const C in A)if(C==="_COLOR_0"){const m=A[C];I.instanceColor=new ed(m.array,m.itemSize,m.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&g.geometry.setAttribute(C,A[C]);hi.prototype.copy.call(I,g),this.parser.assignFinalMaterial(I),u.push(I)}return h.isGroup?(h.clear(),h.add(...u),h):u[0]}))}}const dl="glTF",bi=12,ao={JSON:1313821514,BIN:5130562};class Wu{constructor(e){this.name=P.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,bi),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==dl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-bi,n=new DataView(e,bi);let a=0;for(;a<i;){const o=n.getUint32(a,!0);a+=4;const A=n.getUint32(a,!0);if(a+=4,A===ao.JSON){const c=new Uint8Array(e,bi+a,o);this.content=s.decode(c)}else if(A===ao.BIN){const c=bi+a;this.body=e.slice(c,c+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Xu{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=P.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,i=this.dracoLoader,n=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},A={},c={};for(const h in a){const l=tr[h]||h.toLowerCase();o[l]=a[h]}for(const h in e.attributes){const l=tr[h]||h.toLowerCase();if(a[h]!==void 0){const d=s.accessors[e.attributes[h]],u=Ai[d.componentType];c[l]=u.name,A[l]=d.normalized===!0}}return t.getDependency("bufferView",n).then(function(h){return new Promise(function(l,d){i.decodeDracoFile(h,function(u){for(const g in u.attributes){const p=u.attributes[g],f=A[g];f!==void 0&&(p.normalized=f)}l(u)},o,c,ie,d)})})}}class Zu{constructor(){this.name=P.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class eg{constructor(){this.name=P.KHR_MESH_QUANTIZATION}}class ul extends gd{constructor(e,t,s,i){super(e,t,s,i)}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,i=this.valueSize,n=e*i*3+i;for(let a=0;a!==i;a++)t[a]=s[n+a];return t}interpolate_(e,t,s,i){const n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,A=o*2,c=o*3,h=i-t,l=(s-t)/h,d=l*l,u=d*l,g=e*c,p=g-c,f=-2*u+3*d,b=u-d,E=1-f,I=b-d+l;for(let C=0;C!==o;C++){const m=a[p+C+o],y=a[p+C+A]*h,v=a[g+C+o],B=a[g+C]*h;n[C]=E*m+I*y+f*v+b*B}return n}}const tg=new ss;class ig extends ul{interpolate_(e,t,s,i){const n=super.interpolate_(e,t,s,i);return tg.fromArray(n).normalize().toArray(n),n}}const Se={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ai={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ro={9728:ft,9729:se,9984:gn,9985:mr,9986:fr,9987:pi},oo={33071:Fe,33648:br,10497:_t},_n={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tr={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},it={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sg={CUBICSPLINE:void 0,LINEAR:jc,STEP:ud},kn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ng(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new Ws({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ir})),r.DefaultMaterial}function Et(r,e,t){for(const s in t.extensions)r[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=t.extensions[s])}function Ge(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ag(r,e,t){let s=!1,i=!1,n=!1;for(let c=0,h=e.length;c<h;c++){const l=e[c];if(l.POSITION!==void 0&&(s=!0),l.NORMAL!==void 0&&(i=!0),l.COLOR_0!==void 0&&(n=!0),s&&i&&n)break}if(!s&&!i&&!n)return Promise.resolve(r);const a=[],o=[],A=[];for(let c=0,h=e.length;c<h;c++){const l=e[c];if(s){const d=l.POSITION!==void 0?t.getDependency("accessor",l.POSITION):r.attributes.position;a.push(d)}if(i){const d=l.NORMAL!==void 0?t.getDependency("accessor",l.NORMAL):r.attributes.normal;o.push(d)}if(n){const d=l.COLOR_0!==void 0?t.getDependency("accessor",l.COLOR_0):r.attributes.color;A.push(d)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(A)]).then(function(c){const h=c[0],l=c[1],d=c[2];return s&&(r.morphAttributes.position=h),i&&(r.morphAttributes.normal=l),n&&(r.morphAttributes.color=d),r.morphTargetsRelative=!0,r})}function rg(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,s=e.weights.length;t<s;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let s=0,i=t.length;s<i;s++)r.morphTargetDictionary[t[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function og(r){let e;const t=r.extensions&&r.extensions[P.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Ln(t.attributes):e=r.indices+":"+Ln(r.attributes)+":"+r.mode,r.targets!==void 0)for(let s=0,i=r.targets.length;s<i;s++)e+=":"+Ln(r.targets[s]);return e}function Ln(r){let e="";const t=Object.keys(r).sort();for(let s=0,i=t.length;s<i;s++)e+=t[s]+":"+r[t[s]]+";";return e}function ir(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ag(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":r.search(/\.ktx2($|\?)/i)>0||r.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const cg=new pt;class lg{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Mu,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,i=-1,n=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(o)===!0;const A=o.match(/Version\/(\d+)/);i=s&&A?parseInt(A[1],10):-1,n=o.indexOf("Firefox")>-1,a=n?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&i<17||n&&a<98?this.textureLoader=new qc(this.options.manager):this.textureLoader=new td(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ht(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const s=this,i=this.json,n=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:s,userData:{}};return Et(n,o,i),Ge(o,i),Promise.all(s._invokeAll(function(A){return A.afterRoot&&A.afterRoot(o)})).then(function(){for(const A of o.scenes)A.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let i=0,n=t.length;i<n;i++){const a=t[i].joints;for(let o=0,A=a.length;o<A;o++)e[a[o]].isBone=!0}for(let i=0,n=e.length;i<n;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(s[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;const i=s.clone(),n=(a,o)=>{const A=this.associations.get(a);A!=null&&this.associations.set(o,A);for(const[c,h]of a.children.entries())n(h,o.children[c])};return n(s,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){const i=e(t[s]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const s=[];for(let i=0;i<t.length;i++){const n=e(t[i]);n&&s.push(n)}return s}getDependency(e,t){const s=e+":"+t;let i=this.cache.get(s);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(n){return n.loadNode&&n.loadNode(t)});break;case"mesh":i=this._invokeOne(function(n){return n.loadMesh&&n.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(n){return n.loadBufferView&&n.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(n){return n.loadMaterial&&n.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(n){return n.loadTexture&&n.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(n){return n.loadAnimation&&n.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(s,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const s=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(n,a){return s.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[P.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(n,a){s.load(Vi.resolveURL(t.uri,i.path),n,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(s){const i=t.byteLength||0,n=t.byteOffset||0;return s.slice(n,n+i)})}loadAccessor(e){const t=this,s=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=_n[i.type],o=Ai[i.componentType],A=i.normalized===!0,c=new o(i.count*a);return Promise.resolve(new $i(c,a,A))}const n=[];return i.bufferView!==void 0?n.push(this.getDependency("bufferView",i.bufferView)):n.push(null),i.sparse!==void 0&&(n.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),n.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(n).then(function(a){const o=a[0],A=_n[i.type],c=Ai[i.componentType],h=c.BYTES_PER_ELEMENT,l=h*A,d=i.byteOffset||0,u=i.bufferView!==void 0?s.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let p,f;if(u&&u!==l){const b=Math.floor(d/u),E="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+b+":"+i.count;let I=t.cache.get(E);I||(p=new c(o,b*u,i.count*u/h),I=new Nc(p,u/h),t.cache.add(E,I)),f=new Uc(I,A,d%u/h,g)}else o===null?p=new c(i.count*A):p=new c(o,d,i.count*A),f=new $i(p,A,g);if(i.sparse!==void 0){const b=_n.SCALAR,E=Ai[i.sparse.indices.componentType],I=i.sparse.indices.byteOffset||0,C=i.sparse.values.byteOffset||0,m=new E(a[1],I,i.sparse.count*b),y=new c(a[2],C,i.sparse.count*A);o!==null&&(f=new $i(f.array.slice(),f.itemSize,f.normalized)),f.normalized=!1;for(let v=0,B=m.length;v<B;v++){const Q=m[v];if(f.setX(Q,y[v*A]),A>=2&&f.setY(Q,y[v*A+1]),A>=3&&f.setZ(Q,y[v*A+2]),A>=4&&f.setW(Q,y[v*A+3]),A>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}f.normalized=g}return f})}loadTexture(e){const t=this.json,s=this.options,n=t.textures[e].source,a=t.images[n];let o=this.textureLoader;if(a.uri){const A=s.manager.getHandler(a.uri);A!==null&&(o=A)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,s){const i=this,n=this.json,a=n.textures[e],o=n.images[t],A=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[A])return this.textureCache[A];const c=this.loadImageSource(t,s).then(function(h){h.flipY=!1,h.name=a.name||o.name||"",h.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(h.name=o.uri);const d=(n.samplers||{})[a.sampler]||{};return h.magFilter=ro[d.magFilter]||se,h.minFilter=ro[d.minFilter]||pi,h.wrapS=oo[d.wrapS]||_t,h.wrapT=oo[d.wrapT]||_t,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==ft&&h.minFilter!==se,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[A]=c,c}loadImageSource(e,t){const s=this,i=this.json,n=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const a=i.images[e],o=self.URL||self.webkitURL;let A=a.uri||"",c=!1;if(a.bufferView!==void 0)A=s.getDependency("bufferView",a.bufferView).then(function(l){c=!0;const d=new Blob([l],{type:a.mimeType});return A=o.createObjectURL(d),A});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(A).then(function(l){return new Promise(function(d,u){let g=d;t.isImageBitmapLoader===!0&&(g=function(p){const f=new He(p);f.needsUpdate=!0,d(f)}),t.load(Vi.resolveURL(l,n.path),g,void 0,u)})}).then(function(l){return c===!0&&o.revokeObjectURL(A),Ge(l,a),l.userData.mimeType=a.mimeType||Ag(a.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",A),l});return this.sourceCache[e]=h,h}assignTexture(e,t,s,i){const n=this;return this.getDependency("texture",s.index).then(function(a){if(!a)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(a=a.clone(),a.channel=s.texCoord),n.extensions[P.KHR_TEXTURE_TRANSFORM]){const o=s.extensions!==void 0?s.extensions[P.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const A=n.associations.get(a);a=n.extensions[P.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),n.associations.set(a,A)}}return i!==void 0&&(a.colorSpace=i),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const i=t.attributes.tangent===void 0,n=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+s.uuid;let A=this.cache.get(o);A||(A=new id,Gs.prototype.copy.call(A,s),A.color.copy(s.color),A.map=s.map,A.sizeAttenuation=!1,this.cache.add(o,A)),s=A}else if(e.isLine){const o="LineBasicMaterial:"+s.uuid;let A=this.cache.get(o);A||(A=new sd,Gs.prototype.copy.call(A,s),A.color.copy(s.color),A.map=s.map,this.cache.add(o,A)),s=A}if(i||n||a){let o="ClonedMaterial:"+s.uuid+":";i&&(o+="derivative-tangents:"),n&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let A=this.cache.get(o);A||(A=s.clone(),n&&(A.vertexColors=!0),a&&(A.flatShading=!0),i&&(A.normalScale&&(A.normalScale.y*=-1),A.clearcoatNormalScale&&(A.clearcoatNormalScale.y*=-1)),this.cache.add(o,A),this.associations.set(A,this.associations.get(s))),s=A}e.material=s}getMaterialType(){return Ws}loadMaterial(e){const t=this,s=this.json,i=this.extensions,n=s.materials[e];let a;const o={},A=n.extensions||{},c=[];if(A[P.KHR_MATERIALS_UNLIT]){const l=i[P.KHR_MATERIALS_UNLIT];a=l.getMaterialType(),c.push(l.extendParams(o,n,t))}else{const l=n.pbrMetallicRoughness||{};if(o.color=new he(1,1,1),o.opacity=1,Array.isArray(l.baseColorFactor)){const d=l.baseColorFactor;o.color.setRGB(d[0],d[1],d[2],ie),o.opacity=d[3]}l.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",l.baseColorTexture,Be)),o.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,o.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",l.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",l.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,o)})))}n.doubleSided===!0&&(o.side=dt);const h=n.alphaMode||kn.OPAQUE;if(h===kn.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===kn.MASK&&(o.alphaTest=n.alphaCutoff!==void 0?n.alphaCutoff:.5)),n.normalTexture!==void 0&&a!==Pe&&(c.push(t.assignTexture(o,"normalMap",n.normalTexture)),o.normalScale=new De(1,1),n.normalTexture.scale!==void 0)){const l=n.normalTexture.scale;o.normalScale.set(l,l)}if(n.occlusionTexture!==void 0&&a!==Pe&&(c.push(t.assignTexture(o,"aoMap",n.occlusionTexture)),n.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=n.occlusionTexture.strength)),n.emissiveFactor!==void 0&&a!==Pe){const l=n.emissiveFactor;o.emissive=new he().setRGB(l[0],l[1],l[2],ie)}return n.emissiveTexture!==void 0&&a!==Pe&&c.push(t.assignTexture(o,"emissiveMap",n.emissiveTexture,Be)),Promise.all(c).then(function(){const l=new a(o);return n.name&&(l.name=n.name),Ge(l,n),t.associations.set(l,{materials:e}),n.extensions&&Et(i,l,n),l})}createUniqueName(e){const t=nd.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,s=this.extensions,i=this.primitiveCache;function n(o){return s[P.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(A){return Ao(A,o,t)})}const a=[];for(let o=0,A=e.length;o<A;o++){const c=e[o],h=og(c),l=i[h];if(l)a.push(l.promise);else{let d;c.extensions&&c.extensions[P.KHR_DRACO_MESH_COMPRESSION]?d=n(c):d=Ao(new un,c,t),i[h]={primitive:c,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,s=this.json,i=this.extensions,n=s.meshes[e],a=n.primitives,o=[];for(let A=0,c=a.length;A<c;A++){const h=a[A].material===void 0?ng(this.cache):this.getDependency("material",a[A].material);o.push(h)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(A){const c=A.slice(0,A.length-1),h=A[A.length-1],l=[];for(let u=0,g=h.length;u<g;u++){const p=h[u],f=a[u];let b;const E=c[u];if(f.mode===Se.TRIANGLES||f.mode===Se.TRIANGLE_STRIP||f.mode===Se.TRIANGLE_FAN||f.mode===void 0)b=n.isSkinnedMesh===!0?new ad(p,E):new ue(p,E),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),f.mode===Se.TRIANGLE_STRIP?b.geometry=no(b.geometry,Oc):f.mode===Se.TRIANGLE_FAN&&(b.geometry=no(b.geometry,Ka));else if(f.mode===Se.LINES)b=new rd(p,E);else if(f.mode===Se.LINE_STRIP)b=new za(p,E);else if(f.mode===Se.LINE_LOOP)b=new od(p,E);else if(f.mode===Se.POINTS)b=new Ad(p,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);Object.keys(b.geometry.morphAttributes).length>0&&rg(b,n),b.name=t.createUniqueName(n.name||"mesh_"+e),Ge(b,n),f.extensions&&Et(i,b,f),t.assignFinalMaterial(b),l.push(b)}for(let u=0,g=l.length;u<g;u++)t.associations.set(l[u],{meshes:e,primitives:u});if(l.length===1)return n.extensions&&Et(i,l[0],n),l[0];const d=new Ns;n.extensions&&Et(i,d,n),t.associations.set(d,{meshes:e});for(let u=0,g=l.length;u<g;u++)d.add(l[u]);return d})}loadCamera(e){let t;const s=this.json.cameras[e],i=s[s.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?t=new Xs(cd.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):s.type==="orthographic"&&(t=new pn(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),Ge(t,s),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],s=[];for(let i=0,n=t.joints.length;i<n;i++)s.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(i){const n=i.pop(),a=i,o=[],A=[];for(let c=0,h=a.length;c<h;c++){const l=a[c];if(l){o.push(l);const d=new pt;n!==null&&d.fromArray(n.array,c*16),A.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new ld(o,A)})}loadAnimation(e){const t=this.json,s=this,i=t.animations[e],n=i.name?i.name:"animation_"+e,a=[],o=[],A=[],c=[],h=[];for(let l=0,d=i.channels.length;l<d;l++){const u=i.channels[l],g=i.samplers[u.sampler],p=u.target,f=p.node,b=i.parameters!==void 0?i.parameters[g.input]:g.input,E=i.parameters!==void 0?i.parameters[g.output]:g.output;p.node!==void 0&&(a.push(this.getDependency("node",f)),o.push(this.getDependency("accessor",b)),A.push(this.getDependency("accessor",E)),c.push(g),h.push(p))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(A),Promise.all(c),Promise.all(h)]).then(function(l){const d=l[0],u=l[1],g=l[2],p=l[3],f=l[4],b=[];for(let I=0,C=d.length;I<C;I++){const m=d[I],y=u[I],v=g[I],B=p[I],Q=f[I];if(m===void 0)continue;m.updateMatrix&&m.updateMatrix();const S=s._createAnimationTracks(m,y,v,B,Q);if(S)for(let D=0;D<S.length;D++)b.push(S[D])}const E=new hd(n,void 0,b);return Ge(E,i),E})}createNodeMesh(e){const t=this.json,s=this,i=t.nodes[e];return i.mesh===void 0?null:s.getDependency("mesh",i.mesh).then(function(n){const a=s._getNodeRef(s.meshCache,i.mesh,n);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let A=0,c=i.weights.length;A<c;A++)o.morphTargetInfluences[A]=i.weights[A]}),a})}loadNode(e){const t=this.json,s=this,i=t.nodes[e],n=s._loadNodeShallow(e),a=[],o=i.children||[];for(let c=0,h=o.length;c<h;c++)a.push(s.getDependency("node",o[c]));const A=i.skin===void 0?Promise.resolve(null):s.getDependency("skin",i.skin);return Promise.all([n,Promise.all(a),A]).then(function(c){const h=c[0],l=c[1],d=c[2];d!==null&&h.traverse(function(u){u.isSkinnedMesh&&u.bind(d,cg)});for(let u=0,g=l.length;u<g;u++)h.add(l[u]);return h})}_loadNodeShallow(e){const t=this.json,s=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const n=t.nodes[e],a=n.name?i.createUniqueName(n.name):"",o=[],A=i._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return A&&o.push(A),n.camera!==void 0&&o.push(i.getDependency("camera",n.camera).then(function(c){return i._getNodeRef(i.cameraCache,n.camera,c)})),i._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),this.nodeCache[e]=Promise.all(o).then(function(c){let h;if(n.isBone===!0?h=new dd:c.length>1?h=new Ns:c.length===1?h=c[0]:h=new hi,h!==c[0])for(let l=0,d=c.length;l<d;l++)h.add(c[l]);if(n.name&&(h.userData.name=n.name,h.name=a),Ge(h,n),n.extensions&&Et(s,h,n),n.matrix!==void 0){const l=new pt;l.fromArray(n.matrix),h.applyMatrix4(l)}else n.translation!==void 0&&h.position.fromArray(n.translation),n.rotation!==void 0&&h.quaternion.fromArray(n.rotation),n.scale!==void 0&&h.scale.fromArray(n.scale);if(!i.associations.has(h))i.associations.set(h,{});else if(n.mesh!==void 0&&i.meshCache.refs[n.mesh]>1){const l=i.associations.get(h);i.associations.set(h,{...l})}return i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,s=this.json.scenes[e],i=this,n=new Ns;s.name&&(n.name=i.createUniqueName(s.name)),Ge(n,s),s.extensions&&Et(t,n,s);const a=s.nodes||[],o=[];for(let A=0,c=a.length;A<c;A++)o.push(i.getDependency("node",a[A]));return Promise.all(o).then(function(A){for(let h=0,l=A.length;h<l;h++)n.add(A[h]);const c=h=>{const l=new Map;for(const[d,u]of i.associations)(d instanceof Gs||d instanceof He)&&l.set(d,u);return h.traverse(d=>{const u=i.associations.get(d);u!=null&&l.set(d,u)}),l};return i.associations=c(n),n})}_createAnimationTracks(e,t,s,i,n){const a=[],o=e.name?e.name:e.uuid,A=[];it[n.path]===it.weights?e.traverse(function(d){d.morphTargetInfluences&&A.push(d.name?d.name:d.uuid)}):A.push(o);let c;switch(it[n.path]){case it.weights:c=Lr;break;case it.rotation:c=Gr;break;case it.translation:case it.scale:c=kr;break;default:switch(s.itemSize){case 1:c=Lr;break;case 2:case 3:default:c=kr;break}break}const h=i.interpolation!==void 0?sg[i.interpolation]:jc,l=this._getArrayFromAccessor(s);for(let d=0,u=A.length;d<u;d++){const g=new c(A[d]+"."+it[n.path],t.array,l,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const s=ir(t.constructor),i=new Float32Array(t.length);for(let n=0,a=t.length;n<a;n++)i[n]=t[n]*s;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(s){const i=this instanceof Gr?ig:ul;return new i(this.times,this.values,this.getValueSize()/3,s)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function hg(r,e,t){const s=e.attributes,i=new Dt;if(s.POSITION!==void 0){const o=t.json.accessors[s.POSITION],A=o.min,c=o.max;if(A!==void 0&&c!==void 0){if(i.set(new k(A[0],A[1],A[2]),new k(c[0],c[1],c[2])),o.normalized){const h=ir(Ai[o.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const n=e.targets;if(n!==void 0){const o=new k,A=new k;for(let c=0,h=n.length;c<h;c++){const l=n[c];if(l.POSITION!==void 0){const d=t.json.accessors[l.POSITION],u=d.min,g=d.max;if(u!==void 0&&g!==void 0){if(A.setX(Math.max(Math.abs(u[0]),Math.abs(g[0]))),A.setY(Math.max(Math.abs(u[1]),Math.abs(g[1]))),A.setZ(Math.max(Math.abs(u[2]),Math.abs(g[2]))),d.normalized){const p=ir(Ai[d.componentType]);A.multiplyScalar(p)}o.max(A)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}r.boundingBox=i;const a=new Er;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=a}function Ao(r,e,t){const s=e.attributes,i=[];function n(a,o){return t.getDependency("accessor",a).then(function(A){r.setAttribute(o,A)})}for(const a in s){const o=tr[a]||a.toLowerCase();o in r.attributes||i.push(n(s[a],o))}if(e.indices!==void 0&&!r.index){const a=t.getDependency("accessor",e.indices).then(function(o){r.setIndex(o)});i.push(a)}return Ys.workingColorSpace!==ie&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ys.workingColorSpace}" not supported.`),Ge(r,e),hg(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?ag(r,e.targets,t):r})}class dg{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0,this.workerCreator=null}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const s=this.workersResolve[e];if(s&&s(t),this.queue.length){const{resolve:i,msg:n,transfer:a}=this.queue.shift();this.workersResolve[e]=i,this.workers[e].postMessage(n,a)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(s=>{const i=this._getIdleWorker();i!==-1?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=s,this.workers[i].postMessage(e,t)):this.queue.push({resolve:s,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const ug=0,co=2,gg=1,lo=2,pg=0,fg=1,mg=10,bg=0,gl=9,pl=15,fl=16,ml=22,bl=37,Il=43,El=76,Cl=83,Bl=97,yl=100,wl=103,Ql=109,vl=122,Sl=123,xl=131,Rl=132,Dl=133,Tl=134,Ml=137,Fl=138,_l=139,kl=140,Ll=141,Gl=142,Nl=145,Ul=146,Ol=148,Pl=152,Hl=157,ql=158,jl=165,$l=166,Vl=1000054e3,Kl=1000054001,zl=1000054004,Jl=1000054005,vr=1000066e3,Yl=1000066004;class Ii{constructor(e,t,s,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,s),this._littleEndian=i,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){const s=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==t&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+s,i)}}const fe=[171,75,84,88,32,50,48,187,13,10,26,10];function ho(r){return new TextDecoder().decode(r)}function Ig(r){const e=new Uint8Array(r.buffer,r.byteOffset,fe.length);if(e[0]!==fe[0]||e[1]!==fe[1]||e[2]!==fe[2]||e[3]!==fe[3]||e[4]!==fe[4]||e[5]!==fe[5]||e[6]!==fe[6]||e[7]!==fe[7]||e[8]!==fe[8]||e[9]!==fe[9]||e[10]!==fe[10]||e[11]!==fe[11])throw new Error("Missing KTX 2.0 identifier.");const t={vkFormat:0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,levelCount:0,supercompressionScheme:0,levels:[],dataFormatDescriptor:[{vendorId:0,descriptorType:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null},s=17*Uint32Array.BYTES_PER_ELEMENT,i=new Ii(r,fe.length,s,!0);t.vkFormat=i._nextUint32(),t.typeSize=i._nextUint32(),t.pixelWidth=i._nextUint32(),t.pixelHeight=i._nextUint32(),t.pixelDepth=i._nextUint32(),t.layerCount=i._nextUint32(),t.faceCount=i._nextUint32(),t.levelCount=i._nextUint32(),t.supercompressionScheme=i._nextUint32();const n=i._nextUint32(),a=i._nextUint32(),o=i._nextUint32(),A=i._nextUint32(),c=i._nextUint64(),h=i._nextUint64(),l=3*Math.max(t.levelCount,1)*8,d=new Ii(r,fe.length+s,l,!0);for(let G=0,N=Math.max(t.levelCount,1);G<N;G++)t.levels.push({levelData:new Uint8Array(r.buffer,r.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const u=new Ii(r,n,a,!0);u._skip(4);const g=u._nextUint16(),p=u._nextUint16(),f=u._nextUint16(),b=u._nextUint16(),E={vendorId:g,descriptorType:p,versionNumber:f,colorModel:u._nextUint8(),colorPrimaries:u._nextUint8(),transferFunction:u._nextUint8(),flags:u._nextUint8(),texelBlockDimension:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],bytesPlane:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],samples:[]},I=(b/4-6)/4;for(let G=0;G<I;G++){const N={bitOffset:u._nextUint16(),bitLength:u._nextUint8(),channelType:u._nextUint8(),samplePosition:[u._nextUint8(),u._nextUint8(),u._nextUint8(),u._nextUint8()],sampleLower:Number.NEGATIVE_INFINITY,sampleUpper:Number.POSITIVE_INFINITY};64&N.channelType?(N.sampleLower=u._nextInt32(),N.sampleUpper=u._nextInt32()):(N.sampleLower=u._nextUint32(),N.sampleUpper=u._nextUint32()),E.samples[G]=N}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(E);const C=new Ii(r,o,A,!0);for(;C._offset<A;){const G=C._nextUint32(),N=C._scan(G),$=ho(N);if(t.keyValue[$]=C._nextUint8Array(G-N.byteLength-1),$.match(/^ktx/i)){const ne=ho(t.keyValue[$]);t.keyValue[$]=ne.substring(0,ne.lastIndexOf("\0"))}C._skip(G%4?4-G%4:0)}if(h<=0)return t;const m=new Ii(r,c,h,!0),y=m._nextUint16(),v=m._nextUint16(),B=m._nextUint32(),Q=m._nextUint32(),S=m._nextUint32(),D=m._nextUint32(),M=[];for(let G=0,N=Math.max(t.levelCount,1);G<N;G++)M.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const L=c+m._offset,R=L+B,U=R+Q,T=U+S,H=new Uint8Array(r.buffer,r.byteOffset+L,B),X=new Uint8Array(r.buffer,r.byteOffset+R,Q),j=new Uint8Array(r.buffer,r.byteOffset+U,S),J=new Uint8Array(r.buffer,r.byteOffset+T,D);return t.globalData={endpointCount:y,selectorCount:v,imageDescs:M,endpointsData:H,selectorsData:X,tablesData:j,extendedData:J},t}let Gn,et,sr;const Nn={env:{emscripten_notify_memory_growth:function(r){sr=new Uint8Array(et.exports.memory.buffer)}}};class Eg{init(){return Gn||(Gn=typeof fetch<"u"?fetch("data:application/wasm;base64,"+uo).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Nn)).then(this._init):WebAssembly.instantiate(Buffer.from(uo,"base64"),Nn).then(this._init),Gn)}_init(e){et=e.instance,Nn.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!et)throw new Error("ZSTDDecoder: Await .init() before decoding.");const s=e.byteLength,i=et.exports.malloc(s);sr.set(e,i),t=t||Number(et.exports.ZSTD_findDecompressedSize(i,s));const n=et.exports.malloc(t),a=et.exports.ZSTD_decompress(n,t,i,s),o=sr.slice(n,n+a);return et.exports.free(i),et.exports.free(n),o}}const uo="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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",Cg="display-p3",Bg="display-p3-linear";({...Ys.spaces[Be]});const Un=new WeakMap;let On=0,Pn;class xe extends dn{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new dg,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return console.warn('KTX2Loader: "detectSupportAsync()" has been deprecated. Use "detectSupport()" and "await renderer.init();" when creating the renderer.'),await e.init(),this.detectSupport(e)}detectSupport(e){return e.isWebGPURenderer===!0?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),astcHDRSupported:!1,etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-s3tc"),bptcSupported:e.hasFeature("texture-compression-bc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:(this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),astcHDRSupported:e.extensions.has("WEBGL_compressed_texture_astc")&&e.extensions.get("WEBGL_compressed_texture_astc").getSupportedProfiles().includes("hdr"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},typeof navigator<"u"&&navigator.platform.indexOf("Linux")>=0&&navigator.userAgent.indexOf("Firefox")>=0&&this.workerConfig.astcSupported&&this.workerConfig.etc2Supported&&this.workerConfig.bptcSupported&&this.workerConfig.dxtSupported&&(this.workerConfig.astcSupported=!1,this.workerConfig.etc2Supported=!1)),this}init(){if(!this.transcoderPending){const e=new ht(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),s=new ht(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const i=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,i]).then(([n,a])=>{const o=xe.BasisWorker.toString(),A=["/* constants */","let _EngineFormat = "+JSON.stringify(xe.EngineFormat),"let _EngineType = "+JSON.stringify(xe.EngineType),"let _TranscoderFormat = "+JSON.stringify(xe.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(xe.BasisFormat),"/* basis_transcoder.js */",n,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([A])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),h=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:h},[h]),c})}),On>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),On++}return this.transcoderPending}load(e,t,s,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const n=new ht(this.manager);n.setPath(this.path),n.setCrossOrigin(this.crossOrigin),n.setWithCredentials(this.withCredentials),n.setRequestHeader(this.requestHeader),n.setResponseType("arraybuffer"),n.load(e,a=>{this.parse(a,t,i)},s,i)}parse(e,t,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");if(Un.has(e))return Un.get(e).promise.then(t).catch(s);this._createTexture(e).then(i=>t?t(i):null).catch(s)}_createTextureFrom(e,t){const{type:s,error:i,data:{faces:n,width:a,height:o,format:A,type:c,dfdFlags:h}}=e;if(s==="error")return Promise.reject(i);let l;if(t.faceCount===6)l=new pd(n,A,c);else{const d=n[0].mipmaps;l=t.layerCount>1?new fd(d,a,o,t.layerCount,A,c):new $c(d,a,o,A,c)}return l.minFilter=n[0].mipmaps.length===1?se:pi,l.magFilter=se,l.generateMipmaps=!1,l.needsUpdate=!0,l.colorSpace=Wl(t),l.premultiplyAlpha=!!(h&gg),l}async _createTexture(e,t={}){const s=Ig(new Uint8Array(e)),i=s.vkFormat===vr&&s.dataFormatDescriptor[0].colorModel===167;if(!(s.vkFormat===bg||i&&!this.workerConfig.astcHDRSupported))return wg(s);const a=t,o=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:a},[e])).then(A=>this._createTextureFrom(A.data,s));return Un.set(e,{promise:o}),o}dispose(){this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),On--}}xe.BasisFormat={ETC1S:0,UASTC:1,UASTC_HDR:2};xe.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16,BC6H:22,RGB_HALF:24,RGBA_HALF:25};xe.EngineFormat={RGBAFormat:Re,RGBA_ASTC_4x4_Format:Us,RGB_BPTC_UNSIGNED_Format:Qd,RGBA_BPTC_Format:Wa,RGBA_ETC2_EAC_Format:Kc,RGBA_PVRTC_4BPPV1_Format:Ya,RGBA_S3TC_DXT5_Format:wd,RGB_ETC1_Format:yd,RGB_ETC2_Format:Vc,RGB_PVRTC_4BPPV1_Format:Bd,RGBA_S3TC_DXT1_Format:Xa};xe.EngineType={UnsignedByteType:q,HalfFloatType:de,FloatType:ke};xe.BasisWorker=function(){let r,e,t;const s=_EngineFormat,i=_EngineType,n=_TranscoderFormat,a=_BasisFormat;self.addEventListener("message",function(g){const p=g.data;switch(p.type){case"init":r=p.config,o(p.transcoderBinary);break;case"transcode":e.then(()=>{try{const{faces:f,buffers:b,width:E,height:I,hasAlpha:C,format:m,type:y,dfdFlags:v}=A(p.buffer);self.postMessage({type:"transcode",id:p.id,data:{faces:f,width:E,height:I,hasAlpha:C,format:m,type:y,dfdFlags:v}},b)}catch(f){console.error(f),self.postMessage({type:"error",id:p.id,error:f.message})}});break}});function o(g){e=new Promise(p=>{t={wasmBinary:g,onRuntimeInitialized:p},BASIS(t)}).then(()=>{t.initializeBasis(),t.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function A(g){const p=new t.KTX2File(new Uint8Array(g));function f(){p.close(),p.delete()}if(!p.isValid())throw f(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let b;if(p.isUASTC())b=a.UASTC;else if(p.isETC1S())b=a.ETC1S;else if(p.isHDR())b=a.UASTC_HDR;else throw new Error("THREE.KTX2Loader: Unknown Basis encoding");const E=p.getWidth(),I=p.getHeight(),C=p.getLayers()||1,m=p.getLevels(),y=p.getFaces(),v=p.getHasAlpha(),B=p.getDFDFlags(),{transcoderFormat:Q,engineFormat:S,engineType:D}=l(b,E,I,v);if(!E||!I||!m)throw f(),new Error("THREE.KTX2Loader:	Invalid texture");if(!p.startTranscoding())throw f(),new Error("THREE.KTX2Loader: .startTranscoding failed");const M=[],L=[];for(let R=0;R<y;R++){const U=[];for(let T=0;T<m;T++){const H=[];let X,j;for(let G=0;G<C;G++){const N=p.getImageLevelInfo(T,G,R);R===0&&T===0&&G===0&&(N.origWidth%4!==0||N.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),m>1?(X=N.origWidth,j=N.origHeight):(X=N.width,j=N.height);let $=new Uint8Array(p.getImageTranscodedSizeInBytes(T,G,0,Q));const ne=p.transcodeImage($,T,G,R,Q,0,-1,-1);if(D===i.HalfFloatType&&($=new Uint16Array($.buffer,$.byteOffset,$.byteLength/Uint16Array.BYTES_PER_ELEMENT)),!ne)throw f(),new Error("THREE.KTX2Loader: .transcodeImage failed.");H.push($)}const J=u(H);U.push({data:J,width:X,height:j}),L.push(J.buffer)}M.push({mipmaps:U,width:E,height:I,format:S,type:D})}return f(),{faces:M,buffers:L,width:E,height:I,hasAlpha:v,dfdFlags:B,format:S,type:D}}const c=[{if:"astcSupported",basisFormat:[a.UASTC],transcoderFormat:[n.ASTC_4x4,n.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],engineType:[i.UnsignedByteType],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.BC7_M5,n.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],engineType:[i.UnsignedByteType],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.BC1,n.BC3],engineFormat:[s.RGBA_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],engineType:[i.UnsignedByteType],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.ETC1,n.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],engineType:[i.UnsignedByteType],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.ETC1],engineFormat:[s.RGB_ETC1_Format],engineType:[i.UnsignedByteType],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.PVRTC1_4_RGB,n.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],engineType:[i.UnsignedByteType],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0},{if:"bptcSupported",basisFormat:[a.UASTC_HDR],transcoderFormat:[n.BC6H],engineFormat:[s.RGB_BPTC_UNSIGNED_Format],engineType:[i.HalfFloatType],priorityHDR:1,needsPowerOfTwo:!1},{basisFormat:[a.ETC1S,a.UASTC],transcoderFormat:[n.RGBA32,n.RGBA32],engineFormat:[s.RGBAFormat,s.RGBAFormat],engineType:[i.UnsignedByteType,i.UnsignedByteType],priorityETC1S:100,priorityUASTC:100,needsPowerOfTwo:!1},{basisFormat:[a.UASTC_HDR],transcoderFormat:[n.RGBA_HALF],engineFormat:[s.RGBAFormat],engineType:[i.HalfFloatType],priorityHDR:100,needsPowerOfTwo:!1}],h={[a.ETC1S]:c.filter(g=>g.basisFormat.includes(a.ETC1S)).sort((g,p)=>g.priorityETC1S-p.priorityETC1S),[a.UASTC]:c.filter(g=>g.basisFormat.includes(a.UASTC)).sort((g,p)=>g.priorityUASTC-p.priorityUASTC),[a.UASTC_HDR]:c.filter(g=>g.basisFormat.includes(a.UASTC_HDR)).sort((g,p)=>g.priorityHDR-p.priorityHDR)};function l(g,p,f,b){const E=h[g];for(let I=0;I<E.length;I++){const C=E[I];if(C.if&&!r[C.if]||!C.basisFormat.includes(g)||b&&C.transcoderFormat.length<2||C.needsPowerOfTwo&&!(d(p)&&d(f)))continue;const m=C.transcoderFormat[b?1:0],y=C.engineFormat[b?1:0],v=C.engineType[0];return{transcoderFormat:m,engineFormat:y,engineType:v}}throw new Error("THREE.KTX2Loader: Failed to identify transcoding target.")}function d(g){return g<=2?!0:(g&g-1)===0&&g!==0}function u(g){if(g.length===1)return g[0];let p=0;for(let E=0;E<g.length;E++){const I=g[E];p+=I.byteLength}const f=new Uint8Array(p);let b=0;for(let E=0;E<g.length;E++){const I=g[E];f.set(I,b),b+=I.byteLength}return f}};const yg=new Set([Re,Za,Ni,Gi]),Hn={[Ql]:Re,[wl]:Ni,[yl]:Gi,[Bl]:Re,[Cl]:Ni,[El]:Gi,[Il]:Re,[bl]:Re,[ml]:Ni,[fl]:Ni,[pl]:Gi,[gl]:Gi,[Sl]:Za,[vl]:Za,[Pl]:Kc,[Ol]:Vc,[vr]:Us,[ql]:Us,[Hl]:Us,[Yl]:vn,[$l]:vn,[jl]:vn,[Tl]:Xa,[Dl]:Xa,[Rl]:Or,[xl]:Or,[Fl]:Ur,[Ml]:Ur,[kl]:Ed,[_l]:Id,[Gl]:bd,[Ll]:md,[Ul]:Wa,[Nl]:Wa,[Jl]:Ya,[Kl]:Ya,[zl]:Nr,[Vl]:Nr},Ot={[Ql]:ke,[wl]:ke,[yl]:ke,[Bl]:de,[Cl]:de,[El]:de,[Il]:q,[bl]:q,[ml]:q,[fl]:q,[pl]:q,[gl]:q,[Sl]:Jc,[vl]:zc,[Pl]:q,[Ol]:q,[vr]:de,[ql]:q,[Hl]:q,[Yl]:de,[$l]:q,[jl]:q,[Tl]:q,[Dl]:q,[Rl]:q,[xl]:q,[Fl]:q,[Ml]:q,[kl]:q,[_l]:q,[Gl]:q,[Ll]:q,[Ul]:q,[Nl]:q,[Jl]:q,[Kl]:q,[zl]:q,[Vl]:q};async function wg(r){const{vkFormat:e}=r;if(Hn[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat: "+e);Ot[e]===void 0&&console.warn('THREE.KTX2Loader: Missing ".type" for vkFormat: '+e);let t;r.supercompressionScheme===co&&(Pn||(Pn=new Promise(async a=>{const o=new Eg;await o.init(),a(o)})),t=await Pn);const s=[];for(let a=0;a<r.levels.length;a++){const o=Math.max(1,r.pixelWidth>>a),A=Math.max(1,r.pixelHeight>>a),c=r.pixelDepth?Math.max(1,r.pixelDepth>>a):0,h=r.levels[a];let l;if(r.supercompressionScheme===ug)l=h.levelData;else if(r.supercompressionScheme===co)l=t.decode(h.levelData,h.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let d;Ot[e]===ke?d=new Float32Array(l.buffer,l.byteOffset,l.byteLength/Float32Array.BYTES_PER_ELEMENT):Ot[e]===de?d=new Uint16Array(l.buffer,l.byteOffset,l.byteLength/Uint16Array.BYTES_PER_ELEMENT):Ot[e]===Jc||Ot[e]===zc?d=new Uint32Array(l.buffer,l.byteOffset,l.byteLength/Uint32Array.BYTES_PER_ELEMENT):d=l,s.push({data:d,width:o,height:A,depth:c})}const i=r.levelCount===0||s.length>1;let n;if(yg.has(Hn[e]))n=r.pixelDepth===0?new Yc(s[0].data,r.pixelWidth,r.pixelHeight):new Cd(s[0].data,r.pixelWidth,r.pixelHeight,r.pixelDepth),n.minFilter=i?gn:ft,n.magFilter=ft,n.generateMipmaps=r.levelCount===0;else{if(r.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");n=new $c(s,r.pixelWidth,r.pixelHeight),n.minFilter=i?pi:se,n.magFilter=se}return n.mipmaps=s,n.type=Ot[e],n.format=Hn[e],n.colorSpace=Wl(r),n.needsUpdate=!0,Promise.resolve(n)}function Wl(r){const e=r.dataFormatDescriptor[0];return e.colorPrimaries===fg?e.transferFunction===lo?Be:ie:e.colorPrimaries===mg?e.transferFunction===lo?Cg:Bg:e.colorPrimaries===pg?Ja:(console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Ja)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var go,po;const Te=Symbol("retainerCount"),Ke=Symbol("recentlyUsed"),hs=Symbol("evict"),Ei=Symbol("evictionThreshold"),qn=Symbol("cache");class Qg{constructor(e,t=5){this[go]=new Map,this[po]=[],this[qn]=e,this[Ei]=t}set evictionThreshold(e){this[Ei]=e,this[hs]()}get evictionThreshold(){return this[Ei]}get cache(){return this[qn]}retainerCount(e){return this[Te].get(e)||0}reset(){this[Te].clear(),this[Ke]=[]}retain(e){this[Te].has(e)||this[Te].set(e,0),this[Te].set(e,this[Te].get(e)+1);const t=this[Ke].indexOf(e);t!==-1&&this[Ke].splice(t,1),this[Ke].unshift(e),this[hs]()}release(e){this[Te].has(e)&&this[Te].set(e,Math.max(this[Te].get(e)-1,0)),this[hs]()}[(go=Te,po=Ke,hs)](){if(!(this[Ke].length<this[Ei]))for(let e=this[Ke].length-1;e>=this[Ei];--e){const t=this[Ke][e];this[Te].get(t)===0&&(this[qn].delete(t),this[Ke].splice(e,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=r=>{const e=[],t=new Set;for(const s of r){let i=s,n=0;for(;t.has(i);)i=s+"."+ ++n;t.add(i),e.push(i)}return e},Sg=r=>{const e=new Map;for(const t of r.mappings)for(const s of t.variants)e.set(s,{material:null,gltfMaterialIndex:t.material});return e};class xg{constructor(e){this.parser=e,this.name="KHR_materials_variants"}afterRoot(e){const t=this.parser,s=t.json;if(s.extensions===void 0||s.extensions[this.name]===void 0)return null;const n=s.extensions[this.name].variants||[],a=vg(n.map(o=>o.name));for(const o of e.scenes)o.traverse(A=>{const c=A;if(!c.material)return;const h=t.associations.get(c);if(h==null||h.meshes==null||h.primitives==null)return;const g=s.meshes[h.meshes].primitives[h.primitives].extensions;!g||!g[this.name]||(c.userData.variantMaterials=Sg(g[this.name]))});return e.userData.variants=a,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xl,fo;He.DEFAULT_ANISOTROPY=4;const Rg=(r,e,t=()=>{})=>{const s=i=>{const n=i.loaded/i.total;t(Math.max(0,Math.min(1,isFinite(n)?n:1)))};return new Promise((i,n)=>{e.load(r,i,s,n)})},Dg=r=>new Promise((e,t)=>{const s=document.createElement("script");document.body.appendChild(s),s.onload=e,s.onerror=t,s.async=!0,s.src=r}),ze=new Map,jn=new Map;let mo;const bo=new Ru;let Io;const $n=new xe;let Vn,Kn;const Qt=Symbol("loader"),rt=Symbol("evictionPolicy"),Eo=Symbol("GLTFInstance");class be extends fn{static setDRACODecoderLocation(e){mo=e,bo.setDecoderPath(e)}static getDRACODecoderLocation(){return mo}static setKTX2TranscoderLocation(e){Io=e,$n.setTranscoderPath(e)}static getKTX2TranscoderLocation(){return Io}static setMeshoptDecoderLocation(e){Vn!==e&&(Vn=e,Kn=Dg(e).then(()=>so.ready).then(()=>so))}static getMeshoptDecoderLocation(){return Vn}static initializeKTX2Loader(e){$n.detectSupport(e)}static get cache(){return ze}static clearCache(){ze.forEach((e,t)=>{this.delete(t)}),this[rt].reset()}static has(e){return ze.has(e)}static async delete(e){if(!this.has(e))return;const t=ze.get(e);jn.delete(e),ze.delete(e),(await t).dispose()}static hasFinishedLoading(e){return!!jn.get(e)}constructor(e){super(),this[fo]=new Tu().register(t=>new xg(t)),this[Eo]=e,this[Qt].setDRACOLoader(bo),this[Qt].setKTX2Loader($n)}get[(Xl=rt,fo=Qt,rt)](){return this.constructor[rt]}async preload(e,t,s=()=>{}){if(this[Qt].setWithCredentials(t.withCredentials),this.dispatchEvent({type:"preload",element:t,src:e}),!ze.has(e)){Kn!=null&&this[Qt].setMeshoptDecoder(await Kn);const i=Rg(e,this[Qt],o=>{s(o*.8)}),n=this[Eo],a=i.then(o=>n.prepare(o)).then(o=>(s(.9),new n(o))).catch(o=>(console.error(o),new n));ze.set(e,a)}await ze.get(e),jn.set(e,!0),s&&s(1)}async load(e,t,s=()=>{}){await this.preload(e,t,s);const n=await(await ze.get(e)).clone();return this[rt].retain(e),n.dispose=()=>{this[rt].release(e)},n}}be[Xl]=new Qg(be);class Tg extends hi{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new De(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element&&t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const Pt=new k,Co=new pt,Bo=new pt,yo=new k,wo=new k;class Mg{constructor(e={}){const t=this;let s,i,n,a;const o={objects:new WeakMap},A=e.element!==void 0?e.element:document.createElement("div");A.style.overflow="hidden",this.domElement=A,this.sortObjects=!0,this.getSize=function(){return{width:s,height:i}},this.render=function(g,p){g.matrixWorldAutoUpdate===!0&&g.updateMatrixWorld(),p.parent===null&&p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),Co.copy(p.matrixWorldInverse),Bo.multiplyMatrices(p.projectionMatrix,Co),h(g,g,p),this.sortObjects&&u(g)},this.setSize=function(g,p){s=g,i=p,n=s/2,a=i/2,A.style.width=g+"px",A.style.height=p+"px"};function c(g){g.isCSS2DObject&&(g.element.style.display="none");for(let p=0,f=g.children.length;p<f;p++)c(g.children[p])}function h(g,p,f){if(g.visible===!1){c(g);return}if(g.isCSS2DObject){Pt.setFromMatrixPosition(g.matrixWorld),Pt.applyMatrix4(Bo);const b=Pt.z>=-1&&Pt.z<=1&&g.layers.test(f.layers)===!0,E=g.element;E.style.display=b===!0?"":"none",b===!0&&(g.onBeforeRender(t,p,f),E.style.transform="translate("+-100*g.center.x+"%,"+-100*g.center.y+"%)translate("+(Pt.x*n+n)+"px,"+(-Pt.y*a+a)+"px)",E.parentNode!==A&&A.appendChild(E),g.onAfterRender(t,p,f));const I={distanceToCameraSquared:l(f,g)};o.objects.set(g,I)}for(let b=0,E=g.children.length;b<E;b++)h(g.children[b],p,f)}function l(g,p){return yo.setFromMatrixPosition(g.matrixWorld),wo.setFromMatrixPosition(p.matrixWorld),yo.distanceToSquared(wo)}function d(g){const p=[];return g.traverseVisible(function(f){f.isCSS2DObject&&p.push(f)}),p}function u(g){const p=d(g).sort(function(b,E){if(b.renderOrder!==E.renderOrder)return E.renderOrder-b.renderOrder;const I=o.objects.get(b).distanceToCameraSquared,C=o.objects.get(E).distanceToCameraSquared;return I-C}),f=p.length;for(let b=0,E=p.length;b<E;b++)p[b].element.style.zIndex=f-b}}}function ds(r,e,t){let s=t;const i=new k;return r.updateWorldMatrix(!0,!0),r.traverseVisible(n=>{const{geometry:a}=n;if(a!==void 0){const{position:o}=a.attributes;if(o!==void 0)for(let A=0,c=o.count;A<c;A++)n.isMesh?n.getVertexPosition(A,i):i.fromBufferAttribute(o,A),n.isSkinnedMesh||i.applyMatrix4(n.matrixWorld),s=e(s,i)}}),s}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=r=>r.material!==void 0&&r.userData&&r.userData.variantMaterials&&!!Array.from(r.userData.variantMaterials.values()).filter(e=>qs(e.material)),qs=r=>r&&r.isMaterial&&!Array.isArray(r);class Fg{constructor(e){this.writer=e,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(e){const t=new Set,s=i=>{if(!Qo(i))return;const n=i.userData.variantMaterials,a=i.userData.variantData;for(const[o,A]of a){const c=n.get(A.index);c&&qs(c.material)&&t.add(o)}};if(Array.isArray(e))for(const i of e)i.traverse(s);else e.traverse(s);t.forEach(i=>this.variantNames.push(i))}async writeMesh(e,t){if(!Qo(e))return;const s=e.userData,i=s.variantMaterials,n=s.variantData,a=new Map,o=new Map,A=Array.from(n.values()).sort((l,d)=>l.index-d.index);for(const[l,d]of A.entries())o.set(d.index,l);for(const l of n.values()){const d=i.get(l.index);if(!d||!qs(d.material))continue;const u=await this.writer.processMaterialAsync(d.material);a.has(u)||a.set(u,{material:u,variants:[]}),a.get(u).variants.push(o.get(l.index))}const c=Array.from(a.values()).map(l=>l.variants.sort((d,u)=>d-u)&&l).sort((l,d)=>l.material-d.material);if(c.length===0)return;const h=qs(s.originalMaterial)?await this.writer.processMaterialAsync(s.originalMaterial):-1;for(const l of t.primitives)h>=0&&(l.material=h),l.extensions=l.extensions||{},l.extensions[this.name]={mappings:c}}afterParse(){if(this.variantNames.length===0)return;const e=this.writer.json;e.extensions=e.extensions||{};const t=this.variantNames.map(s=>({name:s}));e.extensions[this.name]={variants:t},this.writer.extensionsUsed[this.name]=!0}}class _g{constructor(e,t,s,i,n){this.xrLight=e,this.renderer=t,this.lightProbe=s,this.xrWebGLBinding=null,this.estimationStartCallback=n,this.frameCallback=this.onXRFrame.bind(this);const a=t.xr.getSession();if(i&&"XRWebGLBinding"in window){const o=new Wc(16);e.environment=o.texture;const A=t.getContext();switch(a.preferredReflectionFormat){case"srgba8":A.getExtension("EXT_sRGB");break;case"rgba16f":A.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(a,A),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}a.requestAnimationFrame(this.frameCallback)}updateReflection(){const e=this.renderer.properties.get(this.xrLight.environment);if(e){const t=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);t&&(e.__webglTexture=t,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(e,t){if(!this.xrLight)return;t.session.requestAnimationFrame(this.frameCallback);const i=t.getLightEstimate(this.lightProbe);if(i){this.xrLight.lightProbe.sh.fromArray(i.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const n=Math.max(1,Math.max(i.primaryLightIntensity.x,Math.max(i.primaryLightIntensity.y,i.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(i.primaryLightIntensity.x/n,i.primaryLightIntensity.y/n,i.primaryLightIntensity.z/n),this.xrLight.directionalLight.intensity=n,this.xrLight.directionalLight.position.copy(i.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class kg extends Ns{constructor(e,t=!0){super(),this.lightProbe=new vd,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new Hc,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let s=null,i=!1;e.xr.addEventListener("sessionstart",()=>{const n=e.xr.getSession();"requestLightProbe"in n&&n.requestLightProbe({reflectionFormat:n.preferredReflectionFormat}).then(a=>{s=new _g(this,e,a,t,()=>{i=!0,this.dispatchEvent({type:"estimationstart"})})})}),e.xr.addEventListener("sessionend",()=>{s&&(s.dispose(),s=null),i&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{s&&(s.dispose(),s=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=1e4,Lg=.001,eh=50;class Ie{constructor(e=eh){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(e)}setDecayTime(e){this.naturalFrequency=1/Math.max(Lg,e)}update(e,t,s,i){const n=2e-4*this.naturalFrequency;if(e==null||i===0||e===t&&this.velocity===0)return t;if(s<0)return e;const a=e-t,o=this.velocity+this.naturalFrequency*a,A=a+s*o,c=Math.exp(-this.naturalFrequency*s),h=(o-this.naturalFrequency*A)*c,l=-this.naturalFrequency*(h+o*c);return Math.abs(h)<n*Math.abs(i)&&l*a>=0?(this.velocity=0,t):(this.velocity=h,t+A*c)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue=.2,vo=.03,Gg=.75,th=12,Ng=Math.PI/(2*th),So=new De,us=(r,e,t)=>{let s=e>0?t>0?0:-Math.PI/2:t>0?Math.PI/2:Math.PI;for(let i=0;i<=th;++i)r.push(e+(Ue-vo)*Math.cos(s),t+(Ue-vo)*Math.sin(s),0,e+Ue*Math.cos(s),t+Ue*Math.sin(s),0),s+=Ng};class xo extends ue{constructor(e,t){const s=new un,i=[],n=[],{size:a,boundingBox:o}=e,A=a.x/2,c=(t==="back"?a.y:a.z)/2;us(n,A,c),us(n,-A,c),us(n,-A,-c),us(n,A,-c);const h=n.length/3;for(let u=0;u<h-2;u+=2)i.push(u,u+1,u+3,u,u+3,u+2);const l=h-2;i.push(l,l+1,1,l,1,0),s.setAttribute("position",new Sd(n,3)),s.setIndex(i),super(s),this.side=t;const d=this.material;switch(d.side=dt,d.transparent=!0,d.opacity=0,this.goalOpacity=0,this.opacityDamper=new Ie,this.hitPlane=new ue(new ns(2*(A+Ue),2*(c+Ue))),this.hitPlane.visible=!1,this.hitPlane.material.side=dt,this.add(this.hitPlane),this.hitBox=new ue(new mn(a.x+2*Ue,a.y+Ue,a.z+2*Ue)),this.hitBox.visible=!1,this.hitBox.material.side=dt,this.add(this.hitBox),o.getCenter(this.position),t){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=o.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=o.min.z,this.position.z=this.shadowHeight}e.target.add(this),this.hitBox.position.y=(a.y+Ue)/2+o.min.y,e.target.add(this.hitBox),this.offsetHeight=0}getHit(e,t,s){So.set(t,-s),this.hitPlane.visible=!0;const i=e.positionAndNormalFromPoint(So,this.hitPlane);return this.hitPlane.visible=!1,i==null?null:i.position}getExpandedHit(e,t,s){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const i=this.getHit(e,t,s);return this.hitPlane.scale.set(1,1,1),i}controllerIntersection(e,t){this.hitBox.visible=!0;const s=e.hitFromController(t,this.hitBox);return this.hitBox.visible=!1,s}set offsetHeight(e){e-=.001,this.side==="back"?this.position.z=this.shadowHeight+e:this.position.y=this.shadowHeight+e}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(e){this.goalOpacity=e?Gg:0}updateOpacity(e){const t=this.material;t.opacity=this.opacityDamper.update(t.opacity,this.goalOpacity,e,1),this.visible=t.opacity>0}dispose(){const{geometry:e,material:t}=this.hitPlane;e.dispose(),t.dispose(),this.hitBox.geometry.dispose(),this.hitBox.material.dispose(),this.geometry.dispose(),this.material.dispose(),this.hitBox.removeFromParent(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=(r,e)=>({type:"number",number:r,unit:e}),tt=(()=>{const r={};return t=>{const s=t;if(s in r)return r[s];const i=[];let n=0;for(;t;){if(++n>1e3){t="";break}const a=ih(t),o=a.nodes[0];if(o==null||o.terms.length===0)break;i.push(o),t=a.remainingInput}return r[s]=i}})(),ih=(()=>{const r=/^(\-\-|[a-z\u0240-\uffff])/i,e=/^([\*\+\/]|[\-]\s)/i,t=/^[\),]/,s="(",i="#";return n=>{const a=[];for(;n.length&&(n=n.trim(),!t.test(n));)if(n[0]===s){const{nodes:o,remainingInput:A}=Ro(n);n=A,a.push({type:"function",name:{type:"ident",value:"calc"},arguments:o})}else if(r.test(n)){const o=Ug(n),A=o.nodes[0];if(n=o.remainingInput,n[0]===s){const{nodes:c,remainingInput:h}=Ro(n);a.push({type:"function",name:A,arguments:c}),n=h}else a.push(A)}else if(e.test(n))a.push({type:"operator",value:n[0]}),n=n.slice(1);else{const{nodes:o,remainingInput:A}=n[0]===i?Pg(n):Og(n);if(o.length===0)break;a.push(o[0]),n=A}return{nodes:[{type:"expression",terms:a}],remainingInput:n}}})(),Ug=(()=>{const r=/[^a-z0-9_\-\u0240-\uffff]/i;return e=>{const t=e.match(r),s=t==null?e:e.substr(0,t.index),i=t==null?"":e.substr(t.index);return{nodes:[{type:"ident",value:s}],remainingInput:i}}})(),Og=(()=>{const r=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,e=/^[a-z%]+/i,t=/^(m|mm|cm|rad|deg|[%])$/;return s=>{const i=s.match(r),n=i==null?"0":i[0];s=n==null?s:s.slice(n.length);const a=s.match(e);let o=a!=null&&a[0]!==""?a[0]:null;const A=a==null?s:s.slice(o.length);return o!=null&&!t.test(o)&&(o=null),{nodes:[{type:"number",number:parseFloat(n)||0,unit:o}],remainingInput:A}}})(),Pg=(()=>{const r=/^[a-f0-9]*/i;return e=>{e=e.slice(1).trim();const t=e.match(r);return{nodes:t==null?[]:[{type:"hex",value:t[0]}],remainingInput:t==null?e:e.slice(t[0].length)}}})(),Ro=r=>{const e=[];for(r=r.slice(1).trim();r.length;){const t=ih(r);if(e.push(t.nodes[0]),r=t.remainingInput.trim(),r[0]===",")r=r.slice(1).trim();else if(r[0]===")"){r=r.slice(1);break}}return{nodes:e,remainingInput:r}},Do=Symbol("visitedTypes");class Hg{constructor(e){this[Do]=e}walk(e,t){const s=e.slice();for(;s.length;){const i=s.shift();switch(this[Do].indexOf(i.type)>-1&&t(i),i.type){case"expression":s.unshift(...i.terms);break;case"function":s.unshift(i.name,...i.arguments);break}}}}const mt=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=(r,e=0)=>{let{number:t,unit:s}=r;if(!isFinite(t))t=e,s="rad";else if(r.unit==="rad"||r.unit==null)return r;return{type:"number",number:(s==="deg"&&t!=null?t:0)*Math.PI/180,unit:"rad"}},To=(r,e=0)=>{let{number:t,unit:s}=r;if(!isFinite(t))t=e,s="m";else if(r.unit==="m")return r;let i;switch(s){default:i=1;break;case"cm":i=1/100;break;case"mm":i=1/1e3;break}return{type:"number",number:i*t,unit:"m"}},qe=(()=>{const r=t=>t,e={rad:r,deg:En,m:r,mm:To,cm:To};return(t,s=mt)=>{isFinite(t.number)||(t.number=s.number,t.unit=s.unit);const{unit:i}=t;if(i==null)return t;const n=e[i];return n==null?s:n(t)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sh,Mo,Fo;const fi=Symbol("evaluate"),js=Symbol("lastValue");class Z{constructor(){this[sh]=null}static evaluatableFor(e,t=mt){if(e instanceof Z)return e;if(e.type==="number")return e.unit==="%"?new qg(e,t):e;switch(e.name.value){case"calc":return new Vg(e,t);case"env":return new jg(e)}return mt}static evaluate(e){return e instanceof Z?e.evaluate():e}static isConstant(e){return e instanceof Z?e.isConstant:!0}static applyIntrinsics(e,t){const{basis:s,keywords:i}=t,{auto:n}=i;return s.map((a,o)=>{const A=n[o]==null?a:n[o];let c=e[o]?e[o]:A;if(c.type==="ident"){const h=c.value;h in i&&(c=i[h][o])}return(c==null||c.type==="ident")&&(c=A),c.unit==="%"?ge(c.number/100*a.number,a.unit):(c=qe(c,a),c.unit!==a.unit?a:c)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[js]==null)&&(this[js]=this[fi]()),this[js]}}sh=js;const _o=Symbol("percentage"),zn=Symbol("basis");class qg extends Z{constructor(e,t){super(),this[_o]=e,this[zn]=t}get isConstant(){return!0}[fi](){return ge(this[_o].number/100*this[zn].number,this[zn].unit)}}const gs=Symbol("identNode");class jg extends Z{constructor(e){super(),this[Mo]=null;const t=e.arguments.length?e.arguments[0].terms[0]:null;t!=null&&t.type==="ident"&&(this[gs]=t)}get isConstant(){return!1}[(Mo=gs,fi)](){if(this[gs]!=null)switch(this[gs].value){case"window-scroll-y":const e=window.pageYOffset,t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:e/(t-window.innerHeight)||0,unit:null}}return mt}}const $g=/[\*\/]/,Ht=Symbol("evaluator");class Vg extends Z{constructor(e,t=mt){if(super(),this[Fo]=null,e.arguments.length!==1)return;const s=e.arguments[0].terms.slice(),i=[];for(;s.length;){const n=s.shift();if(i.length>0){const a=i[i.length-1];if(a.type==="operator"&&$g.test(a.value)){const o=i.pop(),A=i.pop();if(A==null)return;i.push(new Lo(o,Z.evaluatableFor(A,t),Z.evaluatableFor(n,t)));continue}}i.push(n.type==="operator"?n:Z.evaluatableFor(n,t))}for(;i.length>2;){const[n,a,o]=i.splice(0,3);if(a.type!=="operator")return;i.unshift(new Lo(a,Z.evaluatableFor(n,t),Z.evaluatableFor(o,t)))}i.length===1&&(this[Ht]=i[0])}get isConstant(){return this[Ht]==null||Z.isConstant(this[Ht])}[(Fo=Ht,fi)](){return this[Ht]!=null?Z.evaluate(this[Ht]):mt}}const ko=Symbol("operator"),Jn=Symbol("left"),Yn=Symbol("right");class Lo extends Z{constructor(e,t,s){super(),this[ko]=e,this[Jn]=t,this[Yn]=s}get isConstant(){return Z.isConstant(this[Jn])&&Z.isConstant(this[Yn])}[fi](){const e=qe(Z.evaluate(this[Jn])),t=qe(Z.evaluate(this[Yn])),{number:s,unit:i}=e,{number:n,unit:a}=t;if(a!=null&&i!=null&&a!=i)return mt;const o=i||a;let A;switch(this[ko].value){case"+":A=s+n;break;case"-":A=s-n;break;case"/":A=s/n;break;case"*":A=s*n;break;default:return mt}return{type:"number",number:A,unit:o}}}const Wn=Symbol("evaluatables"),Go=Symbol("intrinsics");class nh extends Z{constructor(e,t){super(),this[Go]=t;const s=e[0],i=s!=null?s.terms:[];this[Wn]=t.basis.map((n,a)=>{const o=i[a];return o==null?{type:"ident",value:"auto"}:o.type==="ident"?o:Z.evaluatableFor(o,n)})}get isConstant(){for(const e of this[Wn])if(!Z.isConstant(e))return!1;return!0}[fi](){const e=this[Wn].map(t=>Z.evaluate(t));return Z.applyIntrinsics(e,this[Go]).map(t=>t.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ah,rh,oh,Ah;const qt=Symbol("instances"),No=Symbol("activateListener"),Uo=Symbol("deactivateListener"),Xn=Symbol("notifyInstances"),Oo=Symbol("notify"),Po=Symbol("callback");class Ne{static[Xn](){for(const e of Ne[qt])e[Oo]()}static[(ah=qt,No)](){window.addEventListener("scroll",this[Xn],{passive:!0})}static[Uo](){window.removeEventListener("scroll",this[Xn])}constructor(e){this[Po]=e}observe(){Ne[qt].size===0&&Ne[No](),Ne[qt].add(this)}disconnect(){Ne[qt].delete(this),Ne[qt].size===0&&Ne[Uo]()}[Oo](){this[Po]()}}Ne[ah]=new Set;const Ho=Symbol("computeStyleCallback"),ch=Symbol("astWalker"),Pi=Symbol("dependencies"),lh=Symbol("onScroll");class Kg{constructor(e){this[rh]={},this[oh]=new Hg(["function"]),this[Ah]=()=>{this[Ho]({relatedState:"window-scroll"})},this[Ho]=e}observeEffectsFor(e){const t={},s=this[Pi];this[ch].walk(e,i=>{const{name:n}=i,o=i.arguments[0].terms[0];if(!(n.value!=="env"||o==null||o.type!=="ident"))switch(o.value){case"window-scroll-y":if(t["window-scroll"]==null){const A="window-scroll"in s?s["window-scroll"]:new Ne(this[lh]);A.observe(),delete s["window-scroll"],t["window-scroll"]=A}break}});for(const i in s)s[i].disconnect();this[Pi]=t}dispose(){for(const e in this[Pi])this[Pi][e].disconnect()}}rh=Pi,oh=ch,Ah=lh;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at=r=>{const e=r.observeEffects||!1,t=r.intrinsics instanceof Function?r.intrinsics:()=>r.intrinsics;return(s,i)=>{const n=s.updated,a=s.connectedCallback,o=s.disconnectedCallback,A=Symbol(`${i}StyleEffector`),c=Symbol(`${i}StyleEvaluator`),h=Symbol(`${i}UpdateEvaluator`),l=Symbol(`${i}EvaluateAndSync`);Object.defineProperties(s,{[A]:{value:null,writable:!0},[c]:{value:null,writable:!0},[h]:{value:function(){const d=tt(this[i]);this[c]=new nh(d,t(this)),this[A]==null&&e&&(this[A]=new Kg(()=>this[l]())),this[A]!=null&&this[A].observeEffectsFor(d)}},[l]:{value:function(){if(this[c]==null)return;const d=this[c].evaluate();this[r.updateHandler](d)}},updated:{value:function(d){d.has(i)&&(this[h](),this[l]()),n.call(this,d)}},connectedCallback:{value:function(){a.call(this),this.requestUpdate(i,this[i])}},disconnectedCallback:{value:function(){o.call(this),this[A]!=null&&(this[A].dispose(),this[A]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=r=>r<.5?2*r*r:-1+(4-2*r)*r,zg=(r,e,t=hh)=>s=>r+(e-r)*t(s),Jg=(r,e)=>{const t=i=>n=>i+=n,s=e.map(t(0));return i=>{i=Oe(i,0,1),i*=s[s.length-1];const n=s.findIndex(A=>A>=i),a=n<1?0:s[n-1],o=s[n];return r[n]((i-a)/(o-a))}},ai=r=>{const e=[],t=[];let s=r.initialValue;for(let i=0;i<r.keyframes.length;++i){const n=r.keyframes[i],{value:a,frames:o}=n,A=n.ease||hh,c=zg(s,a,A);e.push(c),t.push(o),s=a}return Jg(e,t)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const Yg=5e3,Wg=ai({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),Xg=ai({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),Zg=30,ep=12,dh="0deg 75deg 105%",tp="auto auto auto",ip="auto",sp=2.2,np=["front","right","back","left"],ap=["upper-","","lower-"],rp=3e3,op=". Use mouse, touch or arrow keys to move.",ps={AUTO:"auto"},Zn={BASIC:"basic",WIGGLE:"wiggle"},Ap={NONE:"none"},qo=()=>({basis:[En(ge(Zg,"deg"))],keywords:{auto:[null]}}),cp=()=>({basis:[En(ge(ep,"deg"))],keywords:{auto:[null]}}),uh=(()=>{const r=tt(dh)[0].terms,e=qe(r[0]),t=qe(r[1]);return s=>{const i=s[w].idealCameraDistance();return{basis:[e,t,ge(i,"m")],keywords:{auto:[null,null,ge(105,"%")]}}}})(),lp=r=>{const e=sp*r[w].boundingSphere.radius;return{basis:[ge(-1/0,"rad"),ge(0,"rad"),ge(e,"m")],keywords:{auto:[null,null,null]}}},hp=r=>{const e=uh(r),s=new nh([],e).evaluate()[2];return{basis:[ge(1/0,"rad"),ge(Math.PI,"rad"),ge(s,"m")],keywords:{auto:[null,null,null]}}},dp=r=>{const e=r[w].boundingBox.getCenter(new k);return{basis:[ge(e.x,"m"),ge(e.y,"m"),ge(e.z,"m")],keywords:{auto:[null,null,null]}}},gh=Math.PI/2,up=Math.PI/3,gp=gh/2,pp=2*Math.PI,K=Symbol("controls"),$s=Symbol("panElement"),ea=Symbol("promptElement"),fs=Symbol("promptAnimatedContainer"),ta=Symbol("fingerAnimatedContainers"),ms=Symbol("deferInteractionPrompt"),jo=Symbol("updateAria"),Je=Symbol("a11y"),$o=Symbol("updateA11y"),Vo=Symbol("updateCameraForRadius"),jt=Symbol("cancelPrompts"),ia=Symbol("onChange"),Ci=Symbol("onPointerChange"),Ct=Symbol("waitingToPromptUser"),bs=Symbol("userHasInteracted"),$t=Symbol("promptElementVisibleTime"),Bi=Symbol("lastPromptOffset"),Is=Symbol("cancellationSource"),sa=Symbol("lastSpherical"),yi=Symbol("jumpCamera"),na=Symbol("initialized"),wi=Symbol("maintainThetaPhi"),Ko=Symbol("syncCameraOrbit"),zo=Symbol("syncFieldOfView"),Jo=Symbol("syncCameraTarget"),Yo=Symbol("syncMinCameraOrbit"),Wo=Symbol("syncMaxCameraOrbit"),Xo=Symbol("syncMinFieldOfView"),Zo=Symbol("syncMaxFieldOfView"),fp=r=>{var e,t,s,i,n,a,o,A,c,h,l,d,u,g,p,f,b,E;class I extends r{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=dh,this.cameraTarget=tp,this.fieldOfView=ip,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=rp,this.interactionPrompt=ps.AUTO,this.interactionPromptStyle=Zn.WIGGLE,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.touchAction=Ap.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=eh,this.a11y=null,this[e]=this.shadowRoot.querySelector(".interaction-prompt"),this[t]=this.shadowRoot.querySelector("#prompt"),this[s]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[i]=this.shadowRoot.querySelector(".pan-target"),this[n]=0,this[a]=1/0,this[o]=!1,this[A]=!1,this[c]=ee.AUTOMATIC,this[h]=new Ep(this[w].camera,this[Me],this[w]),this[l]=new Os,this[d]=!1,this[u]=!1,this[g]=!1,this[p]={},this[f]=()=>{const m=this[K].changeSource;this[Is]=m,m===ee.USER_INTERACTION&&(this[bs]=!0,this[ms]())},this[b]=()=>{this[jo](),this[oe]();const m=this[K].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:m}}))},this[E]=m=>{this[zs].classList.toggle("pointer-tumbling",m.type==="pointer-change-start")}}get inputSensitivity(){return this[K].inputSensitivity}set inputSensitivity(m){this[K].inputSensitivity=m}getCameraOrbit(){const{theta:m,phi:y,radius:v}=this[sa];return{theta:m,phi:y,radius:v,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return ct(this[z].isPresenting?this[z].arRenderer.target:this[w].getDynamicTarget())}getFieldOfView(){return this[K].getFieldOfView()}getMinimumFieldOfView(){return this[K].options.minimumFieldOfView}getMaximumFieldOfView(){return this[K].options.maximumFieldOfView}getIdealAspect(){return this[w].idealAspect}jumpCameraToGoal(){this[yi]=!0,this.requestUpdate(yi,!1)}resetInteractionPrompt(){this[Bi]=0,this[$t]=1/0,this[bs]=!1,this[Ct]=this.interactionPrompt===ps.AUTO&&this.cameraControls}zoom(m){const y=new WheelEvent("wheel",{deltaY:-30*m});this[Me].dispatchEvent(y)}connectedCallback(){super.connectedCallback(),this[K].addEventListener("user-interaction",this[jt]),this[K].addEventListener("pointer-change-start",this[Ci]),this[K].addEventListener("pointer-change-end",this[Ci])}disconnectedCallback(){super.disconnectedCallback(),this[K].removeEventListener("user-interaction",this[jt]),this[K].removeEventListener("pointer-change-start",this[Ci]),this[K].removeEventListener("pointer-change-end",this[Ci])}updated(m){super.updated(m);const y=this[K],v=this[w];if(m.has("cameraControls")&&(this.cameraControls?(y.enableInteraction(),this.interactionPrompt===ps.AUTO&&(this[Ct]=!0)):(y.disableInteraction(),this[ms]()),this[Me].setAttribute("aria-label",this[oi])),m.has("disableZoom")&&(y.disableZoom=this.disableZoom),m.has("disablePan")&&(y.enablePan=!this.disablePan),m.has("disableTap")&&(y.enableTap=!this.disableTap),(m.has("interactionPrompt")||m.has("cameraControls")||m.has("src"))&&(this.interactionPrompt===ps.AUTO&&this.cameraControls&&!this[bs]?this[Ct]=!0:this[ms]()),m.has("interactionPromptStyle")&&(this[fs].style.opacity=this.interactionPromptStyle==Zn.BASIC?"1":"0"),m.has("touchAction")){const B=this.touchAction;y.applyOptions({touchAction:B}),y.updateTouchActionStyle()}m.has("orbitSensitivity")&&(y.orbitSensitivity=this.orbitSensitivity),m.has("zoomSensitivity")&&(y.zoomSensitivity=this.zoomSensitivity),m.has("panSensitivity")&&(y.panSensitivity=this.panSensitivity),m.has("interpolationDecay")&&(y.setDamperDecayTime(this.interpolationDecay),v.setTargetDamperDecayTime(this.interpolationDecay)),m.has("a11y")&&this[$o](),this[yi]===!0&&Promise.resolve().then(()=>{y.jumpToGoal(),v.jumpToGoal(),this[ia](),this[yi]=!1})}async updateFraming(){const m=this[w],y=m.adjustedFoV(m.framedFoVDeg);await m.updateFraming();const v=m.adjustedFoV(m.framedFoVDeg),B=this[K].getFieldOfView()/y;this[K].setFieldOfView(v*B),this[wi]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(m,y,v){const B=this[Me],Q=this[ta];if(Q[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const S=new Array;S.push({x:ai(y.x),y:ai(y.y)});const D=[{x:S[0].x(0),y:S[0].y(0)}];v!=null&&(S.push({x:ai(v.x),y:ai(v.y)}),D.push({x:S[1].x(0),y:S[1].y(0)}));let M=performance.now();const{width:L,height:R}=this[w],U=this.getBoundingClientRect(),T=j=>{for(const[J,G]of D.entries()){const{style:N}=Q[J];N.transform=`translateX(${L*G.x}px) translateY(${R*G.y}px)`,j==="pointerdown"?N.opacity="1":j==="pointerup"&&(N.opacity="0");const $={pointerId:J-5678,pointerType:"touch",target:B,clientX:L*G.x+U.x,clientY:R*G.y+U.y,altKey:!0};B.dispatchEvent(new PointerEvent(j,$))}},H=()=>{const j=this[Is];if(j!==ee.AUTOMATIC||!B.isConnected){for(const G of this[ta])G.style.opacity="0";T("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:j}})),document.removeEventListener("visibilitychange",X);return}const J=Math.min(1,(performance.now()-M)/m);for(const[G,N]of D.entries())N.x=S[G].x(J),N.y=S[G].y(J);T("pointermove"),J<1?requestAnimationFrame(H):(T("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:ee.AUTOMATIC}})),document.removeEventListener("visibilitychange",X))},X=()=>{let j=0;document.visibilityState==="hidden"?j=performance.now()-M:M=performance.now()-j};document.addEventListener("visibilitychange",X),T("pointerdown"),this[Is]=ee.AUTOMATIC,requestAnimationFrame(H)}[(e=ea,t=fs,s=ta,i=$s,n=Bi,a=$t,o=bs,A=Ct,c=Is,h=K,l=sa,d=yi,u=na,g=wi,p=Je,zo)](m){const y=this[K],v=this[w];v.framedFoVDeg=m[0]*180/Math.PI,y.changeSource=ee.NONE,y.setFieldOfView(v.adjustedFoV(v.framedFoVDeg)),this[jt]()}[Ko](m){const y=this[K];if(this[wi]){const{theta:v,phi:B}=this.getCameraOrbit();m[0]=v,m[1]=B,this[wi]=!1}y.changeSource=ee.NONE,y.setOrbit(m[0],m[1],m[2]),this[jt]()}[Yo](m){this[K].applyOptions({minimumAzimuthalAngle:m[0],minimumPolarAngle:m[1],minimumRadius:m[2]}),this.jumpCameraToGoal()}[Wo](m){this[K].applyOptions({maximumAzimuthalAngle:m[0],maximumPolarAngle:m[1],maximumRadius:m[2]}),this[Vo](m[2]),this.jumpCameraToGoal()}[Xo](m){this[K].applyOptions({minimumFieldOfView:m[0]*180/Math.PI}),this.jumpCameraToGoal()}[Zo](m){const y=this[w].adjustedFoV(m[0]*180/Math.PI);this[K].applyOptions({maximumFieldOfView:y}),this.jumpCameraToGoal()}[Jo](m){const[y,v,B]=m;this[z].arRenderer.isPresenting||this[w].setTarget(y,v,B),this[K].changeSource=ee.NONE,this[z].arRenderer.updateTarget(),this[jt]()}[je](m,y){if(super[je](m,y),this[z].isPresenting||!this[Gt]())return;const v=this[K],B=this[w],Q=performance.now();if(this[Ct]&&this.loaded&&Q>this[ji]+this.interactionPromptThreshold&&(this[Ct]=!1,this[$t]=Q,this[ea].classList.add("visible")),isFinite(this[$t])&&this.interactionPromptStyle===Zn.WIGGLE){const M=(Q-this[$t])/Yg%1,L=Wg(M),R=Xg(M);if(this[fs].style.opacity=`${R}`,L!==this[Bi]){const U=L*B.width*.05,T=(L-this[Bi])*Math.PI/16;this[fs].style.transform=`translateX(${U}px)`,v.changeSource=ee.AUTOMATIC,v.adjustOrbit(T,0,0),this[Bi]=L}}const S=v.update(m,y),D=B.updateTarget(y);(S||D)&&this[ia]()}[ms](){this[Ct]=!1,this[ea].classList.remove("visible"),this[$t]=1/0}[Vo](m){const y=Math.max(this[w].farRadius(),m),v=0,B=Math.abs(2*y);this[K].updateNearFar(v,B)}[jo](){const{theta:m,phi:y}=this[K].getCameraSpherical(this[sa]),v=(4+Math.floor((m%pp+gp)/gh))%4,B=Math.floor(y/up),Q=np[v],D=`${ap[B]}${Q}`,M=D;M in this[Je]?this[An](this[Je][M]):this[An](`View from stage ${D}`)}get[oi](){let m=op;return"interaction-prompt"in this[Je]&&(m=`. ${this[Je]["interaction-prompt"]}`),super[oi].replace(/\.$/,"")+(this.cameraControls?m:"")}async[cn](m){const y=this[K],v=this[w],B=v.adjustedFoV(v.framedFoVDeg);super[cn](m);const Q=v.adjustedFoV(v.framedFoVDeg)/B,S=y.getFieldOfView()*(isFinite(Q)?Q:1);y.updateAspect(this[w].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[K].setFieldOfView(S),this.jumpCameraToGoal()}[$e](){super[$e](),this[na]?this[wi]=!0:this[na]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}[(f=jt,b=ia,E=Ci,$o)](){if(typeof this.a11y=="string")if(this.a11y.startsWith("{"))try{this[Je]=JSON.parse(this.a11y)}catch(m){console.warn("Error parsing a11y JSON:",m)}else this.a11y.length>0?console.warn("Error not supported format, should be a JSON string:",this.a11y):this[Je]={};else typeof this.a11y=="object"&&this.a11y!=null?this[Je]=Object.assign({},this.a11y):this[Je]={};this[Me].setAttribute("aria-label",this[oi])}}return te([F({type:Boolean,attribute:"camera-controls"})],I.prototype,"cameraControls",void 0),te([at({intrinsics:uh,observeEffects:!0,updateHandler:Ko}),F({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],I.prototype,"cameraOrbit",void 0),te([at({intrinsics:dp,observeEffects:!0,updateHandler:Jo}),F({type:String,attribute:"camera-target",hasChanged:()=>!0})],I.prototype,"cameraTarget",void 0),te([at({intrinsics:qo,observeEffects:!0,updateHandler:zo}),F({type:String,attribute:"field-of-view",hasChanged:()=>!0})],I.prototype,"fieldOfView",void 0),te([at({intrinsics:lp,updateHandler:Yo}),F({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],I.prototype,"minCameraOrbit",void 0),te([at({intrinsics:hp,updateHandler:Wo}),F({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],I.prototype,"maxCameraOrbit",void 0),te([at({intrinsics:cp,updateHandler:Xo}),F({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],I.prototype,"minFieldOfView",void 0),te([at({intrinsics:qo,updateHandler:Zo}),F({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],I.prototype,"maxFieldOfView",void 0),te([F({type:Number,attribute:"interaction-prompt-threshold"})],I.prototype,"interactionPromptThreshold",void 0),te([F({type:String,attribute:"interaction-prompt"})],I.prototype,"interactionPrompt",void 0),te([F({type:String,attribute:"interaction-prompt-style"})],I.prototype,"interactionPromptStyle",void 0),te([F({type:Number,attribute:"orbit-sensitivity"})],I.prototype,"orbitSensitivity",void 0),te([F({type:Number,attribute:"zoom-sensitivity"})],I.prototype,"zoomSensitivity",void 0),te([F({type:Number,attribute:"pan-sensitivity"})],I.prototype,"panSensitivity",void 0),te([F({type:String,attribute:"touch-action"})],I.prototype,"touchAction",void 0),te([F({type:Boolean,attribute:"disable-zoom"})],I.prototype,"disableZoom",void 0),te([F({type:Boolean,attribute:"disable-pan"})],I.prototype,"disablePan",void 0),te([F({type:Boolean,attribute:"disable-tap"})],I.prototype,"disableTap",void 0),te([F({type:Number,attribute:"interpolation-decay"})],I.prototype,"interpolationDecay",void 0),te([F()],I.prototype,"a11y",void 0),I};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=.018,eA=2,bp=300,Ip=new De,tA=new k,iA=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:0,maximumPolarAngle:Math.PI,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),Es=Math.PI/8,Cs=.04,Bs=10,ee={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class Ep extends fn{constructor(e,t,s){super(),this.camera=e,this.element=t,this.scene=s,this.orbitSensitivity=1,this.zoomSensitivity=1,this.panSensitivity=1,this.inputSensitivity=1,this.changeSource=ee.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Cr,this.panPerPixel=0,this.spherical=new Os,this.goalSpherical=new Os,this.thetaDamper=new Ie,this.phiDamper=new Ie,this.radiusDamper=new Ie,this.logFov=Math.log(iA.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Ie,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=i=>{if(this.enablePan)i.preventDefault();else for(const n of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:n.id})))},this.touchModeZoom=(i,n)=>{if(!this._disableZoom){const a=this.twoTouchDistance(this.pointers[0],this.pointers[1]),o=Cs*this.zoomSensitivity*(this.lastSeparation-a)*50/this.scene.height;this.lastSeparation=a,this.userAdjustOrbit(0,0,o)}this.panPerPixel>0&&this.movePan(i,n)},this.disableScroll=i=>{i.preventDefault()},this.touchModeRotate=(i,n)=>{const{touchAction:a}=this._options;if(!this.touchDecided&&a!=="none"){this.touchDecided=!0;const o=Math.abs(i),A=Math.abs(n);if(this.changeSource===ee.USER_INTERACTION&&(a==="pan-y"&&A>o||a==="pan-x"&&o>A)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(i,n)},this.onPointerDown=i=>{if(this.pointers.length>2)return;const{element:n}=this;this.pointers.length===0&&(n.addEventListener("pointermove",this.onPointerMove),n.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=i.clientX,this.startPointerPosition.clientY=i.clientY,this.startTime=performance.now());try{n.setPointerCapture(i.pointerId)}catch{}this.pointers.push({clientX:i.clientX,clientY:i.clientY,id:i.pointerId}),this.isUserPointing=!1,i.pointerType==="touch"?(this.changeSource=i.altKey?ee.AUTOMATIC:ee.USER_INTERACTION,this.onTouchChange(i)):(this.changeSource=ee.USER_INTERACTION,this.onMouseDown(i)),this.changeSource===ee.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=i=>{const n=this.pointers.find(c=>c.id===i.pointerId);if(n==null)return;if(i.pointerType==="mouse"&&i.buttons===0){this.onPointerUp(i);return}const a=this.pointers.length,o=(i.clientX-n.clientX)/a,A=(i.clientY-n.clientY)/a;o===0&&A===0||(n.clientX=i.clientX,n.clientY=i.clientY,i.pointerType==="touch"?(this.changeSource=i.altKey?ee.AUTOMATIC:ee.USER_INTERACTION,this.touchMode!==null&&this.touchMode(o,A)):(this.changeSource=ee.USER_INTERACTION,this.panPerPixel>0?this.movePan(o,A):this.handleSinglePointerMove(o,A)))},this.onPointerUp=i=>{const{element:n}=this,a=this.pointers.findIndex(o=>o.id===i.pointerId);a!==-1&&this.pointers.splice(a,1),this.panPerPixel>0&&!i.altKey&&this.resetRadius(),this.pointers.length===0?(n.removeEventListener("pointermove",this.onPointerMove),n.removeEventListener("pointerup",this.onPointerUp),n.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(i)):this.touchMode!==null&&this.onTouchChange(i),this.scene.element[$s].style.opacity=0,n.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=i=>{this.changeSource=ee.USER_INTERACTION;const n=i.deltaY*(i.deltaMode==1?18:1)*Cs*this.zoomSensitivity/30;this.userAdjustOrbit(0,0,n),i.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=i=>{const{changeSource:n}=this;this.changeSource=ee.USER_INTERACTION,(i.shiftKey&&this.enablePan?this.panKeyCodeHandler(i):this.orbitZoomKeyCodeHandler(i))?(i.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=n},this._options=Object.assign({},iA),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:e}=this;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||e.addEventListener("wheel",this.onWheel),e.addEventListener("keydown",this.onKeyDown),e.addEventListener("touchmove",()=>{},{passive:!1}),e.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:e}=this;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),e.removeEventListener("pointercancel",this.onPointerUp),e.removeEventListener("wheel",this.onWheel),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("contextmenu",this.onContext),e.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(e){this._disableZoom!=e&&(this._disableZoom=e,e===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(e=new Os){return e.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(e){Object.assign(this._options,e),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(e,t){this.camera.far=t===0?2:t,this.camera.near=Math.max(e,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(e){this.camera.aspect=e,this.camera.updateProjectionMatrix()}setOrbit(e=this.goalSpherical.theta,t=this.goalSpherical.phi,s=this.goalSpherical.radius){const{minimumAzimuthalAngle:i,maximumAzimuthalAngle:n,minimumPolarAngle:a,maximumPolarAngle:o,minimumRadius:A,maximumRadius:c}=this._options,{theta:h,phi:l,radius:d}=this.goalSpherical,u=Oe(e,i,n);!isFinite(i)&&!isFinite(n)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-u)+u);const g=Oe(t,a,o),p=Oe(s,A,c);return u===h&&g===l&&p===d||!isFinite(u)||!isFinite(g)||!isFinite(p)?!1:(this.goalSpherical.theta=u,this.goalSpherical.phi=g,this.goalSpherical.radius=p,this.goalSpherical.makeSafe(),!0)}setRadius(e){this.goalSpherical.radius=e,this.setOrbit()}setFieldOfView(e){const{minimumFieldOfView:t,maximumFieldOfView:s}=this._options;e=Oe(e,t,s),this.goalLogFov=Math.log(e)}setDamperDecayTime(e){this.thetaDamper.setDecayTime(e),this.phiDamper.setDecayTime(e),this.radiusDamper.setDecayTime(e),this.fovDamper.setDecayTime(e)}adjustOrbit(e,t,s){const{theta:i,phi:n,radius:a}=this.goalSpherical,{minimumRadius:o,maximumRadius:A,minimumFieldOfView:c,maximumFieldOfView:h}=this._options,l=this.spherical.theta-i,d=Math.PI-.001,u=i-Oe(e,-d-l,d-l),g=n-t,p=s===0?0:((s>0?A:o)-a)/(Math.log(s>0?h:c)-this.goalLogFov),f=a+s*(isFinite(p)?p:(A-o)*2);if(this.setOrbit(u,g,f),s!==0){const b=this.goalLogFov+s;this.setFieldOfView(Math.exp(b))}}jumpToGoal(){this.update(0,Zl)}update(e,t){if(this.isStationary())return!1;const{maximumPolarAngle:s,maximumRadius:i}=this._options,n=this.spherical.theta-this.goalSpherical.theta;return Math.abs(n)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(n)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,t,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,t,s),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,t,i),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,t,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:e}=this.element;if(this._interactionEnabled){const{touchAction:t}=this._options;this._disableZoom&&t!=="none"?e.touchAction="manipulation":e.touchAction=t}else e.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Xc(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(e,t,s){this.adjustOrbit(e*this.orbitSensitivity*this.inputSensitivity,t*this.orbitSensitivity*this.inputSensitivity,s*this.inputSensitivity)}wrapAngle(e){const t=(e+Math.PI)/(2*Math.PI);return(t-Math.floor(t))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(e){return 2*Math.PI*e/this.scene.height}twoTouchDistance(e,t){const{clientX:s,clientY:i}=e,{clientX:n,clientY:a}=t,o=n-s,A=a-i;return Math.sqrt(o*o+A*A)}handleSinglePointerMove(e,t){const s=this.pixelLengthToSphericalAngle(e),i=this.pixelLengthToSphericalAngle(t);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(s,i,0)}initializePan(){const{theta:e,phi:t}=this.spherical,s=e-this.scene.yaw;this.panPerPixel=mp*this.panSensitivity/this.scene.height,this.panProjection.set(-Math.cos(s),-Math.cos(t)*Math.sin(s),0,0,Math.sin(t),0,Math.sin(s),-Math.cos(t)*Math.cos(s),0)}movePan(e,t){const{scene:s}=this,i=tA.set(e,t,0).multiplyScalar(this.inputSensitivity),n=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;i.multiplyScalar(n);const a=s.getTarget();a.add(i.applyMatrix3(this.panProjection)),s.boundingSphere.clampPoint(a,a),s.setTarget(a.x,a.y,a.z)}recenter(e){if(performance.now()>this.startTime+bp||Math.abs(e.clientX-this.startPointerPosition.clientX)>eA||Math.abs(e.clientY-this.startPointerPosition.clientY)>eA)return;const{scene:t}=this,s=t.positionAndNormalFromPoint(t.getNDC(e.clientX,e.clientY));if(s==null){const{cameraTarget:i}=t.element;t.element.cameraTarget="",t.element.cameraTarget=i,this.userAdjustOrbit(0,0,1)}else t.target.worldToLocal(s.position),t.setTarget(s.position.x,s.position.y,s.position.z)}resetRadius(){const{scene:e}=this,t=e.positionAndNormalFromPoint(Ip.set(0,0));if(t==null)return;e.target.worldToLocal(t.position);const s=e.getTarget(),{theta:i,phi:n}=this.spherical,a=i-e.yaw,o=tA.set(Math.sin(n)*Math.sin(a),Math.cos(n),Math.sin(n)*Math.cos(a)),A=o.dot(t.position.sub(s));s.add(o.multiplyScalar(A)),e.setTarget(s.x,s.y,s.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-A)}onTouchChange(e){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),e.altKey||(this.scene.element[$s].style.opacity=1))}}onMouseDown(e){this.panPerPixel=0,this.enablePan&&(e.button===2||e.ctrlKey||e.metaKey||e.shiftKey)&&(this.initializePan(),this.scene.element[$s].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(e){let t=!0;switch(e.key){case"PageUp":this.userAdjustOrbit(0,0,Cs*this.zoomSensitivity);break;case"PageDown":this.userAdjustOrbit(0,0,-1*Cs*this.zoomSensitivity);break;case"ArrowUp":this.userAdjustOrbit(0,-Es,0);break;case"ArrowDown":this.userAdjustOrbit(0,Es,0);break;case"ArrowLeft":this.userAdjustOrbit(-Es,0,0);break;case"ArrowRight":this.userAdjustOrbit(Es,0,0);break;default:t=!1;break}return t}panKeyCodeHandler(e){this.initializePan();let t=!0;switch(e.key){case"ArrowUp":this.movePan(0,-1*Bs);break;case"ArrowDown":this.movePan(0,Bs);break;case"ArrowLeft":this.movePan(-1*Bs,0);break;case"ArrowRight":this.movePan(Bs,0);break;default:t=!1;break}return t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=30,sA=.8,nA=1.5,Bp=20,yp=.2,wp=.25,Qp=10,Vt=150,aA=5,vp=.1,At={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},nr={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},Qi=new k,Kt=new ss,Sp=new pt,xp=new k,Rp=new Xs(45,1,.1,100),rA=new un().setFromPoints([new k(0,0,0),new k(0,0,-1)]),Dp=new mn;class Tp extends fn{constructor(e){super(),this.renderer=e,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.xrMode=null,this.controller1=null,this.controller2=null,this.selectedController=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new k,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new k,this.relativeOrientation=new ss,this.scaleLine=new za(rA),this.firstRatio=0,this.lastAngle=0,this.goalPosition=new k,this.goalYaw=0,this.goalScale=1,this.xDamper=new Ie,this.yDamper=new Ie,this.zDamper=new Ie,this.yawDamper=new Ie,this.pitchDamper=new Ie,this.rollDamper=new Ie,this.scaleDamper=new Ie,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onControllerSelectStart=t=>{const s=this.presentedScene,i=t.target;if(this.placementBox.controllerIntersection(s,i)!=null)this.selectedController!=null&&(this.selectedController.userData.line.visible=!1,s.canScale&&(this.isTwoFingering=!0,this.firstRatio=this.controllerSeparation()/s.pivot.scale.x,this.scaleLine.visible=!0)),i.attach(s.pivot),this.selectedController=i,s.setShadowIntensity(.01);else{const n=i===this.controller1?this.controller2:this.controller1;this.relativeOrientation.copy(i.quaternion).invert().multiply(s.pivot.getWorldQuaternion(Kt)),n.userData.turning=!1,i.userData.turning=!0,i.userData.line.visible=!1}},this.onControllerSelectEnd=t=>{const s=t.target;if(s.userData.turning=!1,s.userData.line.visible=!0,this.isTwoFingering=!1,this.scaleLine.visible=!1,this.selectedController!=null&&this.selectedController!=s)return;const i=this.presentedScene;i.attach(i.pivot),this.selectedController=null,this.goalYaw=Math.atan2(i.pivot.matrix.elements[8],i.pivot.matrix.elements[10]),this.goalPosition.x=i.pivot.position.x,this.goalPosition.z=i.pivot.position.z},this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new xo(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=t=>{const s=this.transientHitTestSource;if(s==null)return;const i=this.frame.getHitTestResultsForTransientInput(s),n=this.presentedScene,a=this.placementBox;if(i.length===1){this.inputSource=t.inputSource;const{axes:o}=this.inputSource.gamepad,A=a.getHit(this.presentedScene,o[0],o[1]);a.show=!0,A!=null?(this.isTranslating=!0,this.lastDragPosition.copy(A)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=o[0]*nA)}else if(i.length===2){a.show=!0,this.isTwoFingering=!0;const{separation:o}=this.fingerPolar(i);this.firstRatio=o/n.pivot.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=e.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){eo();const e=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:[],optionalFeatures:["hit-test","dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(e),this.threeRenderer.xr.cameraAutoUpdate=!1,e}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return eo(),await navigator.xr.isSessionSupported("immersive-ar")}catch(e){return console.warn("Request to present in WebXR denied:"),console.warn(e),console.warn("Falling back to next ar-mode"),!1}}async present(e,t=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let s=new Promise((c,h)=>{requestAnimationFrame(()=>c())});e.setHotspotsVisibility(!1),e.queueRender(),await s,this._presentedScene=e,this.overlay=e.element.shadowRoot.querySelector("div.default"),t===!0&&(this.xrLight=new kg(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const c=this.presentedScene;c.add(this.xrLight),c.environment=this.xrLight.environment}));const i=await this.resolveARSession();i.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const n=e.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");n.classList.add("enabled"),n.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=n;const a=await i.requestReferenceSpace("viewer");this.xrMode=i.interactionMode,this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=e.yaw,this.goalYaw=e.yaw,this.goalScale=1,e.setBackground(null),this.oldShadowIntensity=e.shadowIntensity,e.setShadowIntensity(.01),this.oldTarget.copy(e.getTarget()),e.element.addEventListener("load",this.onUpdateScene);const o=Bp*Math.PI/180,A=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(o),z:-Math.cos(o)});i.requestHitTestSource({space:a,offsetRay:A}).then(c=>{this.initialHitSource=c}),this.xrMode!=="screen-space"&&(this.setupControllers(),this.xDamper.setDecayTime(Vt),this.yDamper.setDecayTime(Vt),this.zDamper.setDecayTime(Vt),this.yawDamper.setDecayTime(Vt),this.pitchDamper.setDecayTime(Vt),this.rollDamper.setDecayTime(Vt)),this.currentSession=i,this.placementBox=new xo(e,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:At.SESSION_STARTED})}setupControllers(){this.controller1=this.threeRenderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd),this.controller2=this.threeRenderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onControllerSelectStart),this.controller2.addEventListener("selectend",this.onControllerSelectEnd);const e=this.presentedScene;if(e.add(this.controller1),e.add(this.controller2),!this.controller1.userData.line){const t=new za(rA);t.name="line",t.scale.z=aA,this.controller1.userData.turning=!1,this.controller1.userData.line=t,this.controller1.add(t),this.controller2.userData.turning=!1;const s=t.clone();this.controller2.userData.line=s,this.controller2.add(s),this.scaleLine.name="scale line",this.scaleLine.visible=!1,this.controller1.add(this.scaleLine);const{size:i}=e,n=vp/Math.max(i.x,i.y,i.z),a=new ue(Dp);a.name="box",a.scale.copy(i).multiplyScalar(n),a.visible=!1,this.controller1.userData.box=a,e.add(a);const o=a.clone();this.controller2.userData.box=o,e.add(o)}}hover(e){if(this.xrMode==="screen-space"||this.selectedController==e)return!1;const t=this.presentedScene,s=this.placementBox.controllerIntersection(t,e);return e.userData.box.visible=(s==null||e.userData.turning)&&!this.isTwoFingering,e.userData.line.scale.z=s==null?aA:s.distance,s!=null}controllerSeparation(){return this.controller1.position.distanceTo(this.controller2.position)}async stopPresenting(){if(!this.isPresenting)return;const e=new Promise(t=>{this.resolveCleanup=t});try{await this.currentSession.end(),await e}catch(t){console.warn("Error while trying to end WebXR AR session"),console.warn(t),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const e=this.presentedScene;if(e!=null){const t=e.getTarget();this.oldTarget.copy(t),this.placeOnWall?t.z=e.boundingBox.min.z:t.y=e.boundingBox.min.y,e.setTarget(t.x,t.y,t.z)}}postSessionCleanup(){const e=this.currentSession;e!=null&&(e.removeEventListener("selectstart",this.onSelectStart),e.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const t=this.presentedScene;if(this._presentedScene=null,t!=null){const{element:a}=t;this.xrLight!=null&&(t.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),t.add(t.pivot),t.pivot.quaternion.set(0,0,0,1),t.pivot.position.set(0,0,0),t.pivot.scale.set(1,1,1),t.setShadowOffset(0);const o=this.turntableRotation;o!=null&&(t.yaw=o);const A=this.oldShadowIntensity;A!=null&&t.setShadowIntensity(A),t.setEnvironmentAndSkybox(a[Ui],a[Oi]);const c=this.oldTarget;t.setTarget(c.x,c.y,c.z),t.xrCamera=null,t.element.removeEventListener("load",this.onUpdateScene),t.orientHotspots(0);const{width:h,height:l}=a.getBoundingClientRect();t.setSize(h,l),requestAnimationFrame(()=>{t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:ee.NONE}}))})}this.renderer.height=0;const s=this.exitWebXRButtonContainer;s!=null&&(s.classList.remove("enabled"),s.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const i=this.transientHitTestSource;i!=null&&(i.cancel(),this.transientHitTestSource=null);const n=this.initialHitSource;n!=null&&(n.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.xrMode!=="screen-space"&&(this.controller1!=null&&(this.controller1.userData.turning=!1,this.controller1.userData.box.visible=!1,this.controller1.userData.line.visible=!0,this.controller1.removeEventListener("selectstart",this.onControllerSelectStart),this.controller1.removeEventListener("selectend",this.onControllerSelectEnd),this.controller1.removeFromParent(),this.controller1=null),this.controller2!=null&&(this.controller2.userData.turning=!1,this.controller2.userData.box.visible=!1,this.controller2.userData.line.visible=!0,this.controller2.removeEventListener("selectstart",this.onControllerSelectStart),this.controller2.removeEventListener("selectend",this.onControllerSelectEnd),this.controller2.removeFromParent(),this.controller2=null),this.selectedController=null,this.scaleLine.visible=!1),this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:At.NOT_PRESENTING})}updateView(e){const t=this.presentedScene,s=this.threeRenderer.xr;s.updateCamera(Rp),t.xrCamera=s.getCamera();const{elements:i}=t.getCamera().matrixWorld;if(t.orientHotspots(Math.atan2(i[1],i[5])),this.initialized||(this.placeInitially(),this.initialized=!0),e.requestViewportScale&&e.recommendedViewportScale){const a=e.recommendedViewportScale;e.requestViewportScale(Math.max(a,wp))}const n=s.getBaseLayer();if(n!=null){const a=n instanceof XRWebGLLayer?n.getViewport(e):s.getBinding().getViewSubImage(n,e).viewport;this.threeRenderer.setViewport(a.x,a.y,a.width,a.height)}}placeInitially(){const e=this.presentedScene,{pivot:t,element:s}=e,{position:i}=t,n=e.getCamera(),{width:a,height:o}=this.overlay.getBoundingClientRect();e.setSize(a,o),n.projectionMatrixInverse.copy(n.projectionMatrix).invert();const{theta:A}=s.getCameraOrbit(),c=n.getWorldDirection(Qi);e.yaw=Math.atan2(-c.x,-c.z)-A,this.goalYaw=e.yaw;const h=Math.max(1,2*e.boundingSphere.radius);i.copy(n.position).add(c.multiplyScalar(h)),this.updateTarget();const l=e.getTarget();if(i.add(l).sub(this.oldTarget),this.goalPosition.copy(i),e.setHotspotsVisibility(!0),this.xrMode==="screen-space"){const{session:d}=this.frame;d.addEventListener("selectstart",this.onSelectStart),d.addEventListener("selectend",this.onSelectEnd),d.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(u=>{this.transientHitTestSource=u})}}getTouchLocation(){const{axes:e}=this.inputSource.gamepad;let t=this.placementBox.getExpandedHit(this.presentedScene,e[0],e[1]);return t!=null&&(Qi.copy(t).sub(this.presentedScene.getCamera().position),Qi.length()>Qp)?null:t}getHitPoint(e){const t=this.threeRenderer.xr.getReferenceSpace(),s=e.getPose(t);if(s==null)return null;const i=Sp.fromArray(s.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(i.elements[4],i.elements[6])),i.elements[5]>.75!==this.placeOnWall?xp.setFromMatrixPosition(i):null}moveToFloor(e){const t=this.initialHitSource;if(t==null)return;const s=e.getHitTestResults(t);if(s.length==0)return;const i=s[0],n=this.getHitPoint(i);n!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(n):this.goalPosition.y=n.y),t.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:At.OBJECT_PLACED}))}fingerPolar(e){const t=e[0].inputSource.gamepad.axes,s=e[1].inputSource.gamepad.axes,i=s[0]-t[0],n=s[1]-t[1],a=Math.atan2(n,i);let o=this.lastAngle-a;return o>Math.PI?o-=2*Math.PI:o<-Math.PI&&(o+=2*Math.PI),this.lastAngle=a,{separation:Math.sqrt(i*i+n*n),deltaYaw:o}}setScale(e){const t=e/this.firstRatio;this.goalScale=Math.abs(t-1)<yp?1:t}processInput(e){const t=this.transientHitTestSource;if(t==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const s=e.getHitTestResultsForTransientInput(t),i=this.presentedScene,n=i.pivot.scale.x;if(this.isTwoFingering){if(s.length<2)this.isTwoFingering=!1;else{const{separation:a,deltaYaw:o}=this.fingerPolar(s);this.placeOnWall===!1&&(this.goalYaw+=o),i.canScale&&this.setScale(a)}return}else if(s.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:a}=this.fingerPolar(s);this.firstRatio=a/n;return}if(this.isRotating){const a=this.inputSource.gamepad.axes[0]*nA;this.goalYaw+=a-this.lastAngle,this.lastAngle=a}else this.isTranslating&&s.forEach(a=>{if(a.inputSource!==this.inputSource)return;let o=null;if(a.results.length>0&&(o=this.getHitPoint(a.results[0])),o==null&&(o=this.getTouchLocation()),o!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const A=o.y-this.lastDragPosition.y;if(A<0){this.placementBox.offsetHeight=A/n,this.presentedScene.setShadowOffset(A);const c=Qi.copy(i.getCamera().position),h=-A/(c.y-o.y);c.multiplyScalar(h),o.multiplyScalar(1-h).add(c)}}this.goalPosition.add(o),this.lastDragPosition.copy(o)}})}moveScene(e){const t=this.presentedScene,{pivot:s}=t,i=this.placementBox;if(i.updateOpacity(e),this.controller1&&(this.controller1.userData.turning&&(s.quaternion.copy(this.controller1.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller2&&s.quaternion.premultiply(Kt.copy(this.controller2.quaternion).invert())),this.controller1.userData.box.position.copy(this.controller1.position),s.getWorldQuaternion(this.controller1.userData.box.quaternion)),this.controller2&&(this.controller2.userData.turning&&(s.quaternion.copy(this.controller2.quaternion).multiply(this.relativeOrientation),this.selectedController&&this.selectedController===this.controller1&&s.quaternion.premultiply(Kt.copy(this.controller1.quaternion).invert())),this.controller2.userData.box.position.copy(this.controller2.position),s.getWorldQuaternion(this.controller2.userData.box.quaternion)),this.controller1&&this.controller2&&this.isTwoFingering){const d=this.controllerSeparation();this.setScale(d),this.scaleLine.scale.z=-d,this.scaleLine.lookAt(this.controller2.position)}const n=t.pivot.scale.x;if(this.goalScale!==n){const d=this.scaleDamper.update(n,this.goalScale,e,1);t.pivot.scale.set(d,d,d)}if(s.parent!==t)return;const{position:a}=s,o=t.boundingSphere.radius,A=this.goalPosition;let c=ee.NONE;if(!A.equals(a)){c=ee.USER_INTERACTION;let{x:d,y:u,z:g}=a;if(d=this.xDamper.update(d,A.x,e,o),u=this.yDamper.update(u,A.y,e,o),g=this.zDamper.update(g,A.z,e,o),a.set(d,u,g),this.xrMode==="screen-space"&&!this.isTranslating){const p=A.y-u;this.placementComplete&&this.placeOnWall===!1?(i.offsetHeight=p/t.pivot.scale.x,t.setShadowOffset(p)):p===0&&(this.placementComplete=!0,i.show=!1,t.setShadowIntensity(sA))}this.xrMode!=="screen-space"&&A.equals(a)&&t.setShadowIntensity(sA)}t.updateTarget(e),Kt.setFromAxisAngle(Qi.set(0,1,0),this.goalYaw);const h=t.pivot.quaternion.angleTo(Kt),l=h-this.yawDamper.update(h,0,e,Math.PI);t.pivot.quaternion.rotateTowards(Kt,l),t.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:c}}))}onWebXRFrame(e,t){if(this.xrMode!=="screen-space"){const o=this.hover(this.controller1),A=this.hover(this.controller2);this.placementBox.show=(o||A)&&!this.isTwoFingering}this.frame=t,++this.frames;const s=this.threeRenderer.xr.getReferenceSpace(),i=t.getViewerPose(s);i==null&&this.tracking===!0&&this.frames>Cp&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:nr.NOT_TRACKING}));const n=this.presentedScene;if(i==null||n==null||!n.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:nr.TRACKING}));let a=!0;for(const o of i.views){if(this.updateView(o),a){this.moveToFloor(t),this.processInput(t);const A=e-this.lastTick;this.moveScene(A),this.renderer.preRender(n,e,A),this.lastTick=e,n.renderShadow(this.threeRenderer)}this.threeRenderer.render(n,n.getCamera()),a=!1}}}function Mp(r){const e=new Map,t=new Map,s=r.clone();return ph(r,s,function(i,n){e.set(n,i),t.set(i,n)}),s.traverse(function(i){if(!i.isSkinnedMesh)return;const n=i,a=e.get(i),o=a.skeleton.bones;n.skeleton=a.skeleton.clone(),n.bindMatrix.copy(a.bindMatrix),n.skeleton.bones=o.map(function(A){return t.get(A)}),n.bind(n.skeleton,n.bindMatrix)}),s}function ph(r,e,t){t(r,e);for(let s=0;s<r.children.length;s++)ph(r.children[s],e.children[s],t)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=Symbol("prepared"),an=Symbol("prepare"),Le=Symbol("preparedGLTF"),rn=Symbol("clone");class Fp{static prepare(e){if(e.scene==null)throw new Error("Model does not have a scene");if(e[oA])return e;const t=this[an](e);return t[oA]=!0,t}static[an](e){const{scene:t}=e,s=[t];return Object.assign(Object.assign({},e),{scene:t,scenes:s})}get parser(){return this[Le].parser}get animations(){return this[Le].animations}get scene(){return this[Le].scene}get scenes(){return this[Le].scenes}get cameras(){return this[Le].cameras}get asset(){return this[Le].asset}get userData(){return this[Le].userData}constructor(e){this[Le]=e}clone(){const e=this.constructor,t=this[rn]();return new e(t)}dispose(){this.scenes.forEach(e=>{e.traverse(t=>{const s=t;if(!s.material)return;(Array.isArray(s.material)?s.material:[s.material]).forEach(n=>{for(const a in n){const o=n[a];if(o instanceof He){const A=o.source.data;A.close!=null&&A.close(),o.dispose()}}n.dispose()}),s.geometry.dispose()})})}[rn](){const e=this[Le],t=Mp(this.scene);_p(t,this.scene);const s=[t],i=e.userData?Object.assign({},e.userData):{};return Object.assign(Object.assign({},e),{scene:t,scenes:s,userData:i})}}const _p=(r,e)=>{fh(r,e,(t,s)=>{s.userData.variantMaterials!==void 0&&(t.userData.variantMaterials=new Map(s.userData.variantMaterials)),s.userData.variantData!==void 0&&(t.userData.variantData=s.userData.variantData),s.userData.originalMaterial!==void 0&&(t.userData.originalMaterial=s.userData.originalMaterial)})},fh=(r,e,t)=>{t(r,e);for(let s=0;s<r.children.length;s++)fh(r.children[s],e.children[s],t)},AA=Symbol("threeGLTF"),cA=Symbol("gltf"),lA=Symbol("gltfElementMap"),hA=Symbol("threeObjectMap"),dA=Symbol("parallelTraverseThreeScene"),uA=Symbol("correlateOriginalThreeGLTF"),gA=Symbol("correlateCloneThreeGLTF");class is{static from(e,t){return t!=null?this[gA](e,t):this[uA](e)}static[uA](e){const t=e.parser.json,s=e.parser.associations,i=new Map,n={name:"Default"},a={index:-1};for(const o of s.keys())o instanceof Gs&&s.get(o)==null&&(a.index<0&&(t.materials==null&&(t.materials=[]),a.index=t.materials.length,t.materials.push(n)),o.name=n.name,s.set(o,{materials:a.index}));for(const[o,A]of s){A&&(o.userData=o.userData||{},o.userData.associations=A);for(const c in A)if(c!=null&&c!=="primitives"){const h=c,d=(t[h]||[])[A[h]];if(d==null)continue;let u=i.get(d);u==null&&(u=new Set,i.set(d,u)),u.add(o)}}return new is(e,t,s,i)}static[gA](e,t){const s=t.threeGLTF,i=t.gltf,n=JSON.parse(JSON.stringify(i)),a=new Map,o=new Map;for(let A=0;A<s.scenes.length;A++)this[dA](s.scenes[A],e.scenes[A],(c,h)=>{const l=t.threeObjectMap.get(c);if(l!=null){for(const d in l)if(d!=null&&d!=="primitives"){const u=d,g=l[u],p=n[u][g],f=a.get(h)||{};f[u]=g,a.set(h,f);const b=o.get(p)||new Set;b.add(h),o.set(p,b)}}});return new is(e,n,a,o)}static[dA](e,t,s){const i=(n,a)=>{if(s(n,a),n.isObject3D){const o=n,A=a;if(o.material)if(Array.isArray(o.material))for(let c=0;c<o.material.length;++c)s(o.material[c],A.material[c]);else s(o.material,A.material);for(let c=0;c<n.children.length;++c)i(n.children[c],a.children[c])}};i(e,t)}get threeGLTF(){return this[AA]}get gltf(){return this[cA]}get gltfElementMap(){return this[lA]}get threeObjectMap(){return this[hA]}constructor(e,t,s,i){this[AA]=e,this[cA]=t,this[lA]=i,this[hA]=s}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=Symbol("correlatedSceneGraph");class kp extends Fp{static[an](e){const t=super[an](e);t[vi]==null&&(t[vi]=is.from(t));const{scene:s}=t,i=new Er(void 0,1/0);return s.traverse(n=>{n.renderOrder=1e3,n.frustumCulled=!1,n.name||(n.name=n.uuid);const a=n;if(a.material){const{geometry:o}=a;a.castShadow=!0,a.isSkinnedMesh&&(o.boundingSphere=i,o.boundingBox=null);const A=a.material;if(A.isMeshBasicMaterial===!0&&(A.toneMapped=!1),A.shadowSide=Ir,A.aoMap){const{gltf:c,threeObjectMap:h}=t[vi],l=h.get(A);if(c.materials!=null&&l!=null&&l.materials!=null){const d=c.materials[l.materials];d.occlusionTexture&&d.occlusionTexture.texCoord===0&&o.attributes.uv!=null&&o.setAttribute("uv2",o.attributes.uv)}}}}),t}get correlatedSceneGraph(){return this[Le][vi]}[rn](){const e=super[rn](),t=new Map;return e.scene.traverse(s=>{const i=s;if(i.material){const a=i.material;if(a!=null){if(t.has(a.uuid)){i.material=t.get(a.uuid);return}i.material=a.clone(),t.set(a.uuid,i.material)}}const n=s;n.target!==void 0&&n.add(n.target)}),e[vi]=is.from(e,this.correlatedSceneGraph),e}}const mh=(r,e,t)=>{let s;switch(r){case q:s=new Uint8ClampedArray(e*t*4);break;case de:s=new Uint16Array(e*t*4);break;case Td:s=new Uint32Array(e*t*4);break;case Dd:s=new Int8Array(e*t*4);break;case Rd:s=new Int16Array(e*t*4);break;case xd:s=new Int32Array(e*t*4);break;case ke:s=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return s};let ys;const Lp=(r,e,t,s)=>{if(ys!==void 0)return ys;const i=new Wi(1,1,s);e.setRenderTarget(i);const n=new ue(new ns,new Pe({color:16777215}));e.render(n,t),e.setRenderTarget(null);const a=mh(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),n.geometry.dispose(),n.material.dispose(),ys=a[0]!==0,ys};class Sr{constructor(e){var t,s,i,n,a,o,A,c,h,l,d,u,g,p,f,b;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(I){throw this._renderer.setRenderTarget(null),I}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const E={format:Re,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter:se,minFilter:((A=e.renderTargetOptions)===null||A===void 0?void 0:A.minFilter)!==void 0?(c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter:se,samples:((h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.samples:void 0,wrapS:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.wrapS)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.wrapS:Fe,wrapT:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapT)!==void 0?(p=e.renderTargetOptions)===null||p===void 0?void 0:p.wrapT:Fe};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Sr.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new as,this._camera=new pn,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Lp(this._type,this._renderer,this._camera,E)){let I;switch(this._type){case de:I=this._renderer.extensions.has("EXT_color_buffer_float")?ke:void 0;break}I!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ke}`),this._type=I):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ue(new ns,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Wi(this.width,this.height,E),this._renderTarget.texture.mapping=((f=e.renderTargetOptions)===null||f===void 0?void 0:f.mapping)!==void 0?(b=e.renderTargetOptions)===null||b===void 0?void 0:b.mapping:Zs}static instantiateRenderer(){const e=new Zc;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=mh(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Yc(this.toArray(),this.width,this.height,Re,this._type,(e==null?void 0:e.mapping)||Zs,(e==null?void 0:e.wrapS)||Fe,(e==null?void 0:e.wrapT)||Fe,(e==null?void 0:e.magFilter)||se,(e==null?void 0:e.minFilter)||se,(e==null?void 0:e.anisotropy)||1,ie);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Xi&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof He&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof He&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Gp=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Np=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class Up extends Xi{constructor({gamma:e,offsetHdr:t,offsetSdr:s,gainMapMin:i,gainMapMax:n,maxDisplayBoost:a,hdrCapacityMin:o,hdrCapacityMax:A,sdr:c,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:Gp,fragmentShader:Np,uniforms:{sdr:{value:c},gainMap:{value:h},gamma:{value:new k(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new k().fromArray(t)},offsetSdr:{value:new k().fromArray(s)},gainMapMin:{value:new k().fromArray(i)},gainMapMax:{value:new k().fromArray(n)},weightFactor:{value:(Math.log2(a)-o)/(A-o)}},blending:el,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=o,this._hdrCapacityMax=A,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class bh extends Error{}class Ih extends Error{}const Si=(r,e,t)=>{const s=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(s)return s[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const n=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return n&&n.length===3?n.map(a=>a.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},Op=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const s=e.indexOf("x:xmpmeta>",t),i=e.slice(t,s+10);try{const n=Si(i,"hdrgm:GainMapMin","0"),a=Si(i,"hdrgm:GainMapMax"),o=Si(i,"hdrgm:Gamma","1"),A=Si(i,"hdrgm:OffsetSDR","0.015625"),c=Si(i,"hdrgm:OffsetHDR","0.015625"),h=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),l=h?h[1]:"0",d=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!d)throw new Error("Incomplete gainmap metadata");const u=d[1];return{gainMapMin:Array.isArray(n)?n.map(g=>parseFloat(g)):[parseFloat(n),parseFloat(n),parseFloat(n)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetSdr:Array.isArray(A)?A.map(g=>parseFloat(g)):[parseFloat(A),parseFloat(A),parseFloat(A)],offsetHdr:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(l),hdrCapacityMax:parseFloat(u)}}catch{}t=e.indexOf("<x:xmpmeta",s)}};class Pp{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,s)=>{const i=this.options.debug,n=new DataView(e.buffer);if(n.getUint16(0)!==65496){s(new Error("Not a valid jpeg"));return}const a=n.byteLength;let o=2,A=0,c;for(;o<a;){if(++A>250){s(new Error(`Found no marker after ${A} loops `));return}if(n.getUint8(o)!==255){s(new Error(`Not a valid marker at offset 0x${o.toString(16)}, found: 0x${n.getUint8(o).toString(16)}`));return}if(c=n.getUint8(o+1),i&&console.log(`Marker: ${c.toString(16)}`),c===226){i&&console.log("Found APP2 marker (0xffe2)");const h=o+4;if(n.getUint32(h)===1297106432){const l=h+4;let d;if(n.getUint16(l)===18761)d=!1;else if(n.getUint16(l)===19789)d=!0;else{s(new Error("No valid endianness marker found in TIFF header"));return}if(n.getUint16(l+2,!d)!==42){s(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const u=n.getUint32(l+4,!d);if(u<8){s(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=l+u,p=n.getUint16(g,!d),f=g+2;let b=0;for(let m=f;m<f+12*p;m+=12)n.getUint16(m,!d)===45057&&(b=n.getUint32(m+8,!d));const I=g+2+p*12+4,C=[];for(let m=I;m<I+b*16;m+=16){const y={MPType:n.getUint32(m,!d),size:n.getUint32(m+4,!d),dataOffset:n.getUint32(m+8,!d),dependantImages:n.getUint32(m+12,!d),start:-1,end:-1,isFII:!1};y.dataOffset?(y.start=l+y.dataOffset,y.isFII=!1):(y.start=0,y.isFII=!0),y.end=y.start+y.size,C.push(y)}if(this.options.extractNonFII&&C.length){const m=new Blob([n]),y=[];for(const v of C){if(v.isFII&&!this.options.extractFII)continue;const B=m.slice(v.start,v.end+1,"image/jpeg");y.push(B)}t(y)}}}o+=2+n.getUint16(o+2)}})}}const Hp=async r=>{const e=Op(r);if(!e)throw new Ih("Gain map XMP metadata not found");const s=await new Pp({extractFII:!0,extractNonFII:!0}).extract(r);if(s.length!==2)throw new bh("Gain map recovery image not found");return{sdr:new Uint8Array(await s[0].arrayBuffer()),gainMap:new Uint8Array(await s[1].arrayBuffer()),metadata:e}},pA=r=>new Promise((e,t)=>{const s=document.createElement("img");s.onload=()=>{e(s)},s.onerror=i=>{t(i)},s.src=URL.createObjectURL(r)});class qp extends dn{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Md}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new Up({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new He,sdr:new He});return new Sr({width:16,height:16,type:de,colorSpace:ie,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,s,i){const n=i?new Blob([i],{type:"image/jpeg"}):void 0,a=new Blob([s],{type:"image/jpeg"});let o,A,c=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([n?pA(n):Promise.resolve(void 0),pA(a)]);A=d[0],o=d[1],c=!0}else{const d=await Promise.all([n?createImageBitmap(n,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);A=d[0],o=d[1]}const h=new He(A||new ImageData(2,2),Zs,Fe,Fe,se,Pr,Re,q,1,ie);h.flipY=c,h.needsUpdate=!0;const l=new He(o,Zs,Fe,Fe,se,Pr,Re,q,1,Be);l.flipY=c,l.needsUpdate=!0,e.width=o.width,e.height=o.height,e.material.gainMap=h,e.material.sdr=l,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class jp extends qp{load(e,t,s,i){const n=this.prepareQuadRenderer(),a=new ht(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async o=>{if(typeof o=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const A=new Uint8Array(o);let c,h,l;try{const d=await Hp(A);c=d.sdr,h=d.gainMap,l=d.metadata}catch(d){if(d instanceof Ih||d instanceof bh)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},c=A;else throw d}try{await this.render(n,l,c,h)}catch(d){this.manager.itemError(e),typeof i=="function"&&i(d),n.disposeOnDemandRenderer();return}typeof t=="function"&&t(n),this.manager.itemEnd(e),n.disposeOnDemandRenderer()},s,o=>{this.manager.itemError(e),typeof i=="function"&&i(o)}),n}}class $p extends Fd{constructor(e){super(e),this.type=de}parse(e){const a=function(B,Q){switch(B){case 1:throw new Error("THREE.HDRLoader: Read Error: "+(Q||""));case 2:throw new Error("THREE.HDRLoader: Write Error: "+(Q||""));case 3:throw new Error("THREE.HDRLoader: Bad File Format: "+(Q||""));default:case 4:throw new Error("THREE.HDRLoader: Memory Error: "+(Q||""))}},h=`
`,l=function(B,Q,S){Q=Q||1024;let M=B.pos,L=-1,R=0,U="",T=String.fromCharCode.apply(null,new Uint16Array(B.subarray(M,M+128)));for(;0>(L=T.indexOf(h))&&R<Q&&M<B.byteLength;)U+=T,R+=T.length,M+=128,T+=String.fromCharCode.apply(null,new Uint16Array(B.subarray(M,M+128)));return-1<L?(B.pos+=R+L+1,U+T.slice(0,L)):!1},d=function(B){const Q=/^#\?(\S+)/,S=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,D=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,M=/^\s*FORMAT=(\S+)\s*$/,L=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,R={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let U,T;for((B.pos>=B.byteLength||!(U=l(B)))&&a(1,"no header found"),(T=U.match(Q))||a(3,"bad initial token"),R.valid|=1,R.programtype=T[1],R.string+=U+`
`;U=l(B),U!==!1;){if(R.string+=U+`
`,U.charAt(0)==="#"){R.comments+=U+`
`;continue}if((T=U.match(S))&&(R.gamma=parseFloat(T[1])),(T=U.match(D))&&(R.exposure=parseFloat(T[1])),(T=U.match(M))&&(R.valid|=2,R.format=T[1]),(T=U.match(L))&&(R.valid|=4,R.height=parseInt(T[1],10),R.width=parseInt(T[2],10)),R.valid&2&&R.valid&4)break}return R.valid&2||a(3,"missing format specifier"),R.valid&4||a(3,"missing image size specifier"),R},u=function(B,Q,S){const D=Q;if(D<8||D>32767||B[0]!==2||B[1]!==2||B[2]&128)return new Uint8Array(B);D!==(B[2]<<8|B[3])&&a(3,"wrong scanline width");const M=new Uint8Array(4*Q*S);M.length||a(4,"unable to allocate buffer space");let L=0,R=0;const U=4*D,T=new Uint8Array(4),H=new Uint8Array(U);let X=S;for(;X>0&&R<B.byteLength;){R+4>B.byteLength&&a(1),T[0]=B[R++],T[1]=B[R++],T[2]=B[R++],T[3]=B[R++],(T[0]!=2||T[1]!=2||(T[2]<<8|T[3])!=D)&&a(3,"bad rgbe scanline format");let j=0,J;for(;j<U&&R<B.byteLength;){J=B[R++];const N=J>128;if(N&&(J-=128),(J===0||j+J>U)&&a(3,"bad scanline data"),N){const $=B[R++];for(let ne=0;ne<J;ne++)H[j++]=$}else H.set(B.subarray(R,R+J),j),j+=J,R+=J}const G=D;for(let N=0;N<G;N++){let $=0;M[L]=H[N+$],$+=D,M[L+1]=H[N+$],$+=D,M[L+2]=H[N+$],$+=D,M[L+3]=H[N+$],L+=4}X--}return M},g=function(B,Q,S,D){const M=B[Q+3],L=Math.pow(2,M-128)/255;S[D+0]=B[Q+0]*L,S[D+1]=B[Q+1]*L,S[D+2]=B[Q+2]*L,S[D+3]=1},p=function(B,Q,S,D){const M=B[Q+3],L=Math.pow(2,M-128)/255;S[D+0]=cs.toHalfFloat(Math.min(B[Q+0]*L,65504)),S[D+1]=cs.toHalfFloat(Math.min(B[Q+1]*L,65504)),S[D+2]=cs.toHalfFloat(Math.min(B[Q+2]*L,65504)),S[D+3]=cs.toHalfFloat(1)},f=new Uint8Array(e);f.pos=0;const b=d(f),E=b.width,I=b.height,C=u(f.subarray(f.pos),E,I);let m,y,v;switch(this.type){case ke:v=C.length/4;const B=new Float32Array(v*4);for(let S=0;S<v;S++)g(C,S*4,B,S*4);m=B,y=ke;break;case de:v=C.length/4;const Q=new Uint16Array(v*4);for(let S=0;S<v;S++)p(C,S*4,Q,S*4);m=Q,y=de;break;default:throw new Error("THREE.HDRLoader: Unsupported type: "+this.type)}return{width:E,height:I,data:m,header:b.string,gamma:b.gamma,exposure:b.exposure,type:y}}setDataType(e){return this.type=e,this}load(e,t,s,i){function n(a,o){switch(a.type){case ke:case de:a.colorSpace=ie,a.minFilter=se,a.magFilter=se,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,o)}return super.load(e,n,s,i)}}class Vp extends $p{constructor(e){console.warn("RGBELoader has been deprecated. Please use HDRLoader instead."),super(e)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp={topLight:{intensity:500,position:[.418,16.199,.3]},room:{position:[-.757,13.219,.717],scale:[31.713,28.305,28.591]},boxes:[{position:[-10.906,2.009,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,.857,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:50,position:[-16.116,14.37,8.208],scale:[.1,2.428,2.739]},{intensity:50,position:[-16.109,18.021,-8.207],scale:[.1,2.425,2.751]},{intensity:17,position:[14.904,12.198,-1.832],scale:[.15,4.265,6.331]},{intensity:43,position:[-.462,8.89,14.52],scale:[4.38,5.441,.088]},{intensity:20,position:[3.235,11.486,-12.541],scale:[2.5,2,.1]},{intensity:100,position:[0,20,0],scale:[1,.1,1]}]},zp={topLight:{intensity:400,position:[.5,14,.5]},room:{position:[0,13.2,0],scale:[31.5,28.5,31.5]},boxes:[{position:[-10.906,-1,1.846],rotation:-.195,scale:[2.328,7.905,4.651]},{position:[-5.607,-.754,-.758],rotation:.994,scale:[1.97,1.534,3.955]},{position:[6.167,-.16,7.803],rotation:.561,scale:[3.927,6.285,3.687]},{position:[-2.017,.018,6.124],rotation:.333,scale:[2.002,4.566,2.064]},{position:[2.291,-.756,-2.621],rotation:-.286,scale:[1.546,1.552,1.496]},{position:[-2.193,-.369,-5.547],rotation:.516,scale:[3.875,3.487,2.986]}],lights:[{intensity:80,position:[-14,10,8],scale:[.1,2.5,2.5]},{intensity:80,position:[-14,14,-4],scale:[.1,2.5,2.5]},{intensity:23,position:[14,12,0],scale:[.1,5,5]},{intensity:16,position:[0,9,14],scale:[5,5,.1]},{intensity:80,position:[7,8,-14],scale:[2.5,2.5,.1]},{intensity:80,position:[-7,16,-14],scale:[2.5,2.5,.1]},{intensity:1,position:[0,20,0],scale:[.1,.1,.1]}]};class fA extends as{constructor(e){super(),this.position.y=-3.5;const t=new mn;t.deleteAttribute("uv");const s=new Ws({metalness:0,side:Br}),i=new Ws({metalness:0}),n=e=="legacy"?Kp:zp,a=new Pc(16777215,n.topLight.intensity,28,2);a.position.set(...n.topLight.position),this.add(a);const o=new ue(t,s);o.position.set(...n.room.position),o.scale.set(...n.room.scale),this.add(o);for(const A of n.boxes){const c=new ue(t,i);c.position.set(...A.position),c.rotation.set(0,A.rotation,0),c.scale.set(...A.scale),this.add(c)}for(const A of n.lights){const c=new ue(t,this.createAreaLightMaterial(A.intensity));c.position.set(...A.position),c.scale.set(...A.scale),this.add(c)}}createAreaLightMaterial(e){const t=new Pe;return t.color.setScalar(e),t}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=.04,zt=20,Yp=/\.hdr(\.js)?$/;class mA{constructor(e){this.threeRenderer=e,this.lottieLoaderUrl="",this._ldrLoader=null,this._imageLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}ldrLoader(e){return this._ldrLoader==null&&(this._ldrLoader=new qc),this._ldrLoader.setWithCredentials(e),this._ldrLoader}imageLoader(e){return this._imageLoader==null&&(this._imageLoader=new jp(this.threeRenderer)),this._imageLoader.setWithCredentials(e),this._imageLoader}hdrLoader(e){return this._hdrLoader==null&&(this._hdrLoader=new Vp,this._hdrLoader.setDataType(de)),this._hdrLoader.setWithCredentials(e),this._hdrLoader}async getLottieLoader(e){if(this._lottieLoader==null){const{LottieLoader:t}=await import(this.lottieLoaderUrl);this._lottieLoader=new t}return this._lottieLoader.setWithCredentials(e),this._lottieLoader}async loadImage(e,t){const s=await new Promise((i,n)=>this.ldrLoader(t).load(e,i,()=>{},n));return s.name=e,s.flipY=!1,s}async loadLottie(e,t,s){const i=await this.getLottieLoader(s);i.setQuality(t);const n=await new Promise((a,o)=>i.load(e,a,()=>{},o));return n.name=e,n}async loadEquirect(e,t=!1,s=()=>{}){try{const i=Yp.test(e),n=i?this.hdrLoader(t):this.imageLoader(t),a=await new Promise((o,A)=>n.load(e,c=>{const{renderTarget:h}=c;if(h!=null){const{texture:l}=h;c.dispose(!1),o(l)}else o(c)},c=>{s(c.loaded/c.total*.9)},A));return s(1),a.name=e,a.mapping=_d,i||(a.colorSpace=Be),a}finally{s&&s(1)}}async generateEnvironmentMapAndSkybox(e=null,t=null,s=()=>{},i=!1){const n=t!=="legacy";(t==="legacy"||t==="neutral")&&(t=null),t=hl(t);let a=Promise.resolve(null),o;e&&(a=this.loadEquirectFromUrl(e,i,s)),t?o=this.loadEquirectFromUrl(t,i,s):e?o=this.loadEquirectFromUrl(e,i,s):o=n?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[A,c]=await Promise.all([o,a]);if(A==null)throw new Error("Failed to load environment map.");return{environmentMap:A,skybox:c}}async loadEquirectFromUrl(e,t,s){if(!this.skyboxCache.has(e)){const i=this.loadEquirect(e,t,s);this.skyboxCache.set(e,i)}return this.skyboxCache.get(e)}async GenerateEnvironmentMap(e,t){await mu();const s=this.threeRenderer,i=new Wc(256,{generateMipmaps:!1,type:de,format:Re,colorSpace:ie,depthBuffer:!0}),n=new Hr(.1,100,i),a=n.renderTarget.texture;a.name=t;const o=s.outputColorSpace,A=s.toneMapping;return s.toneMapping=Gc,s.outputColorSpace=ie,n.update(s,e),this.blurCubemap(i,Jp),s.toneMapping=A,s.outputColorSpace=o,a}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new fA("legacy"),"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new fA("neutral"),"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(e,t){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(zt);const i=new mn,n=new ue(i,this.blurMaterial);this.blurScene=new as,this.blurScene.add(n)}const s=e.clone();this.halfblur(e,s,t,"latitudinal"),this.halfblur(s,e,t,"longitudinal")}halfblur(e,t,s,i){const a=e.width,o=isFinite(s)?Math.PI/(2*a):2*Math.PI/(2*zt-1),A=s/o,c=isFinite(s)?1+Math.floor(3*A):zt;c>zt&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${c} samples when the maximum is set to ${zt}`);const h=[];let l=0;for(let g=0;g<zt;++g){const p=g/A,f=Math.exp(-p*p/2);h.push(f),g==0?l+=f:g<c&&(l+=2*f)}for(let g=0;g<h.length;g++)h[g]=h[g]/l;const d=this.blurMaterial.uniforms;d.envMap.value=e.texture,d.samples.value=c,d.weights.value=h,d.latitudinal.value=i==="latitudinal",d.dTheta.value=o,new Hr(.1,100,t).update(this.threeRenderer,this.blurScene)}getBlurShader(e){const t=new Float32Array(e),s=new k(0,1,0);return new Xi({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:s}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:el,depthTest:!1,depthWrite:!1,side:Br})}async dispose(){for(const[,e]of this.skyboxCache)(await e).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=.2,aa=40,ra=60,bA=5,Jt=[1,.79,.62,.5,.4,.31,.25],Xp=3,IA="high-performance",Zp=1.3;class _e extends fn{static get singleton(){return this._singleton||(this._singleton=new _e({powerPreference:(self.ModelViewerElement||{}).powerPreference||IA,debug:io()})),this._singleton}static resetSingleton(){const e=this._singleton.dispose();for(const t of e)t.disconnectedCallback();this._singleton=new _e({powerPreference:(self.ModelViewerElement||{}).powerPreference||IA,debug:io()});for(const t of e)t.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return Jt[this.scaleStep]}set minScale(e){let t=1;for(;t<Jt.length&&!(Jt[t]<e);)++t;this.lastStep=t-1}constructor(e){super(),this.loader=new be(kp),this.width=0,this.height=0,this.dpr=1,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=Xp,this.avgFrameDuration=(ra+aa)/2,this.onWebGLContextLost=t=>{this.dispatchEvent({type:"contextlost",sourceEvent:t})},this.onWebGLContextRestored=()=>{var t;(t=this.textureUtils)===null||t===void 0||t.dispose(),this.textureUtils=new mA(this.threeRenderer);for(const s of this.scenes)s.element[nn]()},this.dpr=window.devicePixelRatio,this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new Zc({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:e.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.setPixelRatio(1),this.threeRenderer.debug={checkShaderErrors:!!e.debug,onShaderError:null},this.threeRenderer.toneMapping=Js}catch(t){console.warn(t)}this.arRenderer=new Tp(this),this.textureUtils=this.canRender?new mA(this.threeRenderer):null,be.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}registerScene(e){this.scenes.add(e),e.forceRescale();const t=new De;this.threeRenderer.getSize(t),e.canvas.width=t.x,e.canvas.height=t.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((s,i)=>this.render(s,i))}unregisterScene(e){this.scenes.delete(e),this.canvas3D.parentElement===e.canvas.parentElement&&e.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null)}displayCanvas(e){return e.element.modelIsVisible&&!this.multipleScenesVisible?this.canvas3D:e.element[lr]}countVisibleScenes(){const{canvas3D:e}=this;let t=0,s=null;for(const n of this.scenes){const{element:a}=n;a.modelIsVisible&&n.externalRenderer==null&&++t,e.parentElement===n.canvas.parentElement&&(s=n)}const i=t>1;if(s!=null){const n=i&&!this.multipleScenesVisible,a=!s.element.modelIsVisible;if(n||a){const{width:o,height:A}=this.sceneSize(s);this.copyPixels(s,o,A),e.parentElement.removeChild(e)}}this.multipleScenesVisible=i}updateRendererSize(){var e;const t=window.devicePixelRatio;if(t!==this.dpr)for(const n of this.scenes){const{element:a}=n;a[ni](a.getBoundingClientRect())}let s=0,i=0;for(const n of this.scenes)s=Math.max(s,n.width),i=Math.max(i,n.height);if(!(s===this.width&&i===this.height&&t===this.dpr)){this.width=s,this.height=i,this.dpr=t,s=Math.ceil(s*t),i=Math.ceil(i*t),this.canRender&&this.threeRenderer.setSize(s,i,!1);for(const n of this.scenes){const{canvas:a}=n;a.width=s,a.height=i,n.forceRescale(),(e=n.effectRenderer)===null||e===void 0||e.setSize(s,i)}}}updateRendererScale(e){const t=this.scaleStep;this.avgFrameDuration+=Oe(Wp*(e-this.avgFrameDuration),-bA,bA),this.avgFrameDuration>ra?++this.scaleStep:this.avgFrameDuration<aa&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),t!==this.scaleStep&&(this.avgFrameDuration=(ra+aa)/2)}shouldRender(e){if(e.shouldRender())e.scaleStep!=this.scaleStep&&(e.scaleStep=this.scaleStep,this.rescaleCanvas(e));else if(e.scaleStep!=0)e.scaleStep=0,this.rescaleCanvas(e);else return!1;return!0}rescaleCanvas(e){const t=Jt[e.scaleStep],s=Math.ceil(this.width/t),i=Math.ceil(this.height/t),{style:n}=e.canvas;n.width=`${s}px`,n.height=`${i}px`,this.canvas3D.style.width=`${s}px`,this.canvas3D.style.height=`${i}px`;const a=this.dpr*t,o=t<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";e.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:a,minimumDpr:this.dpr*Jt[this.lastStep],pixelWidth:Math.ceil(e.width*a),pixelHeight:Math.ceil(e.height*a),reason:o}}))}sceneSize(e){const{dpr:t}=this,s=Jt[e.scaleStep],i=Math.min(Math.ceil(e.width*s*t),this.canvas3D.width),n=Math.min(Math.ceil(e.height*s*t),this.canvas3D.height);return{width:i,height:n}}copyPixels(e,t,s){const i=e.context;if(i==null){console.log("could not acquire 2d context");return}i.clearRect(0,0,t,s),i.drawImage(this.canvas3D,0,0,t,s,0,0,t,s),e.canvas.classList.add("show")}orderedScenes(){const e=[];for(const t of[!1,!0])for(const s of this.scenes)s.element.modelIsVisible===t&&e.push(s);return e}get isPresenting(){return this.arRenderer.isPresenting}preRender(e,t,s){const{element:i,exposure:n,toneMapping:a}=e;i[je](t,s);const o=typeof n=="number"&&!Number.isNaN(n),A=i.environmentImage,c=i.skyboxImage,h=a===Js&&(A==="neutral"||A==="legacy"||!A&&!c);this.threeRenderer.toneMappingExposure=(o?n:1)*(h?Zp:1)}render(e,t){if(t!=null){this.arRenderer.onWebXRFrame(e,t);return}const s=e-this.lastTick;if(this.lastTick=e,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(s),this.renderedLastFrame=!1);const{canvas3D:i}=this;for(const n of this.orderedScenes()){const{element:a}=n;if(!a.loaded||!a.modelIsVisible&&n.renderCount>0||(this.preRender(n,e,s),!this.shouldRender(n)))continue;if(n.externalRenderer!=null){const c=n.getCamera();c.updateMatrix();const{matrix:h,projectionMatrix:l}=c,d=h.elements.slice(),u=n.getTarget();d[12]+=u.x,d[13]+=u.y,d[14]+=u.z,n.externalRenderer.render({viewMatrix:d,projectionMatrix:l.elements});continue}if(!a.modelIsVisible&&!this.multipleScenesVisible)for(const c of this.scenes)c.element.modelIsVisible&&c.queueRender();const{width:o,height:A}=this.sceneSize(n);n.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-A,o,A),n.effectRenderer!=null?n.effectRenderer.render(s):(this.threeRenderer.autoClear=!0,this.threeRenderer.toneMapping=n.toneMapping,this.threeRenderer.render(n,n.camera)),this.multipleScenesVisible||!n.element.modelIsVisible&&n.renderCount===0?this.copyPixels(n,o,A):i.parentElement!==n.canvas.parentElement&&(n.canvas.parentElement.appendChild(i),n.canvas.classList.remove("show")),n.hasRendered(),++n.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const e=[];for(const t of this.scenes)e.push(t.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),e}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=Symbol("correlatedObjects"),V=Symbol("onUpdate");class os{constructor(e,t){this[V]=e,this[O]=t}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Pe,ef=new ns(2,2);let tf=0;const me=Symbol("threeTexture"),CA=Symbol("threeTextures");class sf extends os{get[me](){var e;return(e=this[O])===null||e===void 0?void 0:e.values().next().value}get[CA](){return this[O]}constructor(e,t){super(e,new Set(t?[t]:[])),this[me].image.src||(this[me].image.src=t.name?t.name:"adhoc_image"+tf++),this[me].image.name||(this[me].image.name=t&&t.image&&t.image.src?t.image.src.split("/").pop():"adhoc_image")}get name(){return this[me].image.name||""}get uri(){return this[me].image.src}get bufferView(){return this[me].image.bufferView}get element(){const e=this[me];if(e&&(e.isCanvasTexture||e.isVideoTexture))return e.image}get animation(){const e=this[me];if(e&&e.isCanvasTexture&&e.animation)return e.animation}get type(){return this.uri!=null?"external":"embedded"}set name(e){for(const t of this[CA])t.image.name=e}update(){const e=this[me];e&&e.isCanvasTexture&&!e.animation&&(this[me].needsUpdate=!0,this[V]())}async createThumbnail(e,t){const s=new as;EA.map=this[me];const i=new ue(ef,EA);s.add(i);const n=new pn(-1,1,1,-1,0,1),{threeRenderer:a}=_e.singleton,o=new Wi(e,t);a.setRenderTarget(o),a.render(s,n),a.setRenderTarget(null);const A=new Uint8Array(e*t*4);a.readRenderTargetPixels(o,0,0,e,t,A),lt.width=e,lt.height=t;const c=lt.getContext("2d"),h=c.createImageData(e,t);return h.data.set(A),c.putImageData(h,0,0),new Promise(async(l,d)=>{lt.toBlob(u=>{if(!u)return d("Failed to capture thumbnail.");l(URL.createObjectURL(u))},"image/png")})}}var re;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.NearestMipmapNearest=9984]="NearestMipmapNearest",r[r.LinearMipmapNearest=9985]="LinearMipmapNearest",r[r.NearestMipmapLinear=9986]="NearestMipmapLinear",r[r.LinearMipmapLinear=9987]="LinearMipmapLinear"})(re||(re={}));var gt;(function(r){r[r.ClampToEdge=33071]="ClampToEdge",r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.Repeat=10497]="Repeat"})(gt||(gt={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new Map([[gt.Repeat,_t],[gt.ClampToEdge,Fe],[gt.MirroredRepeat,br]]),ar=new Map([[_t,gt.Repeat],[Fe,gt.ClampToEdge],[br,gt.MirroredRepeat]]),nf=new Map([[re.Nearest,ft],[re.Linear,se],[re.NearestMipmapNearest,gn],[re.LinearMipmapNearest,mr],[re.NearestMipmapLinear,fr],[re.LinearMipmapLinear,pi]]),Eh=new Map([[ft,re.Nearest],[se,re.Linear],[gn,re.NearestMipmapNearest],[mr,re.LinearMipmapNearest],[fr,re.NearestMipmapLinear],[pi,re.LinearMipmapLinear]]),af=new Map([[re.Nearest,ft],[re.Linear,se]]),Ch=new Map([[ft,re.Nearest],[se,re.Linear]]),rf=r=>Eh.has(r),of=r=>Ch.has(r),Af=r=>ar.has(r),cf=(r,e)=>{switch(r){case"minFilter":return rf(e);case"magFilter":return of(e);case"wrapS":case"wrapT":return Af(e);case"rotation":case"repeat":case"offset":return!0;default:throw new Error(`Cannot configure property "${r}" on Sampler`)}},Ye=Symbol("threeTexture"),yA=Symbol("threeTextures"),st=Symbol("setProperty");class lf extends os{get[Ye](){var e;return(e=this[O])===null||e===void 0?void 0:e.values().next().value}get[yA](){return this[O]}constructor(e,t){super(e,new Set(t?[t]:[]))}get name(){return this[Ye].name||""}get minFilter(){return Eh.get(this[Ye].minFilter)}get magFilter(){return Ch.get(this[Ye].magFilter)}get wrapS(){return ar.get(this[Ye].wrapS)}get wrapT(){return ar.get(this[Ye].wrapT)}get rotation(){return this[Ye].rotation}get scale(){return hr(this[Ye].repeat)}get offset(){return hr(this[Ye].offset)}setMinFilter(e){this[st]("minFilter",nf.get(e))}setMagFilter(e){this[st]("magFilter",af.get(e))}setWrapS(e){this[st]("wrapS",BA.get(e))}setWrapT(e){this[st]("wrapT",BA.get(e))}setRotation(e){e==null&&(e=0),this[st]("rotation",e)}setScale(e){e==null&&(e={u:1,v:1}),this[st]("repeat",new De(e.u,e.v))}setOffset(e){e==null&&(e={u:0,v:0}),this[st]("offset",new De(e.u,e.v))}[st](e,t){if(cf(e,t))for(const s of this[yA])s[e]=t,s.needsUpdate=!0;this[V]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=Symbol("image"),QA=Symbol("sampler"),vA=Symbol("threeTexture");class Bh extends os{get[vA](){var e;return(e=this[O])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,new Set(t?[t]:[])),this[QA]=new lf(e,t),this[wA]=new sf(e,t)}get name(){return this[vA].name||""}set name(e){for(const t of this[O])t.name=e}get sampler(){return this[QA]}get source(){return this[wA]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yh,wh,Qh;const vt=Symbol("texture"),St=Symbol("transform"),oa=Symbol("materials"),SA=Symbol("usage"),Yt=Symbol("onUpdate"),Hi=Symbol("activeVideo");var _;(function(r){r[r.Base=0]="Base",r[r.MetallicRoughness=1]="MetallicRoughness",r[r.Normal=2]="Normal",r[r.Occlusion=3]="Occlusion",r[r.Emissive=4]="Emissive",r[r.Clearcoat=5]="Clearcoat",r[r.ClearcoatRoughness=6]="ClearcoatRoughness",r[r.ClearcoatNormal=7]="ClearcoatNormal",r[r.SheenColor=8]="SheenColor",r[r.SheenRoughness=9]="SheenRoughness",r[r.Transmission=10]="Transmission",r[r.Thickness=11]="Thickness",r[r.Specular=12]="Specular",r[r.SpecularColor=13]="SpecularColor",r[r.Iridescence=14]="Iridescence",r[r.IridescenceThickness=15]="IridescenceThickness",r[r.Anisotropy=16]="Anisotropy"})(_||(_={}));class ri{constructor(e,t,s,i){this[yh]=null,this[wh]={rotation:0,scale:new De(1,1),offset:new De(0,0)},this[Qh]=!1,s&&(this[St].rotation=s.rotation,this[St].scale.copy(s.repeat),this[St].offset.copy(s.offset),this[vt]=new Bh(e,s)),this[Yt]=e,this[oa]=i,this[SA]=t}get texture(){return this[vt]}setTexture(e){var t,s;const i=e!=null?e.source[me]:null,n=(t=this[vt])===null||t===void 0?void 0:t.source[me];if(n!=null&&n.isVideoTexture?this[Hi]=!1:!((s=this[vt])===null||s===void 0)&&s.source.animation&&this[vt].source.animation.removeEventListener("enterFrame",this[Yt]),this[vt]=e,i!=null&&i.isVideoTexture){const o=i.image;if(this[Hi]=!0,o.requestVideoFrameCallback!=null){const A=()=>{this[Hi]&&(this[Yt](),o.requestVideoFrameCallback(A))};o.requestVideoFrameCallback(A)}else{const A=()=>{this[Hi]&&(this[Yt](),requestAnimationFrame(A))};requestAnimationFrame(A)}}else(e==null?void 0:e.source.animation)!=null&&e.source.animation.addEventListener("enterFrame",this[Yt]);let a=Be;if(this[oa])for(const o of this[oa]){switch(this[SA]){case _.Base:o.map=i;break;case _.MetallicRoughness:a=ie,o.metalnessMap=i,o.roughnessMap=i;break;case _.Normal:a=ie,o.normalMap=i;break;case _.Occlusion:a=ie,o.aoMap=i;break;case _.Emissive:o.emissiveMap=i;break;case _.Clearcoat:o.clearcoatMap=i;break;case _.ClearcoatRoughness:o.clearcoatRoughnessMap=i;break;case _.ClearcoatNormal:o.clearcoatNormalMap=i;break;case _.SheenColor:o.sheenColorMap=i;break;case _.SheenRoughness:o.sheenRoughnessMap=i;break;case _.Transmission:o.transmissionMap=i;break;case _.Thickness:o.thicknessMap=i;break;case _.Specular:o.specularIntensityMap=i;break;case _.SpecularColor:o.specularColorMap=i;break;case _.Iridescence:o.iridescenceMap=i;break;case _.IridescenceThickness:o.iridescenceThicknessMap=i;break;case _.Anisotropy:o.anisotropyMap=i;break}o.needsUpdate=!0}i&&(i.colorSpace=a,i.rotation=this[St].rotation,i.repeat=this[St].scale,i.offset=this[St].offset),this[Yt]()}}yh=vt,wh=St,Qh=Hi;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=Symbol("threeMaterial"),ws=Symbol("threeMaterials"),xA=Symbol("baseColorTexture"),RA=Symbol("metallicRoughnessTexture");class hf extends os{get[ws](){return this[O]}get[xi](){var e;return(e=this[O])===null||e===void 0?void 0:e.values().next().value}constructor(e,t){super(e,t);const{map:s,metalnessMap:i}=t.values().next().value;this[xA]=new ri(e,_.Base,s,t),this[RA]=new ri(e,_.MetallicRoughness,i,t)}get baseColorFactor(){const e=[0,0,0,this[xi].opacity];return this[xi].color.toArray(e),e}get metallicFactor(){return this[xi].metalness}get roughnessFactor(){return this[xi].roughness}get baseColorTexture(){return this[xA]}get metallicRoughnessTexture(){return this[RA]}setBaseColorFactor(e){const t=new he;e instanceof Array?t.fromArray(e):t.set(e);for(const s of this[ws])s.color.set(t),e instanceof Array&&e.length>3?s.opacity=e[3]:(e=[0,0,0,s.opacity],t.toArray(e));this[V]()}setMetallicFactor(e){for(const t of this[ws])t.metalness=e;this[V]()}setRoughnessFactor(e){for(const t of this[ws])t.roughness=e;this[V]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DA,TA;const MA=Symbol("pbrMetallicRoughness"),FA=Symbol("normalTexture"),_A=Symbol("occlusionTexture"),kA=Symbol("emissiveTexture"),Y=Symbol("backingThreeMaterial"),LA=Symbol("applyAlphaCutoff"),Aa=Symbol("getAlphaMode"),Wt=Symbol("lazyLoadGLTFInfo"),ca=Symbol("initialize"),rr=Symbol("getLoadedMaterial"),x=Symbol("ensureMaterialIsLoaded"),GA=Symbol("gltfIndex"),qi=Symbol("setActive"),ci=Symbol("variantIndices"),la=Symbol("isActive"),NA=Symbol("modelVariants"),ha=Symbol("name"),Ee=Symbol("pbrTextures");class da extends os{get[(DA=ci,TA=Ee,Y)](){return this[O].values().next().value}constructor(e,t,s,i,n,a,o=void 0){super(e,n),this[DA]=new Set,this[TA]=new Map,this[GA]=t,this[la]=s,this[NA]=i,this[ha]=a,o==null?this[ca]():this[Wt]=o}[ca](){const e=this[V],t=this[O];this[MA]=new hf(e,t);const{normalMap:s,aoMap:i,emissiveMap:n}=t.values().next().value;this[FA]=new ri(e,_.Normal,s,t),this[_A]=new ri(e,_.Occlusion,i,t),this[kA]=new ri(e,_.Emissive,n,t);const a=o=>{this[Ee].set(o,new ri(e,o,null,t))};a(_.Clearcoat),a(_.ClearcoatRoughness),a(_.ClearcoatNormal),a(_.SheenColor),a(_.SheenRoughness),a(_.Transmission),a(_.Thickness),a(_.Specular),a(_.SpecularColor),a(_.Iridescence),a(_.IridescenceThickness),a(_.Anisotropy)}async[rr](){if(this[Wt]!=null){const e=await this[Wt].doLazyLoad();return this[ca](),this[Wt]=void 0,this.ensureLoaded=async()=>{},e}return null}colorFromRgb(e){const t=new he;return e instanceof Array?t.fromArray(e):t.set(e),t}[x](){if(this[Wt]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[rr]()}get isLoaded(){return this[Wt]==null}get isActive(){return this[la]}[qi](e){this[la]=e}get name(){return this[ha]||""}set name(e){if(this[ha]=e,this[O]!=null)for(const t of this[O])t.name=e}get pbrMetallicRoughness(){return this[x](),this[MA]}get normalTexture(){return this[x](),this[FA]}get occlusionTexture(){return this[x](),this[_A]}get emissiveTexture(){return this[x](),this[kA]}get emissiveFactor(){return this[x](),this[Y].emissive.toArray()}get index(){return this[GA]}hasVariant(e){const t=this[NA].get(e);return t!=null&&this[ci].has(t.index)}setEmissiveFactor(e){this[x]();const t=this.colorFromRgb(e);for(const s of this[O])s.emissive.set(t);this[V]()}[Aa](){return this[Y].transparent?"BLEND":this[Y].alphaTest>0?"MASK":"OPAQUE"}[LA](){this[x]();for(const e of this[O])this[Aa]()==="MASK"?e.alphaTest==null&&(e.alphaTest=.5):e.alphaTest=void 0,e.needsUpdate=!0}setAlphaCutoff(e){this[x]();for(const t of this[O])t.alphaTest=e,t.needsUpdate=!0;this[LA](),this[V]()}getAlphaCutoff(){return this[x](),this[Y].alphaTest}setDoubleSided(e){this[x]();for(const t of this[O])t.side=e?dt:Ir,t.needsUpdate=!0;this[V]()}getDoubleSided(){return this[x](),this[Y].side==dt}setAlphaMode(e){this[x]();const t=(s,i)=>{s.transparent=i,s.depthWrite=!i};for(const s of this[O])t(s,e==="BLEND"),e==="MASK"?s.alphaTest=.5:s.alphaTest=void 0,s.needsUpdate=!0;this[V]()}getAlphaMode(){return this[x](),this[Aa]()}get emissiveStrength(){return this[x](),this[Y].emissiveIntensity}setEmissiveStrength(e){this[x]();for(const t of this[O])t.emissiveIntensity=e;this[V]()}get clearcoatFactor(){return this[x](),this[Y].clearcoat}get clearcoatRoughnessFactor(){return this[x](),this[Y].clearcoatRoughness}get clearcoatTexture(){return this[x](),this[Ee].get(_.Clearcoat)}get clearcoatRoughnessTexture(){return this[x](),this[Ee].get(_.ClearcoatRoughness)}get clearcoatNormalTexture(){return this[x](),this[Ee].get(_.ClearcoatNormal)}get clearcoatNormalScale(){return this[x](),this[Y].clearcoatNormalScale.x}setClearcoatFactor(e){this[x]();for(const t of this[O])t.clearcoat=e;this[V]()}setClearcoatRoughnessFactor(e){this[x]();for(const t of this[O])t.clearcoatRoughness=e;this[V]()}setClearcoatNormalScale(e){this[x]();for(const t of this[O])t.clearcoatNormalScale=new De(e,e);this[V]()}get ior(){return this[x](),this[Y].ior}setIor(e){this[x]();for(const t of this[O])t.ior=e;this[V]()}get sheenColorFactor(){return this[x](),this[Y].sheenColor.toArray()}get sheenColorTexture(){return this[x](),this[Ee].get(_.SheenColor)}get sheenRoughnessFactor(){return this[x](),this[Y].sheenRoughness}get sheenRoughnessTexture(){return this[x](),this[Ee].get(_.SheenRoughness)}setSheenColorFactor(e){this[x]();const t=this.colorFromRgb(e);for(const s of this[O])s.sheenColor.set(t),s.sheen=1;this[V]()}setSheenRoughnessFactor(e){this[x]();for(const t of this[O])t.sheenRoughness=e,t.sheen=1;this[V]()}get transmissionFactor(){return this[x](),this[Y].transmission}get transmissionTexture(){return this[x](),this[Ee].get(_.Transmission)}setTransmissionFactor(e){this[x]();for(const t of this[O])t.transmission=e;this[V]()}get thicknessFactor(){return this[x](),this[Y].thickness}get thicknessTexture(){return this[x](),this[Ee].get(_.Thickness)}get attenuationDistance(){return this[x](),this[Y].attenuationDistance}get attenuationColor(){return this[x](),this[Y].attenuationColor.toArray()}setThicknessFactor(e){this[x]();for(const t of this[O])t.thickness=e;this[V]()}setAttenuationDistance(e){this[x]();for(const t of this[O])t.attenuationDistance=e;this[V]()}setAttenuationColor(e){this[x]();const t=this.colorFromRgb(e);for(const s of this[O])s.attenuationColor.set(t);this[V]()}get specularFactor(){return this[x](),this[Y].specularIntensity}get specularTexture(){return this[x](),this[Ee].get(_.Specular)}get specularColorFactor(){return this[x](),this[Y].specularColor.toArray()}get specularColorTexture(){return this[x](),this[Ee].get(_.SheenColor)}setSpecularFactor(e){this[x]();for(const t of this[O])t.specularIntensity=e;this[V]()}setSpecularColorFactor(e){this[x]();const t=this.colorFromRgb(e);for(const s of this[O])s.specularColor.set(t);this[V]()}get iridescenceFactor(){return this[x](),this[Y].iridescence}get iridescenceTexture(){return this[x](),this[Ee].get(_.Iridescence)}get iridescenceIor(){return this[x](),this[Y].iridescenceIOR}get iridescenceThicknessMinimum(){return this[x](),this[Y].iridescenceThicknessRange[0]}get iridescenceThicknessMaximum(){return this[x](),this[Y].iridescenceThicknessRange[1]}get iridescenceThicknessTexture(){return this[x](),this[Ee].get(_.IridescenceThickness)}setIridescenceFactor(e){this[x]();for(const t of this[O])t.iridescence=e;this[V]()}setIridescenceIor(e){this[x]();for(const t of this[O])t.iridescenceIOR=e;this[V]()}setIridescenceThicknessMinimum(e){this[x]();for(const t of this[O])t.iridescenceThicknessRange[0]=e;this[V]()}setIridescenceThicknessMaximum(e){this[x]();for(const t of this[O])t.iridescenceThicknessRange[1]=e;this[V]()}get anisotropyStrength(){return this[x](),this[Y].anisotropy}get anisotropyRotation(){return this[x](),this[Y].anisotropyRotation}get anisotropyTexture(){return this[x](),this[Ee].get(_.Anisotropy)}setAnisotropyStrength(e){this[x]();for(const t of this[O])t.anisotropy=e;this[V]()}setAnisotropyRotation(e){this[x]();for(const t of this[O])t.anisotropyRotation=e;this[V]()}}let vh=class{constructor(e){this.name="",this.children=new Array,this.name=e}};class ua extends vh{constructor(e,t,s,i){super(e.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=e;const{gltf:n,threeGLTF:a,threeObjectMap:o}=i;this.parser=a.parser,this.modelVariants=s,this.mesh.userData.variantData=s;const A=o.get(e.material);A.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=A.materials:console.error(`Primitive (${e.name}) missing initial material reference.`);const c=e.userData.associations||{};if(c.meshes==null){console.error("Mesh is missing primitive index association");return}const d=((n.meshes||[])[c.meshes].primitives||[])[c.primitives];if(d==null){console.error("Mesh primitive definition is missing.");return}if(d.material!=null)this.materials.set(d.material,t[d.material]);else{const u=t.findIndex(g=>g.name==="Default");u>=0?this.materials.set(u,t[u]):console.warn("gltfPrimitive has no material!")}if(d.extensions&&d.extensions.KHR_materials_variants){const u=d.extensions.KHR_materials_variants,p=a.parser.json.extensions.KHR_materials_variants.variants;for(const f of u.mappings){const b=t[f.material];this.materials.set(f.material,b);for(const E of f.variants){const{name:I}=p[E];this.variantToMaterialMap.set(E,b),b[ci].add(E),s.has(I)||s.set(I,{name:I,index:E})}}}}async setActiveMaterial(e){const t=this.materials.get(e);if(e!==this.activeMaterialIdx){const s=t[O],i=await t[rr]();i!=null?this.mesh.material=i:this.mesh.material=s.values().next().value,this.parser.assignFinalMaterial(this.mesh),s.add(this.mesh.material),this.activeMaterialIdx=e}return this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(e){return this.materials.get(e)}async enableVariant(e){if(e==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(e)){const t=this.modelVariants.get(e);return this.enableVariantHelper(t.index)}return null}async enableVariantHelper(e){if(this.variantToMaterialMap!=null&&e!=null){const t=this.variantToMaterialMap.get(e);if(t!=null)return this.setActiveMaterial(t.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const e of this.variantToMaterialMap.keys()){const t=this.mesh.userData.variantMaterials.get(e);if(t.material!=null)continue;const s=await this.enableVariantHelper(e);s!=null&&(t.material=s)}}get variantInfo(){return this.variantToMaterialMap}addVariant(e,t){if(!this.ensureVariantIsUnused(t))return!1;this.modelVariants.has(t)||this.modelVariants.set(t,{name:t,index:this.modelVariants.size});const i=this.modelVariants.get(t).index;return e[ci].add(i),this.variantToMaterialMap.set(i,e),this.materials.set(e.index,e),this.updateVariantUserData(i,e),!0}deleteVariant(e){if(this.variantInfo.has(e)){this.variantInfo.delete(e);const t=this.mesh.userData.variantMaterials;t!=null&&t.delete(e)}}updateVariantUserData(e,t){t[ci].add(e),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(e,{material:t[O].values().next().value,gltfMaterialIndex:t.index})}ensureVariantIsUnused(e){const t=this.modelVariants.get(e);return t!=null&&this.variantInfo.has(t.index)?(console.warn(`Primitive cannot add variant '${e}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UA,OA,PA,HA,qA,jA;const Bt=Symbol("materials"),Qs=Symbol("hierarchy"),$A=Symbol("roots"),We=Symbol("primitives"),Sh=Symbol("prepareVariantsForExport"),xh=Symbol("switchVariant"),Rh=Symbol("materialFromPoint"),or=Symbol("nodeFromPoint"),Dh=Symbol("nodeFromIndex"),le=Symbol("variantData"),Ar=Symbol("availableVariants"),ga=Symbol("modelOnUpdate"),VA=Symbol("cloneMaterial");class df{constructor(e,t,s,i){this.gltf=e,this.gltfElementMap=t,this.mapKey=s,this.doLazyLoad=i}}class uf{constructor(e,t=()=>{}){this[UA]=new Array,this[OA]=new Array,this[PA]=new Array,this[HA]=new Array,this[qA]=()=>{},this[jA]=new Map,this[ga]=t;const{gltf:s,threeGLTF:i,gltfElementMap:n}=e;for(const[A,c]of s.materials.entries()){const h=n.get(c);if(h!=null)this[Bt].push(new da(t,A,!0,this[le],h,c.name));else{const d=(s.materials||[])[A],u=new Set;n.set(d,u);const g=async()=>{const p=await i.parser.getDependency("material",A);return u.add(p),p};this[Bt].push(new da(t,A,!1,this[le],u,c.name,new df(s,n,d,g)))}}const a=new Map,o=new Array;for(const A of i.scene.children)o.push(A);for(;o.length>0;){const A=o.pop();let c=null;A instanceof ue?(c=new ua(A,this.materials,this[le],e),this[We].push(c)):c=new vh(A.name);const h=a.get(A);h!=null?h.children.push(c):this[$A].push(c),this[Qs].push(c);for(const l of A.children)o.push(l),a.set(A,c)}}get materials(){return this[Bt]}[(UA=Bt,OA=Qs,PA=$A,HA=We,qA=ga,jA=le,Ar)](){const e=Array.from(this[le].values());return e.sort((t,s)=>t.index-s.index),e.map(t=>t.name)}getMaterialByName(e){const t=this[Bt].filter(s=>s.name===e);return t.length>0?t[0]:null}[Dh](e,t){const s=this[Qs].find(i=>{if(i instanceof ua){const{meshes:n,primitives:a}=i.mesh.userData.associations;if(n==e&&a==t)return!0}return!1});return s??null}[or](e){return this[Qs].find(t=>t instanceof ua&&t.mesh===e.object)}[Rh](e){return this[or](e).getActiveMaterial()}async[xh](e){for(const t of this[We])await t.enableVariant(e);for(const t of this.materials)t[qi](!1);for(const t of this[We])this.materials[t.getActiveMaterial().index][qi](!0)}async[Sh](){const e=new Array;for(const t of this[We])e.push(t.instantiateVariants());await Promise.all(e)}[VA](e,t){const s=this.materials[e];s.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const i=s[O],n=new Set;for(const[o,A]of i.entries()){const c=A.clone();c.name=t+(i.size>1?"_inst"+o:""),n.add(c)}const a=new da(this[ga],this[Bt].length,!1,this[le],n,t);return this[Bt].push(a),a}createMaterialInstanceForVariant(e,t,s,i=!0){let n=null;for(const a of this[We]){const o=this[le].get(s);o!=null&&a.variantInfo.has(o.index)||a.getMaterial(e)!=null&&(this.hasVariant(s)||this.createVariant(s),n==null&&(n=this[VA](e,t)),a.addVariant(n,s))}if(i&&n!=null){n[qi](!0),this.materials[e][qi](!1);for(const a of this[We])a.enableVariant(s)}return n}createVariant(e){this[le].has(e)?console.warn(`Variant '${e}'' already exists`):this[le].set(e,{name:e,index:this[le].size})}hasVariant(e){return this[le].has(e)}setMaterialToVariant(e,t){if(this[Ar]().find(s=>s===t)==null){console.warn(`Can't add material to '${t}', the variant does not exist.'`);return}if(e<0||e>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const s of this[We]){const i=s.getMaterial(e);i!=null&&s.addVariant(i,t)}}updateVariantName(e,t){const s=this[le].get(e);s!=null&&(s.name=t,this[le].set(t,s),this[le].delete(e))}deleteVariant(e){const t=this[le].get(e);if(t!=null){for(const s of this.materials)s.hasVariant(e)&&s[ci].delete(t.index);for(const s of this[We])s.deleteVariant(t.index);this[le].delete(e)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pa=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const Vs=Symbol("currentGLTF"),Ks=Symbol("originalGltfJson"),xt=Symbol("model"),fa=Symbol("getOnUpdateMethod"),Ri=Symbol("buildTexture"),gf=r=>{var e,t,s;class i extends r{constructor(){super(...arguments),this[e]=void 0,this[t]=null,this[s]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[xt]}get availableVariants(){return this.model?this.model[Ar]():[]}get originalGltfJson(){return this[Ks]}[(e=xt,t=Vs,s=Ks,fa)](){return()=>{this[oe]()}}[Ri](a){return a.colorSpace=Be,a.wrapS=_t,a.wrapT=_t,new Bh(this[fa](),a)}async createTexture(a,o="image/png"){const{textureUtils:A}=this[z],c=await A.loadImage(a,this.withCredentials);return c.userData.mimeType=o,this[Ri](c)}async createLottieTexture(a,o=1){const{textureUtils:A}=this[z],c=await A.loadLottie(a,o,this.withCredentials);return this[Ri](c)}createVideoTexture(a){const o=document.createElement("video");o.crossOrigin=this.withCredentials?"use-credentials":"anonymous",o.src=a,o.muted=!0,o.playsInline=!0,o.loop=!0,o.play();const A=new kd(o);return this[Ri](A)}createCanvasTexture(){const a=document.createElement("canvas"),o=new Ld(a);return this[Ri](o)}async updated(a){if(super.updated(a),a.has("variantName")){const o=this[Lt].beginActivity("variant-update");o(.1);const A=this[xt],{variantName:c}=this;A!=null&&(await A[xh](c),this[oe](),this.dispatchEvent(new CustomEvent("variant-applied"))),o(1)}if(a.has("orientation")||a.has("scale")){if(!this.loaded)return;const o=this[w];o.applyTransform(),o.updateBoundingBox(),o.updateShadow(),this[z].arRenderer.onUpdateScene(),this[oe]()}}[$e](){super[$e]();const{currentGLTF:a}=this[w];if(a!=null){const{correlatedSceneGraph:o}=a;o!=null&&a!==this[Vs]&&(this[xt]=new uf(o,this[fa]()),this[Ks]=JSON.parse(JSON.stringify(o.gltf))),"variants"in a.userData&&this.requestUpdate("variantName")}this[Vs]=a}async exportScene(a){const o=this[w];return new Promise(async(A,c)=>{const h={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(h,a),h.animations=o.animations,h.truncateDrawRange=!0;const l=o.shadow;let d=!1;l!=null&&(d=l.visible,l.visible=!1),await this[xt][Sh](),new Pd().register(g=>new Fg(g)).parse(o.model,g=>A(new Blob([h.binary?g:JSON.stringify(g)],{type:h.binary?"application/octet-stream":"application/json"})),()=>c("glTF export failed"),h),l!=null&&(l.visible=d)})}materialFromPoint(a,o){const A=this[xt];if(A==null)return null;const c=this[w],h=c.getNDC(a,o),l=c.hitFromPoint(h);return l==null||l.face==null?null:A[Rh](l)}}return pa([F({type:String,attribute:"variant-name"})],i.prototype,"variantName",void 0),pa([F({type:String,attribute:"orientation"})],i.prototype,"orientation",void 0),pa([F({type:String,attribute:"scale"})],i.prototype,"scale",void 0),i};/* @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends ue{constructor(){super(void 0,new Pe({depthWrite:!1})),this.height=0,this.radius=0,this.resolution=0,this.userData.noHit=!0}get map(){return this.material.map}set map(e){this.material.map=e}isUsable(){return this.height>0&&this.radius>0&&this.geometry!=null&&this.map!=null}updateGeometry(e=this.height,t=this.radius,s=128){(e!=this.height||t!=this.radius||s!=this.resolution)&&(this.height=e,this.radius=t,this.resolution=s,e>0&&t>0&&(this.geometry.dispose(),this.geometry=ff(e,t,s)))}}function ff(r,e,t){const s=new Gd(e,2*t,t);s.scale(1,1,-1);const i=s.getAttribute("position"),n=new k;for(let a=0;a<i.count;++a)if(n.fromBufferAttribute(i,a),n.y<0){const o=-r*3/2,A=n.y<o?-r/n.y:1-n.y*n.y/(3*o*o);n.multiplyScalar(A),n.toArray(i.array,3*a)}return i.needsUpdate=!0,s}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new k,ma=new k,ba=new k,Ss=new Cr,KA=new tl,zA=new ss;class Th extends Tg{constructor(e){super(document.createElement("div")),this.normal=new k(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=e.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(e.position),this.updateNormal(e.normal),this.surface=e.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(e){if(e==null)return;const t=tt(e)[0].terms;for(let s=0;s<3;++s)this.position.setComponent(s,qe(t[s]).number);this.updateMatrixWorld()}updateNormal(e){if(e==null)return;const t=tt(e)[0].terms;for(let s=0;s<3;++s)this.normal.setComponent(s,t[s].number)}updateSurface(){const{mesh:e,tri:t,bary:s}=this;if(e==null||t==null||s==null)return;e.getVertexPosition(t.x,vs),e.getVertexPosition(t.y,ma),e.getVertexPosition(t.z,ba),vs.toArray(Ss.elements,0),ma.toArray(Ss.elements,3),ba.toArray(Ss.elements,6),this.position.copy(s).applyMatrix3(Ss);const i=this.parent;i.worldToLocal(e.localToWorld(this.position)),KA.set(vs,ma,ba),KA.getNormal(this.normal).transformDirection(e.matrixWorld);const n=i.parent;zA.setFromAxisAngle(vs.set(0,1,0),-n.rotation.y),this.normal.applyQuaternion(zA)}orient(e){this.pivot.style.transform=`rotate(${e}rad)`}updateVisibility(e){this.element.classList.toggle("hide",!e),this.slot.assignedNodes().forEach(t=>{if(t.nodeType!==Node.ELEMENT_NODE)return;const s=t,i=s.dataset.visibilityAttribute;if(i!=null){const n=`data-${i}`;s.toggleAttribute(n,e)}s.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:e}}))}),this.initialized=!0}}const mf={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},bf={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function JA(r,e,t){return(1-t)*r+t*e}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=9,If=6,Ia=2,Ef=.3;class Cf extends hi{constructor(e,t,s){super(),this.camera=new pn,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new Nd,this.horizontalBlurMaterial=new Xi(mf),this.verticalBlurMaterial=new Xi(bf),this.intensity=0,this.softness=1,this.boundingBox=new Dt,this.size=new k,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:i}=this;i.rotation.x=Math.PI/2,i.left=-.5,i.right=.5,i.bottom=-.5,i.top=.5,this.add(i);const n=new ns,a=new Pe({opacity:1,transparent:!0,side:Br});this.floor=new ue(n,a),this.floor.userData.noHit=!0,i.add(this.floor),this.blurPlane=new ue(n),this.blurPlane.visible=!1,i.add(this.blurPlane),e.target.add(this),this.depthMaterial.onBeforeCompile=function(o){o.fragmentShader=o.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.depthMaterial.side=dt,this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(e,t,s)}setScene(e,t,s){const{boundingBox:i,size:n,rotation:a,position:o}=this;if(this.isAnimated=e.animationNames.length>0,this.boundingBox.copy(e.boundingBox),this.size.copy(e.size),this.maxDimension=Math.max(n.x,n.y,n.z)*(this.isAnimated?Ia:1),this.boundingBox.getCenter(o),s==="back"){const{min:A,max:c}=i;[A.y,A.z]=[A.z,A.y],[c.y,c.z]=[c.z,c.y],[n.y,n.z]=[n.z,n.y],a.x=Math.PI/2,a.y=Math.PI}else a.x=0,a.y=0;if(this.isAnimated){const A=i.min.y,c=i.max.y;n.y=this.maxDimension,i.expandByVector(n.subScalar(this.maxDimension).multiplyScalar(-.5)),i.min.y=A,i.max.y=c,n.set(this.maxDimension,c-A,this.maxDimension)}s==="bottom"?o.y=i.min.y:o.z=i.min.y,this.setSoftness(t)}setSoftness(e){this.softness=e;const{size:t,camera:s}=this,i=this.isAnimated?Ia:1,n=i*Math.pow(2,YA-e*(YA-If));this.setMapSize(n);const a=t.y/2,o=t.y*i;s.near=0,s.far=JA(o,a,e),this.depthMaterial.opacity=1/e,s.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(e){const{size:t}=this;this.isAnimated&&(e*=Ia);const s=Math.floor(t.x>t.z?e:e*t.x/t.z),i=Math.floor(t.x>t.z?e*t.z/t.x:e),n=10,a=n+s,o=n+i;if(this.renderTarget!=null&&(this.renderTarget.width!==a||this.renderTarget.height!==o)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const A={format:Re};this.renderTarget=new Wi(a,o,A),this.renderTargetBlur=new Wi(a,o,A),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(t.x*(1+n/s),t.z*(1+n/i),1),this.needsUpdate=!0}setIntensity(e){this.intensity=e,e>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=e*JA(Ef,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(e){this.floor.position.z=-e+this.gap()}gap(){return .001*this.maxDimension}render(e,t){t.overrideMaterial=this.depthMaterial;const s=e.getClearAlpha();e.setClearAlpha(0),this.floor.visible=!1;const i=e.xr.enabled;e.xr.enabled=!1;const n=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.render(t,this.camera),t.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(e),e.xr.enabled=i,e.setRenderTarget(n),e.setClearAlpha(s)}blurShadow(e){const{camera:t,horizontalBlurMaterial:s,verticalBlurMaterial:i,renderTarget:n,renderTargetBlur:a,blurPlane:o}=this;o.visible=!0,o.material=s,s.uniforms.h.value=1/this.renderTarget.width,s.uniforms.tDiffuse.value=this.renderTarget.texture,e.setRenderTarget(a),e.render(o,t),o.material=i,i.uniforms.v.value=1/this.renderTarget.height,i.uniforms.tDiffuse.value=this.renderTargetBlur.texture,e.setRenderTarget(n),e.render(o,t),o.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=10,Ea=100,Ca=new k,XA=new k,ZA=new k,xs=new Ud,Bf=new k,Di=new De;class yf extends as{constructor({canvas:e,element:t,width:s,height:i}){super(),this.annotationRenderer=new Mg,this.effectRenderer=null,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.appendedAnimations=[],this.markedAnimations=[],this.camera=new Xs(45,1,.1,100),this.xrCamera=null,this.url=null,this.pivot=new hi,this.target=new hi,this.animationNames=[],this.boundingBox=new Dt,this.boundingSphere=new Er,this.size=new k,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.toneMapping=Js,this.canScale=!0,this.isDirty=!1,this.goalTarget=new k,this.targetDamperX=new Ie,this.targetDamperY=new Ie,this.targetDamperZ=new Ie,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.groundedSkybox=new pf,this.name="ModelScene",this.element=t,this.canvas=e,this.camera=new Xs(45,1,.1,100),this.camera.name="MainCamera",this.add(this.pivot),this.pivot.name="Pivot",this.pivot.add(this.target),this.setSize(s,i),this.target.name="Target",this.mixer=new Od(this.target);const{domElement:n}=this.annotationRenderer,{style:a}=n;a.display="none",a.pointerEvents="none",a.position="absolute",a.top="0",this.element.shadowRoot.querySelector(".default").appendChild(n),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(e){this.reset(),this._model=e,this.target.add(e),await this.setupScene()}async setSource(e,t=()=>{}){if(!e||e===this.url){t(1);return}if(this.reset(),this.url=e,this.externalRenderer!=null){const o=await this.externalRenderer.load(t);this.boundingSphere.radius=o.framedRadius,this.idealAspect=o.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let s;try{s=await new Promise(async(o,A)=>{this.cancelPendingSourceChange=()=>A();try{const c=await this.element[z].loader.load(e,this.element,t);o(c)}catch(c){A(c)}})}catch(o){if(o==null)return;throw o}this.cancelPendingSourceChange=null,this.reset(),this.url=e,this._currentGLTF=s,s!=null&&(this._model=s.scene,this.target.add(s.scene));const{animations:i}=s,n=new Map,a=[];for(const o of i)n.set(o.name,o),a.push(o.name);this.animations=i,this.animationsByName=n,this.animationNames=a,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity),this.setGroundedSkybox()}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:e}=this;e!=null&&(e.removeFromParent(),this._model=null);const t=this._currentGLTF;t!=null&&(t.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[Vs]=null,this.element[Ks]=null,this.element[xt]=null}get currentGLTF(){return this._currentGLTF}setSize(e,t){if(!(this.width===e&&this.height===t)){if(this.width=Math.max(e,1),this.height=Math.max(t,1),this.annotationRenderer.setSize(e,t),this.aspect=this.width/this.height,this.externalRenderer!=null){const s=window.devicePixelRatio;this.externalRenderer.resize(e*s,t*s)}this.queueRender()}}markBakedShadow(e){e.userData.noHit=!0,this.bakedShadows.add(e)}unmarkBakedShadow(e){e.userData.noHit=!1,e.visible=!0,this.bakedShadows.delete(e),this.boundingBox.expandByObject(e)}findBakedShadows(e){const t=new Dt;e.traverse(s=>{const i=s;if(!i.material||!i.material.transparent)return;t.setFromObject(i);const a=t.getSize(Bf),o=Math.min(a.x,a.y,a.z);Math.max(a.x,a.y,a.z)<Ea*o||this.markBakedShadow(i)})}checkBakedShadows(){const{min:e,max:t}=this.boundingBox,s=new Dt;this.boundingBox.getSize(this.size);for(const i of this.bakedShadows)s.setFromObject(i),!(s.min.y<e.y+this.size.y/Ea&&s.min.x<=e.x&&s.max.x>=t.x&&s.min.z<=e.z&&s.max.z>=t.z)&&(s.min.z<e.z+this.size.z/Ea&&s.min.x<=e.x&&s.max.x>=t.x&&s.min.y<=e.y&&s.max.y>=t.y||this.unmarkBakedShadow(i))}applyTransform(){const{model:e}=this;if(e==null)return;const t=tt(this.element.orientation)[0].terms,s=qe(t[0]).number,i=qe(t[1]).number,n=qe(t[2]).number;e.quaternion.setFromEuler(new Xc(i,n,s,"YXZ"));const a=tt(this.element.scale)[0].terms;e.scale.set(a[0].number,a[1].number,a[2].number)}updateBoundingBox(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.findBakedShadows(e);const t=(s,i)=>s.expandByPoint(i);this.setBakedShadowVisibility(!1),this.boundingBox=ds(e,t,new Dt),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(s=>this.unmarkBakedShadow(s)),this.boundingBox=ds(e,t,new Dt)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(e)}async updateFraming(){const{model:e}=this;if(e==null)return;this.target.remove(e),this.setBakedShadowVisibility(!1);const{center:t}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,t.copy(this.getTarget());const s=(n,a)=>Math.max(n,t.distanceToSquared(a));this.boundingSphere.radius=Math.sqrt(ds(e,s,0));const i=(n,a)=>{a.sub(t);const o=Math.sqrt(a.x*a.x+a.z*a.z);return Math.max(n,o/(this.idealCameraDistance()-Math.abs(a.y)))};this.idealAspect=ds(e,i,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(e)}setBakedShadowVisibility(e=this.shadowIntensity<=0){for(const t of this.bakedShadows)t.visible=e}idealCameraDistance(){const e=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(e)}adjustedFoV(e){const t=Math.tan(e/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(t)*180/Math.PI}getNDC(e,t){if(this.xrCamera!=null)Di.set(e/window.screen.width,t/window.screen.height);else{const s=this.element.getBoundingClientRect();Di.set((e-s.x)/this.width,(t-s.y)/this.height)}return Di.multiplyScalar(2).subScalar(1),Di.y*=-1,Di}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(e,t){this.element[z].arRenderer.presentedScene!==this&&(this.environment=e,this.setBackground(t),this.queueRender())}setBackground(e){this.groundedSkybox.map=e,this.groundedSkybox.isUsable()?(this.target.add(this.groundedSkybox),this.background=null):(this.target.remove(this.groundedSkybox),this.background=e)}farRadius(){return this.boundingSphere.radius*(this.groundedSkybox.parent!=null?WA:1)}setGroundedSkybox(){const e=tt(this.element.skyboxHeight)[0].terms[0],t=qe(e).number,s=WA*this.boundingSphere.radius;this.groundedSkybox.updateGeometry(t,s),this.groundedSkybox.position.y=t-(this.shadow?2*this.shadow.gap():0),this.setBackground(this.groundedSkybox.map)}setTarget(e,t,s){this.goalTarget.set(-e,-t,-s)}setTargetDamperDecayTime(e){this.targetDamperX.setDecayTime(e),this.targetDamperY.setDecayTime(e),this.targetDamperZ.setDecayTime(e)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}getDynamicTarget(){return this.target.position.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(Zl)}updateTarget(e){const t=this.goalTarget,s=this.target.position;if(t.equals(s))return!1;{const i=this.boundingSphere.radius/10;let{x:n,y:a,z:o}=s;return n=this.targetDamperX.update(n,t.x,e,i),a=this.targetDamperY.update(a,t.y,e,i),o=this.targetDamperZ.update(o,t.z,e,i),this.groundedSkybox.position.x=-n,this.groundedSkybox.position.z=-o,this.target.position.set(n,a,o),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(e,t){const{x:s,z:i}=this.position;this.yaw=Math.atan2(e-s,t-i)}get model(){return this._model}set yaw(e){this.pivot.rotation.y=e,this.groundedSkybox.rotation.y=-e,this.queueRender()}get yaw(){return this.pivot.rotation.y}set animationTime(e){this.mixer.setTime(e),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const e=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===er&&(e&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(e){this.mixer.timeScale=e}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(e=null,t=0,s=Ki,i=1/0){if(this._currentGLTF==null)return;const{animations:n}=this;if(n==null||n.length===0)return;let a=null;if(e!=null&&(a=this.animationsByName.get(e),a==null)){const o=parseInt(e);!isNaN(o)&&o>=0&&o<n.length&&(a=n[o])}a==null&&(a=n[0]);try{const{currentAnimationAction:o}=this,A=this.mixer.clipAction(a,this);A.timeScale!=this.element.timeScale&&(A.timeScale=this.element.timeScale),this.currentAnimationAction=A,this.element.paused?this.mixer.stopAllAction():(A.paused=!1,o!=null&&A!==o?A.crossFadeFrom(o,t,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),A.setLoop(s,i),A.enabled=!0,A.clampWhenFinished=!0,A.play()}catch(o){console.error(o)}}appendAnimation(e="",t=Ki,s=1/0,i=1,n=1,a=!1,o=!1,A=!0,c=null,h=!1){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:l}=this;if(l==null||l.length===0)return;let d=null;const u=1.25;if(e&&(d=this.animationsByName.get(e)),d!=null){typeof s=="string"?isNaN(s)?(s=1/0,console.warn("Invalid repetitionCount value, repetitionCount is set to Infinity")):s=Math.max(parseInt(s),1):typeof s=="number"&&s<1&&(s=1),s===1&&t!==en&&(t=en),typeof i=="string"&&(isNaN(i)?(i=1,console.warn("Invalid weight value, weight is set to 1")):i=parseFloat(i)),typeof n=="string"&&(isNaN(n)?(n=1,console.warn("Invalid timeScale value, timeScale is set to 1")):n=parseFloat(n)),typeof a=="string"&&(a.toLowerCase().trim()==="true"?a=!0:a.toLowerCase().trim()==="false"?a=!1:isNaN(a)?(a=!1,console.warn("Invalid fade value, fade is set to false")):a=parseFloat(a)),typeof o=="string"&&(o.toLowerCase().trim()==="true"?o=!0:o.toLowerCase().trim()==="false"?o=!1:isNaN(o)?(o=!1,console.warn("Invalid warp value, warp is set to false")):o=parseFloat(o)),typeof c=="string"&&(isNaN(c)||(c=parseFloat(c)));try{const g=this.mixer.existingAction(d)||this.mixer.clipAction(d,this),p=g.timeScale;h&&this.appendedAnimations.includes(e)&&(this.markedAnimations.map(f=>f.name).includes(e)||this.markedAnimations.push({name:e,loopMode:t,repetitionCount:s})),typeof c=="number"&&(g.time=Math.min(Math.max(c,0),d.duration)),typeof a=="boolean"&&a?g.fadeIn(u):typeof a=="number"?g.fadeIn(Math.max(a,0)):i>=0&&(g.weight=Math.min(Math.max(i,0),1)),typeof o=="boolean"&&o?g.warp(A?p:0,n,u):typeof o=="number"?g.warp(A?p:0,n,Math.max(o,0)):g.timeScale=n,g.isRunning()||(g.time==d.duration&&g.stop(),g.setLoop(t,s),g.paused=!1,g.enabled=!0,g.clampWhenFinished=!0,g.play()),this.appendedAnimations.includes(e)||this.element[w].appendedAnimations.push(e)}catch(g){console.error(g)}}}detachAnimation(e="",t=!0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:s}=this;if(s==null||s.length===0)return;let i=null;const n=1.5;if(e&&(i=this.animationsByName.get(e)),i!=null){typeof t=="string"&&(t.toLowerCase().trim()==="true"?t=!0:t.toLowerCase().trim()==="false"?t=!1:isNaN(t)?(t=!0,console.warn("Invalid fade value, fade is set to true")):t=parseFloat(t));try{const a=this.mixer.existingAction(i)||this.mixer.clipAction(i,this);typeof t=="boolean"&&t?a.fadeOut(n):typeof t=="number"?a.fadeOut(Math.max(t,0)):a.stop();const o=this.element[w].appendedAnimations.filter(A=>A!==e);this.element[w].appendedAnimations=o}catch(a){console.error(a)}}}updateAnimationLoop(e="",t=Ki,s=1/0){if(this._currentGLTF==null||e===this.element.animationName)return;const{animations:i}=this;if(i==null||i.length===0)return;let n=null;if(e&&(n=this.animationsByName.get(e)),n!=null)try{const a=this.mixer.existingAction(n)||this.mixer.clipAction(n,this);a.stop(),a.setLoop(t,s),a.play()}catch(a){console.error(a)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(e){this.mixer.update(e),this.queueShadowRender()}subscribeMixerEvent(e,t){this.mixer.addEventListener(e,t)}updateShadow(){const e=this.shadow;if(e!=null){const t=this.element.arPlacement==="wall"?"back":"bottom";e.setScene(this,this.shadowSoftness,t),e.needsUpdate=!0}}renderShadow(e){const t=this.shadow;t!=null&&t.needsUpdate==!0&&(t.render(e,this),t.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(e){if(this.shadowIntensity=e,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(e<=0&&this.shadow==null))){if(this.shadow==null){const t=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new Cf(this,this.shadowSoftness,t)}this.shadow.setIntensity(e)}}setShadowSoftness(e){this.shadowSoftness=e;const t=this.shadow;t!=null&&t.setSoftness(e)}setShadowOffset(e){const t=this.shadow;t!=null&&t.setOffset(e)}getHit(e=this){return xs.intersectObject(e,!0).find(s=>s.object.visible&&!s.object.userData.noHit)}hitFromController(e,t=this){return xs.setFromXRController(e),this.getHit(t)}hitFromPoint(e,t=this){return xs.setFromCamera(e,this.getCamera()),this.getHit(t)}positionAndNormalFromPoint(e,t=this){var s;const i=this.hitFromPoint(e,t);if(i==null)return null;const n=i.point,a=i.face!=null?i.face.normal.clone().applyNormalMatrix(new Cr().getNormalMatrix(i.object.matrixWorld)):xs.ray.direction.clone().multiplyScalar(-1),o=(s=i.uv)!==null&&s!==void 0?s:null;return{position:n,normal:a,uv:o}}surfaceFromPoint(e,t=this){const s=this.element.model;if(s==null)return null;const i=this.hitFromPoint(e,t);if(i==null||i.face==null)return null;const n=s[or](i),{meshes:a,primitives:o}=n.mesh.userData.associations,A=new k,c=new k,h=new k,{a:l,b:d,c:u}=i.face,g=i.object;g.getVertexPosition(l,A),g.getVertexPosition(d,c),g.getVertexPosition(u,h);const p=new tl(A,c,h),f=new k;return p.getBarycoord(g.worldToLocal(i.point),f),`${a} ${o} ${l} ${d} ${u} ${f.x.toFixed(3)} ${f.y.toFixed(3)} ${f.z.toFixed(3)}`}addHotspot(e){this.target.add(e),this.annotationRenderer.domElement.appendChild(e.element),this.updateSurfaceHotspot(e)}removeHotspot(e){this.target.remove(e)}forHotspots(e){const{children:t}=this.target;for(let s=0,i=t.length;s<i;s++){const n=t[s];n instanceof Th&&e(n)}}updateSurfaceHotspot(e){if(e.surface==null||this.element.model==null)return;const t=tt(e.surface)[0].terms;if(t.length!=8){console.warn(e.surface+" does not have exactly 8 numbers.");return}const s=this.element.model[Dh](t[0].number,t[1].number);if(s==null){console.warn(e.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const i=s.mesh.geometry.attributes.position.count,n=new k(t[2].number,t[3].number,t[4].number);if(n.x>=i||n.y>=i||n.z>=i){console.warn(e.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const a=new k(t[5].number,t[6].number,t[7].number);e.mesh=s.mesh,e.tri=n,e.bary=a,e.updateSurface()}animateSurfaceHotspots(){this.element.paused||this.forHotspots(e=>{e.updateSurface()})}updateHotspotsVisibility(e){this.forHotspots(t=>{Ca.copy(e),XA.setFromMatrixPosition(t.matrixWorld),Ca.sub(XA),ZA.copy(t.normal).transformDirection(this.target.matrixWorld),Ca.dot(ZA)<0?t.hide():t.show()})}orientHotspots(e){this.forHotspots(t=>{t.orient(e)})}setHotspotsVisibility(e){this.forHotspots(t=>{t.visible=e})}updateSchema(e){var t;const{schemaElement:s,element:i}=this,{alt:n,poster:a,iosSrc:o}=i;if(e!=null){const A=[{"@type":"MediaObject",contentUrl:e,encodingFormat:((t=e.split(".").pop())===null||t===void 0?void 0:t.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];o&&A.push({"@type":"MediaObject",contentUrl:o,encodingFormat:"model/vnd.usdz+zip"});const c={"@context":"http://schema.org/","@type":"3DModel",image:a??void 0,name:n??void 0,encoding:A};s.textContent=JSON.stringify(c),document.head.appendChild(s)}else s.parentElement!=null&&s.parentElement.removeChild(s)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(e){const t={progress:0,completed:!1};return this.ongoingActivities.add(t),this.ongoingActivityCount===1&&this.announceTotalProgress(t,0,e),s=>{let i;return i=Math.max(Oe(s,0,1),t.progress),i!==t.progress&&this.announceTotalProgress(t,i,e),t.progress}}announceTotalProgress(e,t,s){let i=0,n=0;t==1&&(e.completed=!0);for(const A of this.ongoingActivities){const{progress:c}=A;i+=1-c,A.completed&&n++}const a=e.progress;e.progress=t,this.totalProgress+=(t-a)*(1-this.totalProgress)/i;const o=n===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:o,reason:s}})),n===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n},ec,tc,ic,sc,nc,ac,rc,oc,Ac,cc,lc,hc,dc;const Qf=10,vf=50,Sf=0,xf=300,Rf=150,lt=document.createElement("canvas"),Ba=Symbol("fallbackResizeHandler"),uc=Symbol("defaultAriaLabel"),Rs=Symbol("resizeObserver"),Xt=Symbol("clearModelTimeout"),ya=Symbol("onContextLost"),Zt=Symbol("loaded"),wa=Symbol("status"),Qa=Symbol("onFocus"),va=Symbol("onBlur"),ni=Symbol("updateSize"),Ds=Symbol("intersectionObserver"),Rt=Symbol("isElementInViewport"),on=Symbol("announceModelVisibility"),oi=Symbol("ariaLabel"),cr=Symbol("altDefaulted"),Ti=Symbol("statusElement"),An=Symbol("updateStatus"),ji=Symbol("loadedTime"),li=Symbol("updateSource"),gc=Symbol("markLoaded"),zs=Symbol("container"),Me=Symbol("input"),lr=Symbol("canvas"),w=Symbol("scene"),oe=Symbol("needsRender"),je=Symbol("tick"),$e=Symbol("onModelLoad"),cn=Symbol("onResize"),z=Symbol("renderer"),Lt=Symbol("progressTracker"),pc=Symbol("getLoaded"),Gt=Symbol("getModelIsVisible"),gi=Symbol("shouldAttemptPreload"),ct=r=>({x:r.x,y:r.y,z:r.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),hr=r=>({u:r.x,v:r.y,toString(){return`${this.u} ${this.v}`}});class As extends Tt{static get is(){return"model-viewer"}static set modelCacheSize(e){be[rt].evictionThreshold=e}static get modelCacheSize(){return be[rt].evictionThreshold}static set minimumRenderScale(e){e>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),e<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),_e.singleton.minScale=e}static get minimumRenderScale(){return _e.singleton.minScale}get loaded(){return this[pc]()}get[(ec=Rt,tc=Zt,ic=ji,sc=wa,nc=Xt,ac=Ba,rc=on,oc=Rs,Ac=Ds,cc=Lt,z)](){return _e.singleton}get modelIsVisible(){return this[Gt]()}constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[ec]=!1,this[tc]=!1,this[ic]=0,this[sc]="",this[nc]=null,this[ac]=to(()=>{const i=this.getBoundingClientRect();this[ni](i)},vf),this[rc]=to(i=>{const n=this.modelIsVisible;n!==i&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:n}}))},Sf),this[oc]=null,this[Ac]=null,this[cc]=new wf,this[lc]=()=>{this[Ti].textContent=this[wa]},this[hc]=()=>{this[Ti].textContent=""},this[dc]=i=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:i.sourceEvent}}))},this.attachShadow({mode:"open"});const e=this.shadowRoot;xu(e),this[zs]=e.querySelector(".container"),this[Me]=e.querySelector(".userInput"),this[lr]=e.querySelector("canvas"),this[Ti]=e.querySelector("#status"),this[uc]=this[Me].getAttribute("aria-label");let t,s;if(this.isConnected){const i=this.getBoundingClientRect();t=i.width,s=i.height}else t=xf,s=Rf;this[w]=new yf({canvas:this[lr],element:this,width:t,height:s}),Promise.resolve().then(()=>{this[ni](this.getBoundingClientRect())}),Tn&&(this[Rs]=new ResizeObserver(i=>{if(!this[z].isPresenting)for(let n of i)n.target===this&&this[ni](n.contentRect)})),Mn?this[Ds]=new IntersectionObserver(i=>{for(let n of i)if(n.target===this){const a=this.modelIsVisible;this[Rt]=n.isIntersecting,this[on](a),this[Rt]&&!this.loaded&&this[li]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[Rt]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),Tn?this[Rs].observe(this):self.addEventListener("resize",this[Ba]),Mn&&this[Ds].observe(this),this.addEventListener("focus",this[Qa]),this.addEventListener("blur",this[va]);const e=this[z];e.addEventListener("contextlost",this[ya]),e.registerScene(this[w]),this[Xt]!=null&&(self.clearTimeout(this[Xt]),this[Xt]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),Tn?this[Rs].unobserve(this):self.removeEventListener("resize",this[Ba]),Mn&&this[Ds].unobserve(this),this.removeEventListener("focus",this[Qa]),this.removeEventListener("blur",this[va]);const e=this[z];e.removeEventListener("contextlost",this[ya]),e.unregisterScene(this[w]),this[Xt]=self.setTimeout(()=>{this[w].dispose(),this[Xt]=null},Qf)}updated(e){super.updated(e),e.has("src")&&(this.src==null?(this[Zt]=!1,this[ji]=0,this[w].reset()):this.src!==this[w].url&&(this[Zt]=!1,this[ji]=0,this[li]())),e.has("alt")&&this[Me].setAttribute("aria-label",this[oi]),e.has("generateSchema")&&(this.generateSchema?this[w].updateSchema(this.src):this[w].updateSchema(null))}toDataURL(e,t){return this[z].displayCanvas(this[w]).toDataURL(e,t)}async toBlob(e){const t=e?e.mimeType:void 0,s=e?e.qualityArgument:void 0,i=e?e.idealAspect:void 0,{width:n,height:a,idealAspect:o,aspect:A}=this[w],{dpr:c,scaleFactor:h}=this[z];let l=n*h*c,d=a*h*c,u=0,g=0;if(i===!0)if(o>A){const p=d;d=Math.round(l/o),g=(p-d)/2}else{const p=l;l=Math.round(d*o),u=(p-l)/2}lt.width=l,lt.height=d;try{return new Promise(async(p,f)=>{lt.getContext("2d").drawImage(this[z].displayCanvas(this[w]),u,g,l,d,0,0,l,d),lt.toBlob(b=>{if(!b)return f(new Error("Unable to retrieve canvas blob"));p(b)},t,s)})}finally{this[ni]({width:n,height:a})}}registerEffectComposer(e){e.setRenderer(this[z].threeRenderer),e.setMainCamera(this[w].getCamera()),e.setMainScene(this[w]),this[w].effectRenderer=e}unregisterEffectComposer(){this[w].effectRenderer=null}registerRenderer(e){this[w].externalRenderer=e}unregisterRenderer(){this[w].externalRenderer=null}get[oi](){return this[cr]}get[cr](){return this.alt==null||this.alt==="null"?this[uc]:this.alt}[pc](){return this[Zt]}[Gt](){return this.loaded&&this[Rt]}[gi](){return!!this.src&&this[Rt]}[ni]({width:e,height:t}){e===0||t===0||(this[zs].style.width=`${e}px`,this[zs].style.height=`${t}px`,this[cn]({width:e,height:t}))}[je](e,t){var s;(s=this[w].effectRenderer)===null||s===void 0||s.beforeRender(e,t)}[gc](){this[Zt]||(this[Zt]=!0,this[ji]=performance.now())}[oe](){this[w].queueRender()}[$e](){}[An](e){this[wa]=e;const t=this.getRootNode();t!=null&&t.activeElement===this&&this[Ti].textContent!=e&&(this[Ti].textContent=e)}[(lc=Qa,hc=va,cn)](e){this[w].setSize(e.width,e.height)}async[(dc=ya,li)](){const e=this[w];if(this.loaded||!this[gi]()||this.src===e.url)return;this.generateSchema&&e.updateSchema(this.src),this[An]("Loading"),e.stopAnimation();const t=this[Lt].beginActivity("model-load"),s=this.src;try{const i=e.setSource(s,a=>t(Oe(a,0,1)*.95)),n=this[nn]();await Promise.all([i,n]),this[gc](),this[$e](),this.updateComplete.then(()=>{this.dispatchEvent(new CustomEvent("before-render"))}),await new Promise(a=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:s}})),a()})})})}catch(i){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:i}}))}finally{t(1)}}}Cn([F({type:String})],As.prototype,"alt",void 0);Cn([F({type:String})],As.prototype,"src",void 0);Cn([F({type:Boolean,attribute:"with-credentials"})],As.prototype,"withCredentials",void 0);Cn([F({type:Boolean,attribute:"generate-schema"})],As.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sa=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const fc=1e3,Ts=Symbol("changeAnimation"),mc=Symbol("appendAnimation"),bc=Symbol("detachAnimation"),ye=Symbol("paused"),Df={repetitions:1/0,pingpong:!1},Tf={pingpong:!1,repetitions:null,weight:1,timeScale:1,fade:!1,warp:!1,relativeWarp:!0,time:null},Mf={fade:!0},Ff=r=>{var e;class t extends r{constructor(...i){super(i),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[e]=!0,this[w].subscribeMixerEvent("loop",n=>{const a=n.action._loopCount,o=n.action._clip.name,A=n.action._clip.uuid,c=this[w].markedAnimations.find(h=>h.name===o);if(c){this[w].updateAnimationLoop(c.name,c.loopMode,c.repetitionCount);const h=this[w].markedAnimations.filter(l=>l.name!==o);this[w].markedAnimations=h}this.dispatchEvent(new CustomEvent("loop",{detail:{count:a,name:o,uuid:A}}))}),this[w].subscribeMixerEvent("finished",n=>{if(!this[w].appendedAnimations.includes(n.action._clip.name))this[ye]=!0;else{const a=this[w].appendedAnimations.filter(o=>o!==n.action._clip.name);this[w].appendedAnimations=a}this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[w].animationNames:[]}get duration(){return this[w].duration}get paused(){return this[ye]}get currentTime(){return this[w].animationTime}get appendedAnimations(){return this[w].appendedAnimations}set currentTime(i){this[w].animationTime=i,this[oe]()}get timeScale(){return this[w].animationTimeScale}set timeScale(i){this[w].animationTimeScale=i}pause(){this[ye]||(this[ye]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(i){this.availableAnimations.length>0&&(this[ye]=!1,this[Ts](i),this.dispatchEvent(new CustomEvent("play")))}appendAnimation(i,n){this.availableAnimations.length>0&&(this[ye]=!1,this[mc](i,n),this.dispatchEvent(new CustomEvent("append-animation")))}detachAnimation(i,n){this.availableAnimations.length>0&&(this[ye]=!1,this[bc](i,n),this.dispatchEvent(new CustomEvent("detach-animation")))}[(e=ye,$e)](){super[$e](),this[ye]=!0,this.animationName!=null&&this[Ts](),this.autoplay&&this.play()}[je](i,n){super[je](i,n),!(this[ye]||!this[Gt]()&&!this[z].isPresenting)&&(this[w].updateAnimation(n/fc),this[oe]())}updated(i){super.updated(i),i.has("autoplay")&&this.autoplay&&this.play(),i.has("animationName")&&this[Ts]()}[Ts](i=Df){var n;const a=(n=i.repetitions)!==null&&n!==void 0?n:1/0,o=i.pingpong?er:a===1?en:Ki;this[w].playAnimation(this.animationName,this.animationCrossfadeDuration/fc,o,a),this[ye]&&(this[w].updateAnimation(0),this[oe]())}[mc](i="",n=Tf){var a;const o=(a=n.repetitions)!==null&&a!==void 0?a:1/0,A=n.pingpong?er:o===1?en:Ki,c=!!n.repetitions||"pingpong"in n;this[w].appendAnimation(i||this.animationName,A,o,n.weight,n.timeScale,n.fade,n.warp,n.relativeWarp,n.time,c),this[ye]&&(this[w].updateAnimation(0),this[oe]())}[bc](i="",n=Mf){this[w].detachAnimation(i||this.animationName,n.fade),this[ye]&&(this[w].updateAnimation(0),this[oe]())}}return Sa([F({type:Boolean})],t.prototype,"autoplay",void 0),Sa([F({type:String,attribute:"animation-name"})],t.prototype,"animationName",void 0),Sa([F({type:Number,attribute:"animation-crossfade-duration"})],t.prototype,"animationCrossfadeDuration",void 0),t};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=Symbol("hotspotMap"),xa=Symbol("mutationCallback"),Mi=Symbol("observer"),Ra=Symbol("addHotspot"),Ic=Symbol("removeHotspot"),Da=new pt,_f=r=>{var e,t,s;class i extends r{constructor(){super(...arguments),this[e]=new Map,this[t]=a=>{a.forEach(o=>{(!(o instanceof MutationRecord)||o.type==="childList")&&(o.addedNodes.forEach(A=>{this[Ra](A)}),o.removedNodes.forEach(A=>{this[Ic](A)}),this[oe]())})},this[s]=new MutationObserver(this[xa])}connectedCallback(){super.connectedCallback();for(let o=0;o<this.children.length;++o)this[Ra](this.children[o]);const{ShadyDOM:a}=self;a==null?this[Mi].observe(this,{childList:!0}):this[Mi]=a.observeChildren(this,this[xa])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:a}=self;a==null?this[Mi].disconnect():a.unobserveChildren(this[Mi])}[(e=yt,t=xa,s=Mi,$e)](){super[$e]();const a=this[w];a.forHotspots(o=>{a.updateSurfaceHotspot(o)})}[je](a,o){super[je](a,o);const A=this[w],{annotationRenderer:c}=A,h=A.getCamera();A.shouldRender()&&(A.animateSurfaceHotspots(),A.updateHotspotsVisibility(h.position),c.domElement.style.display="",c.render(A,h))}updateHotspot(a){const o=this[yt].get(a.name);o!=null&&(o.updatePosition(a.position),o.updateNormal(a.normal),o.surface=a.surface,this[w].updateSurfaceHotspot(o),this[oe]())}queryHotspot(a){const o=this[yt].get(a);if(o==null)return null;const A=ct(o.position),c=ct(o.normal),h=o.facingCamera,l=this[w],d=l.getCamera(),u=new k;u.setFromMatrixPosition(o.matrixWorld),u.project(d);const g=l.width/2,p=l.height/2;u.x=u.x*g+g,u.y=-(u.y*p)+p;const f=ct(new k(u.x,u.y,u.z));return!Number.isFinite(f.x)||!Number.isFinite(f.y)?null:{position:A,normal:c,canvasPosition:f,facingCamera:h}}positionAndNormalFromPoint(a,o){const A=this[w],c=A.getNDC(a,o),h=A.positionAndNormalFromPoint(c);if(h==null)return null;Da.copy(A.target.matrixWorld).invert();const l=ct(h.position.applyMatrix4(Da)),d=ct(h.normal.transformDirection(Da));let u=null;return h.uv!=null&&(u=hr(h.uv)),{position:l,normal:d,uv:u}}surfaceFromPoint(a,o){const A=this[w],c=A.getNDC(a,o);return A.surfaceFromPoint(c)}[Ra](a){if(!(a instanceof HTMLElement&&a.slot.indexOf("hotspot")===0))return;let o=this[yt].get(a.slot);o!=null?o.increment():(o=new Th({name:a.slot,position:a.dataset.position,normal:a.dataset.normal,surface:a.dataset.surface}),this[yt].set(a.slot,o),this[w].addHotspot(o)),this[w].queueRender()}[Ic](a){if(!(a instanceof HTMLElement))return;const o=this[yt].get(a.slot);o&&(o.decrement()&&(this[w].removeHotspot(o),this[yt].delete(a.slot)),this[w].queueRender())}}return i};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var pe=Uint8Array,Qe=Uint16Array,xr=Int32Array,Rr=new pe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dr=new pe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ec=new pe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mh=function(r,e){for(var t=new Qe(31),s=0;s<31;++s)t[s]=e+=1<<r[s-1];for(var i=new xr(t[30]),s=1;s<30;++s)for(var n=t[s];n<t[s+1];++n)i[n]=n-t[s]<<5|s;return{b:t,r:i}},Fh=Mh(Rr,2),kf=Fh.b,dr=Fh.r;kf[28]=258,dr[258]=28;var Lf=Mh(Dr,0),Cc=Lf.r,ur=new Qe(32768);for(var W=0;W<32768;++W){var nt=(W&43690)>>1|(W&21845)<<1;nt=(nt&52428)>>2|(nt&13107)<<2,nt=(nt&61680)>>4|(nt&3855)<<4,ur[W]=((nt&65280)>>8|(nt&255)<<8)>>1}var Yi=function(r,e,t){for(var s=r.length,i=0,n=new Qe(e);i<s;++i)r[i]&&++n[r[i]-1];var a=new Qe(e);for(i=1;i<e;++i)a[i]=a[i-1]+n[i-1]<<1;var o;if(t){o=new Qe(1<<e);var A=15-e;for(i=0;i<s;++i)if(r[i])for(var c=i<<4|r[i],h=e-r[i],l=a[r[i]-1]++<<h,d=l|(1<<h)-1;l<=d;++l)o[ur[l]>>A]=c}else for(o=new Qe(s),i=0;i<s;++i)r[i]&&(o[i]=ur[a[r[i]-1]++]>>15-r[i]);return o},Nt=new pe(288);for(var W=0;W<144;++W)Nt[W]=8;for(var W=144;W<256;++W)Nt[W]=9;for(var W=256;W<280;++W)Nt[W]=7;for(var W=280;W<288;++W)Nt[W]=8;var ln=new pe(32);for(var W=0;W<32;++W)ln[W]=5;var Gf=Yi(Nt,9,0),Nf=Yi(ln,5,0),_h=function(r){return(r+7)/8|0},kh=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new pe(r.subarray(e,t))},Uf=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Bn=function(r,e,t){var s=new Error(e||Uf[r]);if(s.code=r,Error.captureStackTrace&&Error.captureStackTrace(s,Bn),!t)throw s;return s},Xe=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8},Fi=function(r,e,t){t<<=e&7;var s=e/8|0;r[s]|=t,r[s+1]|=t>>8,r[s+2]|=t>>16},Ta=function(r,e){for(var t=[],s=0;s<r.length;++s)r[s]&&t.push({s,f:r[s]});var i=t.length,n=t.slice();if(!i)return{t:Gh,l:0};if(i==1){var a=new pe(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(m,y){return m.f-y.f}),t.push({s:-1,f:25001});var o=t[0],A=t[1],c=0,h=1,l=2;for(t[0]={s:-1,f:o.f+A.f,l:o,r:A};h!=i-1;)o=t[t[c].f<t[l].f?c++:l++],A=t[c!=h&&t[c].f<t[l].f?c++:l++],t[h++]={s:-1,f:o.f+A.f,l:o,r:A};for(var d=n[0].s,s=1;s<i;++s)n[s].s>d&&(d=n[s].s);var u=new Qe(d+1),g=gr(t[h-1],u,0);if(g>e){var s=0,p=0,f=g-e,b=1<<f;for(n.sort(function(y,v){return u[v.s]-u[y.s]||y.f-v.f});s<i;++s){var E=n[s].s;if(u[E]>e)p+=b-(1<<g-u[E]),u[E]=e;else break}for(p>>=f;p>0;){var I=n[s].s;u[I]<e?p-=1<<e-u[I]++-1:++s}for(;s>=0&&p;--s){var C=n[s].s;u[C]==e&&(--u[C],++p)}g=e}return{t:new pe(u),l:g}},gr=function(r,e,t){return r.s==-1?Math.max(gr(r.l,e,t+1),gr(r.r,e,t+1)):e[r.s]=t},Bc=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Qe(++e),s=0,i=r[0],n=1,a=function(A){t[s++]=A},o=1;o<=e;++o)if(r[o]==i&&o!=e)++n;else{if(!i&&n>2){for(;n>138;n-=138)a(32754);n>2&&(a(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(a(i),--n;n>6;n-=6)a(8304);n>2&&(a(n-3<<5|8208),n=0)}for(;n--;)a(i);n=1,i=r[o]}return{c:t.subarray(0,s),n:e}},_i=function(r,e){for(var t=0,s=0;s<e.length;++s)t+=r[s]*e[s];return t},Lh=function(r,e,t){var s=t.length,i=_h(e+2);r[i]=s&255,r[i+1]=s>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var n=0;n<s;++n)r[i+n+4]=t[n];return(i+4+s)*8},yc=function(r,e,t,s,i,n,a,o,A,c,h){Xe(e,h++,t),++i[256];for(var l=Ta(i,15),d=l.t,u=l.l,g=Ta(n,15),p=g.t,f=g.l,b=Bc(d),E=b.c,I=b.n,C=Bc(p),m=C.c,y=C.n,v=new Qe(19),B=0;B<E.length;++B)++v[E[B]&31];for(var B=0;B<m.length;++B)++v[m[B]&31];for(var Q=Ta(v,7),S=Q.t,D=Q.l,M=19;M>4&&!S[Ec[M-1]];--M);var L=c+5<<3,R=_i(i,Nt)+_i(n,ln)+a,U=_i(i,d)+_i(n,p)+a+14+3*M+_i(v,S)+2*v[16]+3*v[17]+7*v[18];if(A>=0&&L<=R&&L<=U)return Lh(e,h,r.subarray(A,A+c));var T,H,X,j;if(Xe(e,h,1+(U<R)),h+=2,U<R){T=Yi(d,u,0),H=d,X=Yi(p,f,0),j=p;var J=Yi(S,D,0);Xe(e,h,I-257),Xe(e,h+5,y-1),Xe(e,h+10,M-4),h+=14;for(var B=0;B<M;++B)Xe(e,h+3*B,S[Ec[B]]);h+=3*M;for(var G=[E,m],N=0;N<2;++N)for(var $=G[N],B=0;B<$.length;++B){var ne=$[B]&31;Xe(e,h,J[ne]),h+=S[ne],ne>15&&(Xe(e,h,$[B]>>5&127),h+=$[B]>>12)}}else T=Gf,H=Nt,X=Nf,j=ln;for(var B=0;B<o;++B){var ce=s[B];if(ce>255){var ne=ce>>18&31;Fi(e,h,T[ne+257]),h+=H[ne+257],ne>7&&(Xe(e,h,ce>>23&31),h+=Rr[ne]);var Ut=ce&31;Fi(e,h,X[Ut]),h+=j[Ut],Ut>3&&(Fi(e,h,ce>>5&8191),h+=Dr[Ut])}else Fi(e,h,T[ce]),h+=H[ce]}return Fi(e,h,T[256]),h+H[256]},Of=new xr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gh=new pe(0),Pf=function(r,e,t,s,i,n){var a=n.z||r.length,o=new pe(s+a+5*(1+Math.ceil(a/7e3))+i),A=o.subarray(s,o.length-i),c=n.l,h=(n.r||0)&7;if(e){h&&(A[0]=n.r>>3);for(var l=Of[e-1],d=l>>13,u=l&8191,g=(1<<t)-1,p=n.p||new Qe(32768),f=n.h||new Qe(g+1),b=Math.ceil(t/3),E=2*b,I=function(Qn){return(r[Qn]^r[Qn+1]<<b^r[Qn+2]<<E)&g},C=new xr(25e3),m=new Qe(288),y=new Qe(32),v=0,B=0,Q=n.i||0,S=0,D=n.w||0,M=0;Q+2<a;++Q){var L=I(Q),R=Q&32767,U=f[L];if(p[R]=U,f[L]=R,D<=Q){var T=a-Q;if((v>7e3||S>24576)&&(T>423||!c)){h=yc(r,A,0,C,m,y,B,S,M,Q-M,h),S=v=B=0,M=Q;for(var H=0;H<286;++H)m[H]=0;for(var H=0;H<30;++H)y[H]=0}var X=2,j=0,J=u,G=R-U&32767;if(T>2&&L==I(Q-G))for(var N=Math.min(d,T)-1,$=Math.min(32767,Q),ne=Math.min(258,T);G<=$&&--J&&R!=U;){if(r[Q+X]==r[Q+X-G]){for(var ce=0;ce<ne&&r[Q+ce]==r[Q+ce-G];++ce);if(ce>X){if(X=ce,j=G,ce>N)break;for(var Ut=Math.min(G,ce-2),Tr=0,H=0;H<Ut;++H){var yn=Q-G+H&32767,$h=p[yn],Mr=yn-$h&32767;Mr>Tr&&(Tr=Mr,U=yn)}}}R=U,U=p[R],G+=R-U&32767}if(j){C[S++]=268435456|dr[X]<<18|Cc[j];var Fr=dr[X]&31,_r=Cc[j]&31;B+=Rr[Fr]+Dr[_r],++m[257+Fr],++y[_r],D=Q+X,++v}else C[S++]=r[Q],++m[r[Q]]}}for(Q=Math.max(Q,D);Q<a;++Q)C[S++]=r[Q],++m[r[Q]];h=yc(r,A,c,C,m,y,B,S,M,Q-M,h),c||(n.r=h&7|A[h/8|0]<<3,h-=7,n.h=f,n.p=p,n.i=Q,n.w=D)}else{for(var Q=n.w||0;Q<a+c;Q+=65535){var wn=Q+65535;wn>=a&&(A[h/8|0]=c,wn=a),h=Lh(A,h+1,r.subarray(Q,wn))}n.i=a}return kh(o,0,s+_h(h)+i)},Hf=function(){for(var r=new Int32Array(256),e=0;e<256;++e){for(var t=e,s=9;--s;)t=(t&1&&-306674912)^t>>>1;r[e]=t}return r}(),qf=function(){var r=-1;return{p:function(e){for(var t=r,s=0;s<e.length;++s)t=Hf[t&255^e[s]]^t>>>8;r=t},d:function(){return~r}}},jf=function(r,e,t,s,i){if(!i&&(i={l:1},e.dictionary)){var n=e.dictionary.subarray(-32768),a=new pe(n.length+r.length);a.set(n),a.set(r,n.length),r=a,i.w=n.length}return Pf(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,s,i)},Nh=function(r,e){var t={};for(var s in r)t[s]=r[s];for(var s in e)t[s]=e[s];return t},Ae=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8};function $f(r,e){return jf(r,e||{},0,0)}var Uh=function(r,e,t,s){for(var i in r){var n=r[i],a=e+i,o=s;Array.isArray(n)&&(o=Nh(s,n[1]),n=n[0]),n instanceof pe?t[a]=[n,o]:(t[a+="/"]=[new pe(0),o],Uh(n,a,t,s))}},wc=typeof TextEncoder<"u"&&new TextEncoder,Vf=typeof TextDecoder<"u"&&new TextDecoder,Kf=0;try{Vf.decode(Gh,{stream:!0}),Kf=1}catch{}function hn(r,e){var t;if(wc)return wc.encode(r);for(var s=r.length,i=new pe(r.length+(r.length>>1)),n=0,a=function(c){i[n++]=c},t=0;t<s;++t){if(n+5>i.length){var o=new pe(n+8+(s-t<<1));o.set(i),i=o}var A=r.charCodeAt(t);A<128||e?a(A):A<2048?(a(192|A>>6),a(128|A&63)):A>55295&&A<57344?(A=65536+(A&1047552)|r.charCodeAt(++t)&1023,a(240|A>>18),a(128|A>>12&63),a(128|A>>6&63),a(128|A&63)):(a(224|A>>12),a(128|A>>6&63),a(128|A&63))}return kh(i,0,n)}var pr=function(r){var e=0;if(r)for(var t in r){var s=r[t].length;s>65535&&Bn(9),e+=s+4}return e},Qc=function(r,e,t,s,i,n,a,o){var A=s.length,c=t.extra,h=o&&o.length,l=pr(c);Ae(r,e,a!=null?33639248:67324752),e+=4,a!=null&&(r[e++]=20,r[e++]=t.os),r[e]=20,e+=2,r[e++]=t.flag<<1|(n<0&&8),r[e++]=i&&8,r[e++]=t.compression&255,r[e++]=t.compression>>8;var d=new Date(t.mtime==null?Date.now():t.mtime),u=d.getFullYear()-1980;if((u<0||u>119)&&Bn(10),Ae(r,e,u<<25|d.getMonth()+1<<21|d.getDate()<<16|d.getHours()<<11|d.getMinutes()<<5|d.getSeconds()>>1),e+=4,n!=-1&&(Ae(r,e,t.crc),Ae(r,e+4,n<0?-n-2:n),Ae(r,e+8,t.size)),Ae(r,e+12,A),Ae(r,e+14,l),e+=16,a!=null&&(Ae(r,e,h),Ae(r,e+6,t.attrs),Ae(r,e+10,a),e+=14),r.set(s,e),e+=A,l)for(var g in c){var p=c[g],f=p.length;Ae(r,e,+g),Ae(r,e+2,f),r.set(p,e+4),e+=4+f}return h&&(r.set(o,e),e+=h),e},zf=function(r,e,t,s,i){Ae(r,e,101010256),Ae(r,e+8,t),Ae(r,e+10,t),Ae(r,e+12,s),Ae(r,e+16,i)};function Jf(r,e){e||(e={});var t={},s=[];Uh(r,"",t,e);var i=0,n=0;for(var a in t){var o=t[a],A=o[0],c=o[1],h=c.level==0?0:8,l=hn(a),d=l.length,u=c.comment,g=u&&hn(u),p=g&&g.length,f=pr(c.extra);d>65535&&Bn(11);var b=h?$f(A,c):A,E=b.length,I=qf();I.p(A),s.push(Nh(c,{size:A.length,crc:I.d(),c:b,f:l,m:g,u:d!=a.length||g&&u.length!=p,o:i,compression:h})),i+=30+d+f+E,n+=76+2*(d+f)+(p||0)+E}for(var C=new pe(n+22),m=i,y=n-i,v=0;v<s.length;++v){var l=s[v];Qc(C,l.o,l,l.f,l.u,l.c.length);var B=30+l.f.length+pr(l.extra);C.set(l.c,l.o+B),Qc(C,i,l,l.f,l.u,l.c.length,l.o,l.m),i+=16+B+(l.m?l.m.length:0)}return zf(C,i,s.length,y,m),C}class we{constructor(e,t="",s=[],i=[]){this.name=e,this.type=t,this.metadata=s,this.properties=i,this.children=[]}addMetadata(e,t){this.metadata.push({key:e,value:t})}addProperty(e,t=[]){this.properties.push({property:e,metadata:t})}addChild(e){this.children.push(e)}toString(e=0){const t="	".repeat(e),s=this.metadata.map(h=>{const l=h.key,d=h.value;if(Array.isArray(d)){const u=[];return u.push(`${l} = {`),d.forEach(g=>{u.push(`${t}		${g}`)}),u.push(`${t}	}`),u.join(`
`)}else return`${l} = ${d}`}),i=s.length?` (
${s.map(h=>`${t}	${h}`).join(`
`)}
${t})`:"",n=this.properties.map(h=>{const l=h.property,d=h.metadata.length?` (
${h.metadata.map(u=>`${t}		${u}`).join(`
`)}
${t}	)`:"";return`${t}	${l}${d}`}),a=this.children.map(h=>h.toString(e+1)),o=[];if(n.length>0&&o.push(...n),a.length>0){n.length>0&&o.push("");for(let h=0;h<a.length;h++)o.push(a[h]),h<a.length-1&&o.push("")}const A=o.join(`
`),c=this.type?this.type+" ":"";return`${t}def ${c}"${this.name}"${i}
${t}{
${A}
${t}}`}}class Yf{constructor(){this.textureUtils=null}setTextureUtils(e){this.textureUtils=e}parse(e,t,s,i){this.parseAsync(e,i).then(t).catch(s)}async parseAsync(e,t={}){t=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}},includeAnchoringProperties:!0,onlyVisible:!0,quickLookCompatible:!1,maxTextureSize:1024},t);const s=new Set,i={},n="model.usda";i[n]=null;const a=new we("Root","Xform"),o=new we("Scenes","Scope");o.addMetadata("kind",'"sceneLibrary"'),a.addChild(o);const A="Scene",c=new we(A,"Xform");c.addMetadata("customData",["bool preliminary_collidesWithEnvironment = 0",`string sceneName = "${A}"`]),c.addMetadata("sceneName",`"${A}"`),t.includeAnchoringProperties&&(c.addProperty(`token preliminary:anchoring:type = "${t.ar.anchoring.type}"`),c.addProperty(`token preliminary:planeAnchoring:alignment = "${t.ar.planeAnchoring.alignment}"`)),o.addChild(c);let h;const l={},d={};Hh(e,c,l,s,i,t);const u=nm(l,d,t.quickLookCompatible);h=Ph()+`
`+a.toString()+`

`+u.toString(),i[n]=hn(h),h=null;for(const p in d){let f=d[p];if(f.isCompressedTexture===!0){if(this.textureUtils===null)throw new Error("THREE.USDZExporter: setTextureUtils() must be called to process compressed textures.");f=await this.textureUtils.decompress(f)}const b=Wf(f.image,f.flipY,t.maxTextureSize),E=await new Promise(I=>b.toBlob(I,"image/png",1));i[`textures/Texture_${p}.png`]=new Uint8Array(await E.arrayBuffer())}let g=0;for(const p in i){const f=i[p],b=34+p.length;g+=b;const E=g&63;if(E!==4){const I=64-E,C=new Uint8Array(I);i[p]=[f,{extra:{12345:C}}]}g=f.length}return Jf(i,{level:0})}}function Oh(r,e){let t=r.name;return t=t.replace(/[^A-Za-z0-9_]/g,""),/^[0-9]/.test(t)&&(t="_"+t),t===""&&(r.isCamera?t="Camera":t="Object"),e.has(t)&&(t=t+"_"+r.id),e.add(t),t}function Wf(r,e,t){if(typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&r instanceof ImageBitmap){const s=t/Math.max(r.width,r.height),i=document.createElement("canvas");i.width=r.width*Math.min(1,s),i.height=r.height*Math.min(1,s);const n=i.getContext("2d");return e===!0&&(n.translate(0,i.height),n.scale(1,-1)),n.drawImage(r,0,0,i.width,i.height),i}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const Ce=7;function Ph(){return`#usda 1.0
(
	customLayerData = {
		string creator = "Three.js USDZExporter"
	}
	defaultPrim = "Root"
	metersPerUnit = 1
	upAxis = "Y"
)
`}function Hh(r,e,t,s,i,n){for(let a=0,o=r.children.length;a<o;a++){const A=r.children[a];if(A.visible===!1&&n.onlyVisible===!0)continue;let c;if(A.isMesh){const h=A.geometry,l=A.material;if(l.isMeshStandardMaterial){const d="geometries/Geometry_"+h.id+".usda";if(!(d in i)){const u=Zf(h);i[d]=hn(Ph()+`
`+u.toString())}l.uuid in t||(t[l.uuid]=l),c=Xf(A,h,t[l.uuid],s)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",A)}else A.isCamera?c=om(A,s):c=qh(A,s);c&&(e.addChild(c),Hh(A,c,t,s,i,n))}}function qh(r,e){const t=Oh(r,e),s=jh(r.matrix);r.matrix.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",r);const i=new we(t,"Xform");return i.addProperty(`matrix4d xformOp:transform = ${s}`),i.addProperty('uniform token[] xformOpOrder = ["xformOp:transform"]'),i}function Xf(r,e,t,s){const i=qh(r,s);return i.addMetadata("prepend references",`@./geometries/Geometry_${e.id}.usda@</Geometry>`),i.addMetadata("prepend apiSchemas",'["MaterialBindingAPI"]'),i.addProperty(`rel material:binding = </Materials/Material_${t.id}>`),i}function jh(r){const e=r.elements;return`( ${Ms(e,0)}, ${Ms(e,4)}, ${Ms(e,8)}, ${Ms(e,12)} )`}function Ms(r,e){return`(${r[e+0]}, ${r[e+1]}, ${r[e+2]}, ${r[e+3]})`}function Zf(r){const e=new we("Geometry"),t=em(r);return e.addChild(t),e}function em(r){const e="Geometry",t=r.attributes,s=t.position.count,i=new we(e,"Mesh");i.addProperty(`int[] faceVertexCounts = [${tm(r)}]`),i.addProperty(`int[] faceVertexIndices = [${im(r)}]`),i.addProperty(`normal3f[] normals = [${Ma(t.normal,s)}]`,['interpolation = "vertex"']),i.addProperty(`point3f[] points = [${Ma(t.position,s)}]`);for(let a=0;a<4;a++){const o=a>0?a:"",A=t["uv"+o];A!==void 0&&i.addProperty(`texCoord2f[] primvars:st${o} = [${sm(A)}]`,['interpolation = "vertex"'])}const n=t.color;return n!==void 0&&i.addProperty(`color3f[] primvars:displayColor = [${Ma(n,s)}]`,['interpolation = "vertex"']),i.addProperty('uniform token subdivisionScheme = "none"'),i}function tm(r){const e=r.index!==null?r.index.count:r.attributes.position.count;return Array(e/3).fill(3).join(", ")}function im(r){const e=r.index,t=[];if(e!==null)for(let s=0;s<e.count;s++)t.push(e.getX(s));else{const s=r.attributes.position.count;for(let i=0;i<s;i++)t.push(i)}return t.join(", ")}function Ma(r,e){if(r===void 0)return console.warn("USDZExporter: Normals missing."),Array(e).fill("(0, 0, 0)").join(", ");const t=[];for(let s=0;s<r.count;s++){const i=r.getX(s),n=r.getY(s),a=r.getZ(s);t.push(`(${i.toPrecision(Ce)}, ${n.toPrecision(Ce)}, ${a.toPrecision(Ce)})`)}return t.join(", ")}function sm(r){const e=[];for(let t=0;t<r.count;t++){const s=r.getX(t),i=r.getY(t);e.push(`(${s.toPrecision(Ce)}, ${1-i.toPrecision(Ce)})`)}return e.join(", ")}function nm(r,e,t=!1){const s=new we("Materials");for(const i in r){const n=r[i];s.addChild(am(n,e,t))}return s}function am(r,e,t=!1){const s=new we(`Material_${r.id}`,"Material");function i(a,o,A){const c=a.source.id+"_"+a.flipY;e[c]=a;const h=a.channel>0?"st"+a.channel:"st",l={1e3:"repeat",1001:"clamp",1002:"mirror"},d=a.repeat.clone(),u=a.offset.clone(),g=a.rotation,p=Math.sin(g),f=Math.cos(g);u.y=1-u.y-d.y,t?(u.x=u.x/d.x,u.y=u.y/d.y,u.x+=p/d.x,u.y+=f-1):(u.x+=p*d.x,u.y+=(1-f)*d.y);const b=new we(`PrimvarReader_${o}`,"Shader");b.addProperty('uniform token info:id = "UsdPrimvarReader_float2"'),b.addProperty("float2 inputs:fallback = (0.0, 0.0)"),b.addProperty(`string inputs:varname = "${h}"`),b.addProperty("float2 outputs:result");const E=new we(`Transform2d_${o}`,"Shader");E.addProperty('uniform token info:id = "UsdTransform2d"'),E.addProperty(`float2 inputs:in.connect = </Materials/Material_${r.id}/PrimvarReader_${o}.outputs:result>`),E.addProperty(`float inputs:rotation = ${(g*(180/Math.PI)).toFixed(Ce)}`),E.addProperty(`float2 inputs:scale = ${Sc(d)}`),E.addProperty(`float2 inputs:translation = ${Sc(u)}`),E.addProperty("float2 outputs:result");const I=new we(`Texture_${a.id}_${o}`,"Shader");return I.addProperty('uniform token info:id = "UsdUVTexture"'),I.addProperty(`asset inputs:file = @textures/Texture_${c}.png@`),I.addProperty(`float2 inputs:st.connect = </Materials/Material_${r.id}/Transform2d_${o}.outputs:result>`),A!==void 0&&I.addProperty(`float4 inputs:scale = ${rm(A)}`),o==="normal"&&(I.addProperty("float4 inputs:scale = (2, 2, 2, 1)"),I.addProperty("float4 inputs:bias = (-1, -1, -1, 0)")),I.addProperty(`token inputs:sourceColorSpace = "${a.colorSpace===Ja?"raw":"sRGB"}"`),I.addProperty(`token inputs:wrapS = "${l[a.wrapS]}"`),I.addProperty(`token inputs:wrapT = "${l[a.wrapT]}"`),I.addProperty("float outputs:r"),I.addProperty("float outputs:g"),I.addProperty("float outputs:b"),I.addProperty("float3 outputs:rgb"),(r.transparent||r.alphaTest>0)&&I.addProperty("float outputs:a"),[b,E,I]}r.side===dt&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",r);const n=new we("PreviewSurface","Shader");if(n.addProperty('uniform token info:id = "UsdPreviewSurface"'),r.map!==null?(n.addProperty(`color3f inputs:diffuseColor.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:rgb>`),r.transparent?n.addProperty(`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:a>`):r.alphaTest>0&&(n.addProperty(`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.map.id}_diffuse.outputs:a>`),n.addProperty(`float inputs:opacityThreshold = ${r.alphaTest}`)),i(r.map,"diffuse",r.color).forEach(o=>s.addChild(o))):n.addProperty(`color3f inputs:diffuseColor = ${vc(r.color)}`),r.emissiveMap!==null){n.addProperty(`color3f inputs:emissiveColor.connect = </Materials/Material_${r.id}/Texture_${r.emissiveMap.id}_emissive.outputs:rgb>`);const a=new he(r.emissive.r*r.emissiveIntensity,r.emissive.g*r.emissiveIntensity,r.emissive.b*r.emissiveIntensity);i(r.emissiveMap,"emissive",a).forEach(A=>s.addChild(A))}else r.emissive.getHex()>0&&n.addProperty(`color3f inputs:emissiveColor = ${vc(r.emissive)}`);if(r.normalMap!==null&&(n.addProperty(`normal3f inputs:normal.connect = </Materials/Material_${r.id}/Texture_${r.normalMap.id}_normal.outputs:rgb>`),i(r.normalMap,"normal").forEach(o=>s.addChild(o))),r.aoMap!==null){n.addProperty(`float inputs:occlusion.connect = </Materials/Material_${r.id}/Texture_${r.aoMap.id}_occlusion.outputs:r>`);const a=new he(r.aoMapIntensity,r.aoMapIntensity,r.aoMapIntensity);i(r.aoMap,"occlusion",a).forEach(A=>s.addChild(A))}if(r.roughnessMap!==null){n.addProperty(`float inputs:roughness.connect = </Materials/Material_${r.id}/Texture_${r.roughnessMap.id}_roughness.outputs:g>`);const a=new he(r.roughness,r.roughness,r.roughness);i(r.roughnessMap,"roughness",a).forEach(A=>s.addChild(A))}else n.addProperty(`float inputs:roughness = ${r.roughness}`);if(r.metalnessMap!==null){n.addProperty(`float inputs:metallic.connect = </Materials/Material_${r.id}/Texture_${r.metalnessMap.id}_metallic.outputs:b>`);const a=new he(r.metalness,r.metalness,r.metalness);i(r.metalnessMap,"metallic",a).forEach(A=>s.addChild(A))}else n.addProperty(`float inputs:metallic = ${r.metalness}`);if(r.alphaMap!==null?(n.addProperty(`float inputs:opacity.connect = </Materials/Material_${r.id}/Texture_${r.alphaMap.id}_opacity.outputs:r>`),n.addProperty("float inputs:opacityThreshold = 0.0001"),i(r.alphaMap,"opacity").forEach(o=>s.addChild(o))):n.addProperty(`float inputs:opacity = ${r.opacity}`),r.isMeshPhysicalMaterial){if(r.clearcoatMap!==null){n.addProperty(`float inputs:clearcoat.connect = </Materials/Material_${r.id}/Texture_${r.clearcoatMap.id}_clearcoat.outputs:r>`);const a=new he(r.clearcoat,r.clearcoat,r.clearcoat);i(r.clearcoatMap,"clearcoat",a).forEach(A=>s.addChild(A))}else n.addProperty(`float inputs:clearcoat = ${r.clearcoat}`);if(r.clearcoatRoughnessMap!==null){n.addProperty(`float inputs:clearcoatRoughness.connect = </Materials/Material_${r.id}/Texture_${r.clearcoatRoughnessMap.id}_clearcoatRoughness.outputs:g>`);const a=new he(r.clearcoatRoughness,r.clearcoatRoughness,r.clearcoatRoughness);i(r.clearcoatRoughnessMap,"clearcoatRoughness",a).forEach(A=>s.addChild(A))}else n.addProperty(`float inputs:clearcoatRoughness = ${r.clearcoatRoughness}`);n.addProperty(`float inputs:ior = ${r.ior}`)}return n.addProperty("int inputs:useSpecularWorkflow = 0"),n.addProperty("token outputs:surface"),s.addChild(n),s.addProperty(`token outputs:surface.connect = </Materials/Material_${r.id}/PreviewSurface.outputs:surface>`),s}function vc(r){return`(${r.r}, ${r.g}, ${r.b})`}function rm(r){return`(${r.r}, ${r.g}, ${r.b}, 1.0)`}function Sc(r){return`(${r.x}, ${r.y})`}function om(r,e){const t=Oh(r,e),s=jh(r.matrix);r.matrix.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",r);const i=new we(t,"Camera");i.addProperty(`matrix4d xformOp:transform = ${s}`),i.addProperty('uniform token[] xformOpOrder = ["xformOp:transform"]');const n=r.isOrthographicCamera?"orthographic":"perspective";i.addProperty(`token projection = "${n}"`);const a=`(${r.near.toPrecision(Ce)}, ${r.far.toPrecision(Ce)})`;i.addProperty(`float2 clippingRange = ${a}`);let o;r.isOrthographicCamera?o=((Math.abs(r.left)+Math.abs(r.right))*10).toPrecision(Ce):o=r.getFilmWidth().toPrecision(Ce),i.addProperty(`float horizontalAperture = ${o}`);let A;if(r.isOrthographicCamera?A=((Math.abs(r.top)+Math.abs(r.bottom))*10).toPrecision(Ce):A=r.getFilmHeight().toPrecision(Ce),i.addProperty(`float verticalAperture = ${A}`),r.isPerspectiveCamera){const c=r.getFocalLength().toPrecision(Ce);i.addProperty(`float focalLength = ${c}`);const h=r.focus.toPrecision(Ce);i.addProperty(`float focusDistance = ${h}`)}return i}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=r=>e=>{try{const t=tt(e),s=(t.length?t[0].terms:[]).filter(i=>i&&i.type==="ident").map(i=>i.value).filter(i=>r.indexOf(i)>-1);return new Set(s)}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};let xc=!1,Rc=!1;const Dc="#model-viewer-no-ar-fallback",cm=Am(["quick-look","scene-viewer","webxr","none"]),lm="webxr scene-viewer quick-look",ve={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},Ze=Symbol("arButtonContainer"),Tc=Symbol("enterARWithWebXR"),Mc=Symbol("openSceneViewer"),Fc=Symbol("openIOSARQuickLook"),hm=Symbol("canActivateAR"),Fs=Symbol("arMode"),Fa=Symbol("arModes"),ei=Symbol("arAnchor"),_s=Symbol("preload"),ks=Symbol("onARButtonContainerClick"),_a=Symbol("onARStatus"),ka=Symbol("onARTracking"),La=Symbol("onARTap"),ki=Symbol("selectARMode"),Ga=Symbol("triggerLoad"),dm=r=>{var e,t,s,i,n,a,o,A,c,h;class l extends r{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arUsdzMaxTextureSize="auto",this.arPlacement="floor",this.arModes=lm,this.iosSrc=null,this.xrEnvironment=!1,this[e]=!1,this[t]=this.shadowRoot.querySelector(".ar-button"),this[s]=document.createElement("a"),this[i]=new Set,this[n]=ve.NONE,this[a]=!1,this[o]=u=>{u.preventDefault(),this.activateAR()},this[A]=({status:u})=>{(u===At.NOT_PRESENTING||this[z].arRenderer.presentedScene===this[w])&&(this.setAttribute("ar-status",u),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:u}})),u===At.NOT_PRESENTING?this.removeAttribute("ar-tracking"):u===At.SESSION_STARTED&&this.setAttribute("ar-tracking",nr.TRACKING))},this[c]=({status:u})=>{this.setAttribute("ar-tracking",u),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:u}}))},this[h]=u=>{u.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[Fs]!==ve.NONE}connectedCallback(){super.connectedCallback(),this[z].arRenderer.addEventListener("status",this[_a]),this.setAttribute("ar-status",At.NOT_PRESENTING),this[z].arRenderer.addEventListener("tracking",this[ka]),this[ei].addEventListener("message",this[La])}disconnectedCallback(){super.disconnectedCallback(),this[z].arRenderer.removeEventListener("status",this[_a]),this[z].arRenderer.removeEventListener("tracking",this[ka]),this[ei].removeEventListener("message",this[La])}update(u){super.update(u),u.has("arScale")&&(this[w].canScale=this.arScale!=="fixed"),u.has("arPlacement")&&(this[w].updateShadow(),this[oe]()),u.has("arModes")&&(this[Fa]=cm(this.arModes)),(u.has("ar")||u.has("arModes")||u.has("src")||u.has("iosSrc")||u.has("arUsdzMaxTextureSize"))&&this[ki]()}async activateAR(){switch(this[Fs]){case ve.QUICK_LOOK:await this[Fc]();break;case ve.WEBXR:await this[Tc]();break;case ve.SCENE_VIEWER:this[Mc]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(e=hm,t=Ze,s=ei,i=Fa,n=Fs,a=_s,o=ks,A=_a,c=ka,h=La,ki)](){var u;let g=ve.NONE;if(this.ar){if(this.src!=null)for(const p of this[Fa]){if(p==="webxr"&&ll&&!xc&&await this[z].arRenderer.supportsPresentation()){g=ve.WEBXR;break}if(p==="scene-viewer"&&!Rc&&(uu||navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues&&(!((u=(await navigator.userAgentData.getHighEntropyValues(["formFactor"])).formFactor)===null||u===void 0)&&u.includes("XR")))){g=ve.SCENE_VIEWER;break}if(p==="quick-look"&&Zr){g=ve.QUICK_LOOK;break}}g===ve.NONE&&this.iosSrc!=null&&Zr&&(g=ve.QUICK_LOOK)}if(g!==ve.NONE)this[Ze].classList.add("enabled"),this[Ze].addEventListener("click",this[ks]);else if(this[Ze].classList.contains("enabled")){this[Ze].removeEventListener("click",this[ks]),this[Ze].classList.remove("enabled");const p=At.FAILED;this.setAttribute("ar-status",p),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:p}}))}this[Fs]=g}async[Tc](){console.log("Attempting to present in AR with WebXR..."),await this[Ga]();try{this[Ze].removeEventListener("click",this[ks]);const{arRenderer:u}=this[z];u.placeOnWall=this.arPlacement==="wall",await u.present(this[w],this.xrEnvironment)}catch(u){console.warn("Error while trying to present in AR with WebXR"),console.error(u),await this[z].arRenderer.stopPresenting(),xc=!0,console.warn("Falling back to next ar-mode"),await this[ki](),this.activateAR()}finally{this[ki]()}}async[Ga](){this.loaded||(this[_s]=!0,this[li](),await bu(this,"load"),this[_s]=!1)}[gi](){return super[gi]()||this[_s]}[Mc](){const u=self.location.toString(),g=new URL(u),p=new URL(this.src,u);p.hash&&(p.hash="");const f=new URLSearchParams(p.search);if(g.hash=Dc,f.set("mode","ar_preferred"),f.has("disable_occlusion")||f.set("disable_occlusion","true"),this.arScale==="fixed"&&f.set("resizable","false"),this.arPlacement==="wall"&&f.set("enable_vertical_placement","true"),f.has("sound")){const I=new URL(f.get("sound"),u);f.set("sound",I.toString())}if(f.has("link")){const I=new URL(f.get("link"),u);f.set("link",I.toString())}const b=`intent://arvr.google.com/scene-viewer/1.2?${f.toString()+"&file="+encodeURIComponent(p.toString())}#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(g.toString())};end;`,E=()=>{self.location.hash===Dc&&(Rc=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[ki]())};self.addEventListener("hashchange",E,{once:!0}),this[ei].setAttribute("href",b),console.log("Attempting to present in AR with Scene Viewer..."),this[ei].click()}async[Fc](){const u=!this.iosSrc;this[Ze].classList.remove("enabled");const g=u?await this.prepareUSDZ():this.iosSrc,p=new URL(g,self.location.toString());if(u){const E=self.location.toString(),I=new URL(E),C=new URL(this.src,I);C.hash&&(p.hash=C.hash)}this.arScale==="fixed"&&(p.hash&&(p.hash+="&"),p.hash+="allowsContentScaling=0");const f=this[ei];f.setAttribute("rel","ar");const b=document.createElement("img");f.appendChild(b),f.setAttribute("href",p.toString()),u&&f.setAttribute("download","model.usdz"),f.style.display="none",f.isConnected||this.shadowRoot.appendChild(f),console.log("Attempting to present in AR with Quick Look..."),f.click(),f.removeChild(b),u&&URL.revokeObjectURL(g),this[Ze].classList.add("enabled")}async prepareUSDZ(){const u=this[Lt].beginActivity("usdz-conversion");await this[Ga]();const{model:g,shadow:p,target:f}=this[w];if(g==null)return"";let b=!1;p!=null&&(b=p.visible,p.visible=!1),u(.2);const E=new Yf;f.remove(g),g.position.copy(f.position),g.updateWorldMatrix(!1,!0);const I=await E.parseAsync(g,{maxTextureSize:isNaN(this.arUsdzMaxTextureSize)?1/0:Math.max(parseInt(this.arUsdzMaxTextureSize),16)});g.position.set(0,0,0),f.add(g);const C=new Blob([I],{type:"model/vnd.usdz+zip"}),m=URL.createObjectURL(C);return u(1),p!=null&&(p.visible=b),m}}return wt([F({type:Boolean,attribute:"ar"})],l.prototype,"ar",void 0),wt([F({type:String,attribute:"ar-scale"})],l.prototype,"arScale",void 0),wt([F({type:String,attribute:"ar-usdz-max-texture-size"})],l.prototype,"arUsdzMaxTextureSize",void 0),wt([F({type:String,attribute:"ar-placement"})],l.prototype,"arPlacement",void 0),wt([F({type:String,attribute:"ar-modes"})],l.prototype,"arModes",void 0),wt([F({type:String,attribute:"ios-src"})],l.prototype,"iosSrc",void 0),wt([F({type:Boolean,attribute:"xr-environment"})],l.prototype,"xrEnvironment",void 0),l};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Na=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const um=100,gm="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",pm="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",fm="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",Ua={AUTO:"auto"},_c={AUTO:"auto",EAGER:"eager"},ti=Symbol("defaultProgressBarElement"),Oa=Symbol("posterContainerElement"),ii=Symbol("defaultPosterElement"),Li=Symbol("shouldDismissPoster"),Pa=Symbol("hidePoster"),Ls=Symbol("modelIsRevealed"),Ha=Symbol("updateProgressBar"),mm=Symbol("ariaLabelCallToAction"),qa=Symbol("onProgress"),bm=r=>{var e,t,s,i,n,a,o,A;class c extends r{static set dracoDecoderLocation(l){be.setDRACODecoderLocation(l)}static get dracoDecoderLocation(){return be.getDRACODecoderLocation()}static set ktx2TranscoderLocation(l){be.setKTX2TranscoderLocation(l)}static get ktx2TranscoderLocation(){return be.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(l){be.setMeshoptDecoderLocation(l)}static get meshoptDecoderLocation(){return be.getMeshoptDecoderLocation()}static set lottieLoaderLocation(l){_e.singleton.textureUtils.lottieLoaderUrl=l}static get lottieLoaderLocation(){return _e.singleton.textureUtils.lottieLoaderUrl}static mapURLs(l){_e.singleton.loader[Qt].manager.setURLModifier(l)}dismissPoster(){this.loaded?this[Pa]():(this[Li]=!0,this[li]())}showPoster(){const l=this[Oa];if(l.classList.contains("show"))return;l.classList.add("show"),this[Me].classList.remove("show");const d=this[ii];d.removeAttribute("tabindex"),d.removeAttribute("aria-hidden");const u=this.modelIsVisible;this[Ls]=!1,this[on](u)}getDimensions(){return ct(this[w].size)}getBoundingBoxCenter(){return ct(this[w].boundingBox.getCenter(new k))}constructor(...l){super(...l),this.poster=null,this.reveal=Ua.AUTO,this.loading=_c.AUTO,this[e]=!1,this[t]=!1,this[s]=this.shadowRoot.querySelector(".slot.poster"),this[i]=this.shadowRoot.querySelector("#default-poster"),this[n]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[a]=this[ii].getAttribute("aria-label"),this[o]=fu(f=>{const b=this[ti].parentNode;requestAnimationFrame(()=>{this[ti].style.transform=`scaleX(${f})`,f===0&&(b.removeChild(this[ti]),b.appendChild(this[ti])),this[ti].classList.toggle("hide",f===1)})},um),this[A]=f=>{const b=f.detail.totalProgress,E=f.detail.reason;b===1&&(this[Ha].flush(),this.loaded&&(this[Li]||this.reveal===Ua.AUTO)&&this[Pa]()),this[Ha](b),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:b,reason:E}}))};const d=self.ModelViewerElement||{},u=d.dracoDecoderLocation||gm;be.setDRACODecoderLocation(u);const g=d.ktx2TranscoderLocation||pm;be.setKTX2TranscoderLocation(g),d.meshoptDecoderLocation&&be.setMeshoptDecoderLocation(d.meshoptDecoderLocation);const p=d.lottieLoaderLocation||fm;_e.singleton.textureUtils.lottieLoaderUrl=p}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[Lt].addEventListener("progress",this[qa])}disconnectedCallback(){super.disconnectedCallback(),this[Lt].removeEventListener("progress",this[qa])}async updated(l){super.updated(l),l.has("poster")&&this.poster!=null&&(this[ii].style.backgroundImage=`url(${this.poster})`),l.has("alt")&&this[ii].setAttribute("aria-label",this[cr]),(l.has("reveal")||l.has("loading"))&&this[li]()}[(e=Ls,t=Li,s=Oa,i=ii,n=ti,a=mm,o=Ha,A=qa,gi)](){return!!this.src&&(this[Li]||this.loading===_c.EAGER||this.reveal===Ua.AUTO&&this[Rt])}[Pa](){this[Li]=!1;const l=this[Oa];if(!l.classList.contains("show"))return;l.classList.remove("show"),this[Me].classList.add("show");const d=this.modelIsVisible;this[Ls]=!0,this[on](d);const u=this.getRootNode();u&&u.activeElement===this&&this[Me].focus();const g=this[ii];g.setAttribute("aria-hidden","true"),g.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[Gt](){return super[Gt]()&&this[Ls]}}return Na([F({type:String})],c.prototype,"poster",void 0),Na([F({type:String})],c.prototype,"reveal",void 0),Na([F({type:String})],c.prototype,"loading",void 0),c};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ja=function(r,e,t,s){var i=arguments.length,n=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,s);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(n=(i<3?a(n):i>3?a(e,t,n):a(e,t))||n);return i>3&&n&&Object.defineProperty(e,t,n),n};const Im=Math.PI/32,Em=3e3,Cm={basis:[En(ge(Im,"rad"))],keywords:{auto:[null]}},si=Symbol("autoRotateStartTime"),$a=Symbol("radiansPerSecond"),kc=Symbol("syncRotationRate"),Va=Symbol("onCameraChange"),Bm=r=>{var e,t,s;class i extends r{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=Em,this.rotationPerSecond="auto",this[e]=performance.now(),this[t]=0,this[s]=a=>{this.autoRotate&&a.detail.source==="user-interaction"&&(this[si]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[Va]),this[si]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[Va]),this[si]=performance.now()}updated(a){super.updated(a),a.has("autoRotate")&&(this[si]=performance.now())}[(e=si,t=$a,kc)](a){this[$a]=a[0]}[je](a,o){if(super[je](a,o),!this.autoRotate||!this[Gt]()||this[z].isPresenting)return;const A=Math.min(o,a-this[si]-this.autoRotateDelay);A>0&&(this[w].yaw=this.turntableRotation+this[$a]*A*.001)}get turntableRotation(){return this[w].yaw}resetTurntableRotation(a=0){this[w].yaw=a}}return s=Va,ja([F({type:Boolean,attribute:"auto-rotate"})],i.prototype,"autoRotate",void 0),ja([F({type:Number,attribute:"auto-rotate-delay"})],i.prototype,"autoRotateDelay",void 0),ja([at({intrinsics:Cm,updateHandler:kc}),F({type:String,attribute:"rotation-per-second"})],i.prototype,"rotationPerSecond",void 0),i};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=_f(gf(Bm(yu(fp(dm(bm(Ff(As))))))));customElements.define("model-viewer",ym);export{Ld as CanvasTexture,ht as FileLoader,dn as Loader,ym as ModelViewerElement,ft as NearestFilter};
